*%GOTO  MMAPTCB; /*PLS COMMENT TO AVOID UNMATCHED QUOTE PROBLEMS        00010051
         MACRO                                                          00020051
&NAME    MAPTCB &DSECT=YES                                     @D51IDMZ 00030051
         GBLB  &IJBSGEN           SUPERVISOR GENERATION                 00040051
         GBLC  &LABEL                                          @D52VDMZ 00050051
.*       IBM DISK OPERATING SYSTEM                            *         00060051
*        SUPERVISOR - MAPTCB - 5686-066                       *@D61NDMZ 00070051
         AGO   .ZZZ                                           *         00080051
*        LICENSED MATERIALS - PROPERTY OF IBM                  @D31BDMZ 00090051
*        THIS MACRO IS "RESTRICTED MATERIALS OF IBM"          *@D31BDMZ 00100051
*        5686-066 (C) COPYRIGHT IBM CORP. 1981, 2000           @D61NDMZ 00110051
*        SEE COPYRIGHT INSTRUCTIONS                            @D31BDMZ 00120051
.ZZZ     ANOP                                                 *         00130051
.**** START OF SPECIFICATIONS ***************************************** 00140051
.*                                                                      00150051
.*01* MODULE-TYPE = MACRO                                               00160051
.*                                                                      00170051
.*01* DESCRIPTIVE NAME = MAPPING OF TASK CONTROL BLOCK                  00180051
.*                                                                      00190051
.*  STATUS           =  NEW MACRO - FIRST RELEASE AF 2.1                00200051
.*                   =              AF 5.3.0                            00210051
.*                                                                      00220051
.*  FUNCTION         =  SHOW LAYOUT OF TASK CONTROL BLOCK AND           00230051
.*                      GENERATE INLINE CODE                            00240051
.*  NOTES            =  NONE                                            00250051
.*  DEPENDENCIES     =  NONE                                            00260051
.*  RESTRICTIONS     =  NONE                                            00270051
.*  REGISTER CONVENT.=  NONE                                            00280051
.*  PATCH LABEL      =  NONE                                            00290051
.*  MACRO TYPE       =  ASSEMBLER                                       00300051
.*  PROCESSOR        =  ASM                                             00310051
.*  MACRO SIZE       =  SEE OUTPUT                                      00320051
.*  ATTRIBUTES       =  MAPPING DSECT                                   00330051
.*  ENTRY POINT      =  TCBADR                                          00340051
.*  PURPOSE          =  SEE FUNCTION                                    00350051
.*  LINKAGE          =  SEE INPUT                                       00360051
.*  CALLER           =                                                  00370051
.*  INPUT            =  MAPTCB                                          00380051
.*  OUTPUT           =  DSECT OF TCB                                    00390051
.*                                                                      00400051
.*  EXIT NORMAL      =  MACRO EXPANSION                                 00410051
.*                                                                      00420051
.*  EXIT ERROR       =  NONE                                            00430051
.*                                                                      00440051
.*  EXTERNAL REFEREN.=  NONE                                            00450051
.*  ROUTINES         =  NONE                                            00460051
.*  DATA AREAS       =  NONE                                            00470051
.*  CONTROL BLOCKS   =  NONE                                            00480051
.*  TABLES           =  NONE                                            00490051
.*  MACROS           =  NONE                                            00500051
.*  CHANGE ACTIVITIES=  NEW MACRO   FIRST RELEASE AF 2.1       @DA34091 00510051
.*  CHANGE 01        =  POINTER FOR VTAM DELAY CANCEL PROCESS  @DA36477 00520051
.*  CHANGE 02        =  EQU FOR LENGTH OF TYPE 2 SYSTEM TCB'S  @DA36760 00530051
.*  CHANGE 03        =  MOVE XPCC EXIT PTR TO TIB AF 4.1.0     @D31BDMZ 00540051
.*  CHANGE 04        =  IAF HOOKS AF 4.1.1                     @D31ZDMZ 00550051
.*  CHANGE 05        =  SCLP SUPPORT                           @D31EMMZ 00560051
.*  CHANGE 06        =  5.1 EXTENSIONS FOR CICS                @D51HDOW 00570051
.*  CHANGE 07        =  5.1 MORE PARTITION SUPPORT             @D51IDMZ 00580051
.*  CHANGE 08        =  5.2 31 BIT SUPPORT                     @D52VDMZ 00590051
.*  CHANGE 09        =  5.3 PC, LINKAGE STACK.. (EP) SUPPORT   @D61PDMZ 00600051
.*  CHANGE 10        =  6.X FAMILY API                         @D64ADMZ 00610051
.*  MODIFIED REGISTER=  NONE                                            00620051
.*                                                                      00630051
.** END OF SPECICATIONS *********************************************** 00640051
.*                                                                      00650051
         AIF   (&IJBSGEN).NOWARN                               @D14ZDFG 00660051
*********************************************************************** 00670051
* WARNING: THE FOLLOWING MAPPING REFERS TO AN INTERNAL SUPERVISOR     * 00680051
*          CONTROL BLOCK. IT MAY CHANGE ANY TIME AND IS NOT COMMITTED * 00690051
*          AS AN INTERFACE OF ANY LEVEL.                              * 00700051
*********************************************************************** 00710051
.NOWARN  ANOP                                                  @D14ZDFG 00720051
         AIF   (T'&DSECT EQ 'O').PRDS                          @D51IDMZ 00730051
         AIF   ('&DSECT' EQ 'YES').PRDS                        @D51IDMZ 00740051
         AIF   ('&DSECT' EQ 'NO').INLINE                       @D51IDMZ 00750051
.PRDS    ANOP                                                  @D51IDMZ 00760051
         AIF   (T'&NAME EQ 'O').NONAME                                  00770051
&LABEL   SETC  '&NAME'                                         @D52VDMZ 00780051
         AGO   .YNAME                                          @D52VDMZ 00790051
.NONAME  ANOP                                                           00800051
&LABEL   SETC  'TCBADR'                                        @D52VDMZ 00810051
.YNAME   ANOP                                                  @D52VDMZ 00820051
&LABEL   DSECT                                                          00830051
TCBLNGTH DS    H            LENGTH OF TCB                      @D14BDFR 00840051
TCBAUTHF DS    X            FLAG BYTE                          @D14BDFG 00850051
TCBFLAG3 EQU   TCBAUTHF                                        @D14CDFG 00860051
TCBVEND  EQU   X'80'          0  VENDOR PROGRAM ACTIVE         @D52VDMZ 00870051
VSPT     EQU   X'40'          1  PERFORMANCE TOOL ACTIVE       @D51IDMZ 00880051
DMF      EQU   X'20'          2  DMF FROM SUBSID               @D62XDMZ 00890051
* CICSMT REMOVED (CICS IS ALWAYS MAINTASK)                     @D52VDIS 00900051
DLIMT    EQU   X'10'          3  DLI 'MAIN TASK' FROM SUBSID   @D14BDFG 00910051
ISPFMT   EQU   X'08'          4  ISPF 'MAIN TASK' FROM SUBSID  @D14BDFG 00920051
FTPTSK   EQU   X'04'          5  FTP TASK ALLOWED TO USE CPCOM @D14BDJB 00930051
SOEMI    EQU   X'02'          6  SOEMI TASK                    @DA34091 00940051
ICCFMT   EQU   X'01'          7  ICCF 'MAIN TASK' FROM SUBSID  @D52VDIS 00950051
TCBRID   DS    X            RID SAVED ON INTERR. IN SV SERVICE @D36IDFR 00960051
FATHERID DS    H            TID OF ATTACHING TASK, 0 IF NONE   @D36IDFR 00970051
TCBFLAGS DS    X            FLAG BYTE                          @D36IDFR 00980051
SYSRESW  EQU   X'80'          0  WRITE ON SYSRES ALLOWED       @D36IDFR 00990051
*                             1  RESERVED FOR FUTURE USE       @D61NDMZ 01000051
*                             2  RESERVED FOR FUTURE USE       @D61NDMZ 01010051
ACLOSE   EQU   X'10'          3  VSAM AUTOM.CLOSE IN PROCESS   @D36IDFR 01020051
VSMOPEN  EQU   X'08'          4  VSAM ACB'S OPEN IN PARTITION  @D36IDFG 01030051
*                             5  RESERVED (FORMER SYNCH FLAG)  @D14BDFG 01040051
ICCFSVC  EQU   X'02'          6  ICCF SVC SCREENING FLAG       @D36IDFG 01050051
SVCEXIT  EQU   ICCFSVC                                         @D14BDFG 01060051
OWNTIMER EQU   X'01'          7  TASK TIMER ACTIV IN TASK      @D14BDFR 01070051
TCBFLAG2 DS    X            FLAG BYTE                          @D36IDFR 01080051
CNCLRTRN EQU   X'80'          0  TERMINATOR TO BE RECALLED     @D36IDFR 01090051
TCBWSTT  EQU   X'40'          1  MVS TASK MUST WAIT FOR SUBTASK         01100051
*                                TERMINATION                   @D64ADMZ 01110051
*        EQU   X'20'          2  RESERVED                      @D14BDFR 01120051
OPENSVA  EQU   X'10'          3  OPEN ACTIVE IN SVA            @D36BDFG 01130051
SELFTERM EQU   X'08'          4  TASK TERMINATING BY ITSELF    @D36IDFG 01140051
*        EQU   X'04'          5  RESERVED                      @D14BDFR 01150051
CNCLALL  EQU   X'02'          6  CANCEL ALL REQUEST            @D36IDFR 01160051
NOPAGING EQU   X'01'          7  NO PAGE FAULTS ALLOWED        @D36IDFR 01170051
TCBTIB   DS    F             TIB POINTER                       @D36IDFR 01180051
TCBSAVE  DS    F             TASK SAVEAREA ADDRESS             @D36IDFR 01190051
INTINFO  DS    F             INTERRUPT INFORMATION             @D36IDFR 01200051
SVCIC    EQU   INTINFO+3     SVC-CODE                          @D36IDFR 01210051
AERREXIT DS    F             ADDRESS OF SYST.TASK CANCEL EXIT  @D14BDFG 01220051
TCBERBLK DS    F             ADDRESS OF SYST.TASK ERROR BLOCK  @D14BDFG 01230051
TCBSAV2  DS    F             ADDRESS OF SECOND SAVE AREA       @D36IDFR 01240051
TCBARSLN EQU   64            LENGTH OF ACCESS REGISTER SAVE AR.@D51IDMZ 01250051
TCBARSAV DS    A             ADDRESS OF ACCESS REG SAVE AREA   @D51KDTP 01260051
TCBAR2SV DS    A             ADDR OF SECOND AR SAVE AREA       @D52VDMZ 01270051
TCBGVR12 DS    F             WORK AREA (USED BY GETVIS)        @D51IDMZ 01280051
.* TCBEXFLG MUST BE ON A FULLWORD BOUNDARY                     @D52VDMZ 01290051
TCBEXFLG DS    X             EXECUTION FLAG                    @D52VDMZ 01300051
TCBEXAM  EQU   X'80'         ON: AMODE 31, OFF: AMODE 24       @D52VDMZ 01310051
TCBEXARM EQU   X'40'         ON: AR MODE ALLOW. OFF: NOT ALL.  @D52VDMZ 01320051
TCBEXRM  EQU   X'20'         ON: RMODE(LOC) 31, OFF: RMODE 24  @D52VDMZ 01330051
TCBEXHPS EQU   X'10'         ON: HASN=PASN=SASN                @D61ADMZ 01340051
TCBEXXMD EQU   X'08'         ON: SVC ALLOWED IN X-MDOE         @D64ADMZ 01350051
TCBEXNAT EQU   X'04'         ON: MVS SVC ALLOWED IN NATIVE ENV.@D64ADMZ 01360051
.* TCBEXFLG MUST BE ON A FULLWORD BOUNDARY                     @D52VDMZ 01370051
TCBIEXFL DS    X             INTERNAL EXECUTION FLAG           @D52VDMZ 01380051
TCBIEXAM EQU   TCBEXAM       INTERNAL AMODE                    @D52VDMZ 01390051
TCBIEXRM EQU   TCBEXRM       INTERNAL RMODE                    @D52VDMZ 01400051
TCBGRFLG DS    X             GETVIS REQUEST FLAG BYTE          @D52VDMZ 01410051
TCBGSVA  EQU   X'80'         GETVIS SVA REQUEST                @D52VDMZ 01420051
TCBGSVAP EQU   X'40'         GETVIS SVA PFIX REQUEST           @D52VDMZ 01430051
TCBGSPCE EQU   X'20'         GETVIS SPACE REQUEST              @D52VDMZ 01440051
TCBGPMSP EQU   X'10'         GETVIS PMR SPACE REQUEST          @D52VDMZ 01450051
TCBSETLR EQU   X'08'         DO SETLOCK RELEASE, PGETVIS ONLY  @D67FDMZ 01451051
TCBFLAG5 DS    X             MORE FLAGS                        @D52VDMZ 01452051
TCBQDSP  EQU   X'80'         SYS.GETV. SP. ALLOC. BY SYSDEF SVC@D52VDMZ 01453051
TCBRSIND EQU   X'40'         ON  - RECOVERY LINKAGE STACK USED @D61PDOWX01454051
                             OFF - NORMAL LINKAGE STACK USED            01455051
TCBLSMAX EQU   X'20'         LINKAGE STACK HAS MAX SIZE        @D61PDOW 01456051
TCBRSMAX EQU   X'10'         RECOVERY LINK STACK HAS MAX SIZE  @D61PDOW 01457051
*TCBLSPEC EQU   X'01'  **** FREE FOR REUSE ***                 @D67CDOW 01458052
TCBUCNTL DS    F             USER CONTROL BLOCK                @D52VDMZ 01459051
TCBTDSE  DS    A             PTR TO TASK DATA SPACE CNTL. BLOCK@D52VDMZ 01460051
         DS    A             NOT USED                          @D61PDOW 01470051
TCBDMPIP DS    F             ADDR OF DUMP MSG INFORMATION      @D52VDMZ 01480051
         DS    F             RESERVED FOR FUTURE USE           @D52VDMZ 01490051
         DS    F             RESERVED FOR FUTURE USE           @D52VDOW 01500051
         DS    0D            DOUBLE WORD BOUNDARY FOR SAVEAREA @D14BDFR 01510051
TCBSSAVE EQU   *-8           VIRT.BEGIN OF SECOND SAVE AREA    @D14BDFG 01511051
TCBSSAV  DS    CL72          SECOND SAVE AREA                  @D51IDMZ 01512051
***************************************************************         01513051
*        FOLLOWING PORTION OF TCB IS USED AS WORK SPACE       *         01514051
*        BY SEVERAL SUPERVISOR FUNCTIONS                      *         01515051
***************************************************************         01516051
TCBWAREA DS    0F            TCB WORK AREA                     @D36IDFG 01517051
*------- FETCH WORK AREA -------------------------------------*@D36IDVB 01518051
DFWK1STL DS    F                                               @D64ADVB 01519051
DFWK2NDL DS    F                                               @D64ADVB 01520051
DFWKRTUR DS    F                                               @D64ADVB 01530051
DFCBSAV  DS    16F           SAVE AREA                         @D64ADVB 01540051
*                            SAVE AREA (R6,R8-R14) FOR SA ENV  @D61NDMZ 01550051
OFSXRE   EQU   0                                               @D64ADVB 01560051
OFSXRF   EQU   OFSXRE+4                                        @D64ADVB 01570051
OFSXR0   EQU   OFSXRF+4                                        @D64ADVB 01580051
OFSXR1   EQU   OFSXR0+4                                        @D64ADVB 01590051
OFS0     EQU   0                                               @D64ADVB 01600051
OFS1     EQU   OFS0+4                                          @D64ADVB 01610051
OFS2     EQU   OFS1+4                                          @D64ADVB 01620051
OFS3     EQU   OFS2+4                                          @D64ADVB 01630051
OFS4     EQU   OFS3+4                                          @D64ADVB 01640051
OFS5     EQU   OFS4+4                                          @D64ADVB 01650051
OFS6     EQU   OFS5+4                                          @D64ADVB 01660051
OFS7     EQU   OFS6+4                                          @D64ADVB 01670051
OFS8     EQU   OFS7+4                                          @D64ADVB 01680051
OFS9     EQU   OFS8+4                                          @D36IDVB 01690051
OFS10    EQU   OFS9+4                                          @D36IDVB 01700051
OFS11    EQU   OFS10+4                                         @D36IDVB 01710051
OFS12    EQU   OFS11+4                                         @D36IDVB 01720051
*-------------------------------------------------------------*@D64ADVB 01730051
DFWKOV   DS    0F            OVERWRITE INFORMATION                      01740051
DFWKLPNT DS    F             LOAD POINT                                 01750051
DFWKEPNT DS    F             ENTRY POINT                                01760051
DFWKUSEN DS    F             POINTER TO USER'S DIR ENTRY                01770051
DFWKAATE DS    A             ADDRESS OF CURRENT ATE            @D64ADVB 01780051
DFWKALLE DS    A             ADDRESS OF CURRENT LLE            @D64ADVB 01790051
*-------------------------------------------------------------*@D64ADVB 01800051
DFWKSWRQ DS    XL1           STATE OF REQUEST                  @D64ADVB 01810051
SYSAMASK EQU   X'80'         SYSTEM TASK        (DFCBSW1)      @D64ADVB 01820051
AUTHREQ  EQU   X'40'         AUTHORIZED REQUEST                @D64ADVB 01830051
SVC02REQ EQU   X'20'         SVC02 - REQUEST                   @D64ADVB 01840051
PLLEFND  EQU   X'10'         PLLE FOUND, CONTAMINATION         @D64ADVB 01850051
DCBSRCH  EQU   X'08'         DCB SPECIFIED - SEARCH TASK CHAIN @D64ADVB 01860051
DENOTXT  EQU   X'04'         DE-INFO ONLY  - NO PROGRAM FETCH  @D64ADVB 01870051
GIVRETRC EQU   X'02'         PROVIDE RETURN CODE               @D64ADVB 01880051
MORESRCH EQU   X'01'         CONTINUE SEARCH                   @D64ADVB 01890051
*-------------------------------------------------------------*@D64ADVB 01900051
DFWKRQFM DS    XL1           LOAD REQUEST FORMAT               @D64ADVB 01910051
*                            (DFWKPHPT - OFFSET 0 )            @D64ADVB 01920051
* VSE LOAD REQUESTS HAVE HIGHEST BIT OFF                       @D64ADVB 01930051
SLOADREQ EQU   X'03'         VSE / SLOAD                       @D64ADVB 01940051
CDLOADRQ EQU   X'02'         VSE / CDLOAD                      @D64ADVB 01950051
ICCFREQ  EQU   X'01'         VSE / ICCF LOAD                   @D64ADVB 01960051
LOADREQ  EQU   X'00'         VSE / NORMAL LOAD                 @D64ADVB 01970051
* MVS LOAD REQUESTS HAVE HIGHEST BIT ON                        @D64ADVB 01980051
MVSXXXX  EQU   X'80'         MVS REQUEST                       @D64ADVB 01990051
MVSLOAD  EQU   X'81'         MVS LOAD VIA ADDR                 @D64ADVB 02000051
MVSCDLD  EQU   X'82'         MVS CDLOAD                        @D64ADVB 02010051
MVSDELT  EQU   X'83'         MVS DELETE                        @D64ADVB 02020051
MVSCSALD EQU   X'84'         MVS CSA CDLOAD                    @D64ADVB 02030051
MVSBLDL  EQU   X'85'         MVS BLDL                          @D64ADVB 02040051
MVSDALL  EQU   X'86'         MVS DELETE-ALL                    @D64ADVB 02050051
*-------------------------------------------------------------*@D64ADVB 02060051
DFCBSW1  DS    XL1           DIRECTORY READ                             02070051
FIRSTDIR EQU   X'80'         FIRST DIRECTORY RECORD                     02080051
INVUSEN  EQU   X'40'         INVALID LOCAL LIST                         02090051
VENDRSEC EQU   X'20'         VENDOR REQ. SECURITY VIOLATION    @D61NDMZ 02100051
USERDUPD EQU   X'10'         UPDATE USER DIR ENTRY    (DFCBSW2)@D64ADVB 02110051
ACTDIR   EQU   X'08'         DIRECTORY ENTRY ACTIVE   (DFCBSW2)@D64ADVB 02120051
IDERR    EQU   X'04'         ID MISMATCH DIR READ     (DFCBSW2)@D64ADVB 02130051
DIRGTVIS EQU   X'02'         GETVIS COPY FOR DE       (DFCBSW5)@D64ADVB 02140051
*-------------------------------------------------------------*@D64ADVB 02150051
DFCBSW2  DS    XL1           STATUS PGM FETCH                  @D14CDVB 02160051
PFIXPND  EQU   X'80'         PFIX DONE FOR THIS PHASE (DFCBSW1)@D64ADVB 02170051
FIXTXT   EQU   X'40'         AREA FOR PHASE READ IN FIXED      @D64ADVB 02180051
LASTTBL  EQU   X'20'         LAST TEXT BLOCK IS READ IN        @D64ADVB 02190051
REALMASK EQU   X'10'         REQ. FOR REAL PARTITION (DFCBSW1) @D64ADVB 02200051
PARTLOAD EQU   X'08'         REQ, FOR PARTITION      (DFCBSW1) @D64ADVB 02210051
FLNKVIO  EQU   X'02'         LINK PROCESSING VIA VIO           @D64ADVB 02220051
*-------------------------------------------------------------*@D64ADVB 02230051
DFCBSW3  DS    XL1           STATUS PGRAM FETCH       (DFCBSW4)@D14CDVB 02240051
TXTIOPND EQU   X'80'               TXT I/0 STILL PENDING       @D64ADVB 02250051
RLDIODLD EQU   X'40'               RLD I/O DELAYED             @D64ADVB 02260051
LASTBLKM EQU   X'20'         LAST BLOCK MOVED                  @D64ADVB 02270051
NOCONTLD EQU   X'08'               REST OF PHASE IS NOT READ   @D64ADVB 02280051
*                                    WITH NEXT FREAD REQUEST   @D64ADVB 02290051
*-------------------------------------------------------------*@D64ADVB 02300051
DFCBSW4  DS    XL1           RESERVED                          @D64ADVB 02310051
*-------------------------------------------------------------*@D64ADVB 02320051
DFWKSVC  DS    X             SAVE SVC CODE                     @D61NDMZ 02330051
         DS    XL3           RESERVED                          @D64ADVB 02340051
*-------------------------------------------------------------*@D64ADVB 02350051
DFWKREAC DS    H             REASON CODE                       @D64ADVB 02360051
*-------------------------------------------------------------*@D64ADVB 02370051
DFWKRETC DS    F             RETURN CODE                       @D64ADVB 02380051
DFWKRCOD EQU   DFWKRETC+3    RETURN CODE LAST BYTE             @D64ADVB 02390051
DFWKX1LN EQU   *-DFWKUSEN    LENGTH OF AREA TO BE CLEARED      @D64ADVB 02400051
*-------------------------------------------------------------*@D64ADVB 02410051
*       LOAD PARAMETER LIST - MVS PLATFORM                     @D64ADVB 02420051
DFWKPHNM DS    A             ADDR OF DE / EP / EPLOC           @D64ADVB 02430051
DFWKADCB DS    A             ADDR OF DCB - IF ANY (DEFAULT = 0)@D64ADVB 02440051
DFWKPLFM DS    XL1           FORMAT OF PARAMETER LIST          @D64ADVB 02450051
*                            - CURRENTLY 0                     @D64ADVB 02460051
DFWKOPT0 DS    XL1           OPTION BYTE 0                     @D64ADVB 02470051
DFWKOPT1 DS    XL1           OPTION BYTE 1                     @D64ADVB 02480051
DFWKDESP EQU   X'80'         DE SPECIFIED                      @D64ADVB 02490051
DFWKERET EQU   X'20'         ERRET SPECIFIED                   @D64ADVB 02500051
DFWKGLBY EQU   X'10'         GLOBAL SPECIFIED                  @D64ADVB 02510051
DFWKGLBF EQU   X'08'         GLOBAL-F SPECIFIED                @D64ADVB 02520051
DFWKADDR EQU   X'04'         ADDR SPECIFIED                    @D64ADVB 02530051
DFWKLDRX EQU   X'01'         LOADPT SPECIFIED                  @D64ADVB 02540051
DFWKOPT2 DS    XL1           OPTION BYTE 2                     @D64ADVB 02550051
DFWKNAPF EQU   X'80'         ADRNAPF SPECIFIED                 @D64ADVB 02560051
DFWKALDP DS    A             ADDR WHERE LOAD ADDR TO BE SAVED  @D64ADVB 02570051
DFWKPLEN EQU   *-DFWKPHNM    LENGTH OF PARAMETER LIST          @D64ADVB 02580051
*-------------------------------------------------------------*@D64ADVB 02590051
*       LOAD PARAMETER LIST - VSE PLATFORM                     @D64ADVB 02600051
         ORG   DFWKPHNM                                        @D64ADVB 02610051
DFWKPHPT DS    A             POINTER TO REQUEST PHASENAME               02620051
DFWKLIST DS    A             POINTER TO LOCAL LIST             @D64ADVB 02630051
         DS    X             FORMAT X'FF'                      @D64ADVB 02640051
DFWKFLAG DS    X             FLAG BYTE -- OPTIONS                       02650051
*----- DFWKFLAG EQUATES---------------------------------------*@D64ADVB 02660051
         SPACE 1                                               @D64ADVB 02670051
FLRETCOD EQU   X'80'              RETURN CODE REQUESTED        @D64ADVB 02680051
SVAUPD   EQU   X'40'              LOAD/REPLACE SVA PHASE       @D64ADVB 02690051
SDLUPD   EQU   X'20'              SDL=YES IN SLOAD MACRO       @D64ADVB 02700051
SDLFORM  EQU   X'08'              DE=SDL IN SLOAD MACRO        @D64ADVB 02710051
SYSLIST  EQU   X'04'              SCH SCIL FIRST OPTION        @D64ADVB 02720051
DENTRY   EQU   X'02'              DE=YES | VSE                 @D64ADVB 02730051
NTXTNTRY EQU   X'01'              NOTEXT LOAD OPTION           @D64ADVB 02740051
SIZNAME  EQU   NTXTNTRY           HPROG-MACRO (SVC_51) WITH ...        *02750051
                                        ...SIZE = PHASENAME    @D64ADVB 02760051
         ORG   ,                                               @D64ADVB 02770051
*-------------------------------------------------------------*@D14CDVB 02780051
* DFWKNAME-DFWKASLB ARE IDENTICAL TO  S D L  ENTRY            *@D14CDVB 02790051
* FOR BIT EQUATES COMPARE LIBRARIAN MACRO INLCSDLE            *@D149DFG 02800051
*-------------------------------------------------------------*@D14CDVB 02810051
DFWKNAME DS    CL8           PHASENAME                                  02820051
DFWKEGEN DS    CL1           RESERVED                          @D14CDVB 02830051
         DS    XL1           ATTRIBUTES                        @D14CDVB 02840051
         DS    H             OFFSET OF PRBA_ADDR               @D14CDVB 02850051
DFWKERBA DS    F             RELATIVE BLOCK ADDRESS            @D14CDVB 02860051
DFWKECON DS    H             NUMBER OF CONTIGUOUS BLOCKS       @D14CDVB 02870051
         DS    H             RESERVED                          @D14CDVB 02880051
DFWKESWT DS    X             INDICATORS                        @D14CDVB 02890051
DFWKEMVS DS    X             STATUS  MOVE_-MODE                @D14CDVB 02900051
         DS    XL2           RESERVED                          @D14CDVB 02910051
DFWKEPLN DS    F             LENGTH OF PHASE IN BYTES          @D14CDVB 02920051
DFWKELPL DS    A             LOAD POINT AT LINKAGE EDIT        @D14CDVB 02930051
DFWKEEPL DS    A             ENTRY POINT AT LINKAGE EDIT       @D14CDVB 02940051
DFWKEBGP DS    A             PARTITION START AT LINK EDIT      @D14CDVB 02950051
DFWKERLD DS    H             NUMBER OF RLD ITEMS               @D14CDVB 02960051
DFWKERDA DS    CL6           PRBA OF RLD ITEM                  @D14CDVB 02970051
DFWKBYTE DS    X             SWITCH                            @D52VDMZ 02980051
DFWK3BAC EQU   X'80'         3BYTE  ADDR IN RMODE ANY PHASE    @D52VDMZ 02990051
         DS    X             RESERVED                          @D52VDMZ 03000051
DFWKESLA DS    CL6           PRBA OF SLMAP                     @D14CDVB 03010051
DFWKEVLE DS    A             ENTRY POINT IN SVA(VL)            @D14CDVB 03020051
DFWKLBID DS    A             LIBRARIAN IDENTIFIER OF PHASE     @D14CDFG 03030051
DFWKALIB DS    A             ADDRESS OF LIB_DEF_TAB            @D14CDVB 03040051
DFWKASLB DS    A             ADDRESS OF SUBLIB_DEF_TAB         @D14CDVB 03050051
DFWKEND  EQU   *             END OF DE LAY-OUT                 @D14CDVB 03060051
DFWKANAM DS    F             ADDRESS PHASE NAME                @D14CDVB 03070051
DFWKCOMG DS    F             POINTER TO ACTUAL COMREG          @D14CDVB 03080051
*-------------------------------------------------------------*@D14CDVB 03090051
* DFWKALIB-DFWKCOMG USED AS SECURITY INTERFACE                *@D14CDVB 03100051
*-------------------------------------------------------------*@D14CDVB 03110051
DFWKANCS DS    F                                               @D64ADVB 03120051
ANCSAV1  EQU   DFWKANCS      POINTER TO ANCHOR TABLE           @D64ADVB 03130051
DFCBMACN DS    A             ADDRESS OF CURRENT MACRO NAME     @D64ADVB 03140051
ANCSAV   EQU   DFCBMACN      POINTER TO DIRECTORY ENTRY        @D64ADVB 03150051
FTCHWALN EQU   *-DFWK1STL    LENGTH OF FETCH WORK AREA         @D36IDFG 03160051
LFCHWORK EQU   *-DFWK1STL    LENGTH OF FETCH WORK AREA         @D36IDFG 03170051
*------- END OF FETCH WORK AREA ------------------------------*         03180051
         ORG   TCBWAREA                                        @D36IDVB 03190051
*------- SVC WORK AREA ---------------------------------------*         03200051
* USER:  SVC  0 (DURING CCW-TRANSL)                            @D369DFG 03210051
*        SVC 44 (WHEN CALLING TFIX)                            @D369DFG 03220051
*        SVC 61 (SVCSV3 ONLY, WHEN CALLING PFIX/GETREAL)       @D369DFG 03230051
*        SVC 65 (BEFORE CALLING FETCH)                         @D369DFG 03240051
*        SVC 98 (TO REMOVE TRANSIENT INFORM. FROM PUB ENTRY)   @D369DFG 03250051
SVCSV3   DS    16F           SAVE AREA FOR REGS 9-8            @D36IDFG 03260051
SVCWORK  DS    16F           WORK AREA / REGISTER SAVE AREA    @D61PDOW 03270051
SVCWORKA DS    16F           WORK AREA / SAVE AREA             @D64ADOW 03280051
SVCWORKB DS    6F            SMALL SAVE AREA (24 BYTES)        @D64ADOW 03290051
LSVCWORK EQU   *-TCBWAREA    LENGTH OF SVC WORK AREA           @D36IDFG 03300051
*------- END OF SVC WORK AREA --------------------------------*         03310051
         ORG   TCBWAREA                                        @D36IDFG 03320051
*------- CCW TRANSLATION WORK AREA ---------------------------*         03330051
TCBFLAG  DS    X             FLAG BYTE                         @D36IDFR 03340051
TCBDC    EQU   X'80' .         0  DATA CHAINING SPECIFIED            EM 03350051
TCBRDS   EQU   X'40' .         1  READ/SENSE COMMAND SPECIFIED       EM 03360051
TCBRDB   EQU   X'20' .         2  READ BACKWARD COMMAND SPECIFIED    EM 03370051
TCBSM1   EQU   X'10' .         3  STATUS MODIFIER COMMAND AND DC     EM 03380051
TCBSM2   EQU   X'08' .         4  STATUS MODIFIER COMMAND            EM 03390051
FXGETBL  EQU   X'04' .         5  REQ FOR FIXINF BLK           @D35CDJR 03400051
CHKSTM   EQU   X'02'           6  CHECK STATMOD 1287/3890      @D36ZDWK 03410051
GETDCBL  EQU   X'01'           7  DOUBLE COPY BLOCK REQUESTED  @D37ADWK 03420051
ADBTAMCB DS    X             ADDITIONAL BLOCKS NEEDED BY BTAM        EM 03430051
         DS    X             RESERVED                          @D14ADWK 03440051
CCWTFLG2 DS    X             CCW-TRANSLATION SECOND FLAG BYTE  @D14ADWK 03450051
CCWTFIDA EQU   X'80'           0 FIX IDAL REQUEST              @D14ADWK 03460051
CCWTPAF  EQU   X'40'           1 PAGE ALREADY FIXED            @D14ADWK 03470051
TCBMIPLC EQU   X'20'           2 MODIFY IPL READ CMD FOR 3590  @D61SDMZ 03480051
*                              3-7  RESERVED                   @D14ADWK 03490051
DEVSTPTR DS    A             POINTER TO STAT. MOD. LIST        @DS28005 03500051
DEVCDPTR DS    A             POINTER TO CONTR. COMM. LIST      @DS28005 03510051
LINEPTR  DS    A                                                        03520051
BENDPTR  DS    A             BLOCKEND POINTER                        EM 03530051
TCBACCB  DS    F             ADDRESS OF COPIED CCB FOR CAN     @D36IDFR 03540051
IDALCNT  DS    F             NUMBER OF FREE IDALS                    EM 03550051
DYNAREA1 DS    1F            DYNAMIC SAVE AREA                 @D52VDOW 03560051
DYNAREA2 DS    1F                                              @D52VDOW 03570051
DYNAREA3 DS    1F                                              @DS28005 03580051
DYNAREA4 DS    1F                                              @D52VDOW 03590051
DYNAREA5 DS    1F                                              @D52VDOW 03600051
DYNAREA6 DS    1F                                              @D14BDWK 03610051
         DS    3F            RESERVED                          @D61PDOW 03620051
REPLSAVE DS    1F                                              @D52VDOW 03630051
FIXADDR  DS    1F            ADDR OF LAST TFIX REQ.            @DS28005 03640051
CCWTFREP DS    A             ADDRESS OF FREE FIXLIST ENTRY     @D14ADWK 03650051
         AGO   .RMFST10   BGFASTT=0                            @D64ADOW 03660051
TCBDCB   DS    A             PTR TO DIDAL BLOCK CHAIN   FASTTR @D36IDFR 03670051
DDALBLAD DS    A             ADDR. OF CURR.DIDAL BLOCK  FASTTR @D32XDRP 03680051
TCBFLAG1 DS    X             FLAG BYTE                  FASTTR @D36IDFR 03690051
RFLAG    EQU   X'80'           0  REPLICA CREATION REQ. FASTTR @D35CDJR 03700051
*                              1  RESERVED              FASTTR @D36ZDFG 03710051
REPLCR   EQU   X'20'           2  REQ FOR REPLICA BLK   FASTTR @D35CDJR 03720051
DIDALCR  EQU   X'10'           3  REQ FOR DIDAL BLK     FASTTR @D35CDJR 03730051
*                             4-7 RESERVED              FASTTR @D36ZDFG 03740051
         DS    X             RESERVED                   FASTTR @D35CDJR 03750051
DIDALCNT DS    H             # OF FREE DIDAL DWORDS     FASTTR @D32XDRP 03760051
DIDAWAD  DS    A             ADDR. OF CURR.DIDAL DWORDS FASTTR @D32XDRP 03770051
VCCWAD1  DS    A             STORED VIRT CCW ADDR       FASTTR @D32XDRP 03780051
.RMFST10 ANOP                                                  @D64ADOW 03790051
SAVEREG2 DS    7F .          SAVEAREA FOR REG 2 TO REG 8             EM 03800051
SAVEREG9 DS    1F .                                                  EM 03810051
SAVEREGA DS    1F .                                                  EM 03820051
SAVEREGB DS    1F .                                                  EM 03830051
SAVEREGC DS    1F .                                                  EM 03840051
SAVEREGD DS    1F .                                                  EM 03850051
SAVEREGE DS    1F .                                                  EM 03860051
SAVEREGF DS    1F .                                                  EM 03870051
         DS    5F            RESERVED                          @D64ADOW 03880051
         DS    CL64          UNUSED BYTES                      @D64ADOW 03890051
LCCWTAR EQU   *-TCBWAREA     LENGTH OF CCW TRANSL.WORK AREA             03900051
*------- END OF CCW TRANSLATION WORK AREA --------------------*         03910051
         ORG ,               POINT BEHIND WORK AREA            @D14ZDFG 03920051
TCBCINF  DS    0F            FETCH CANCEL INFORMATION          @D14CDFG 03930051
TCBCALIB DS    F             POINTER TO LIBRARY NAME           @D14CDFG 03940051
TCBCASLB DS    F             POINTER TO SUBLIBRARY NAME        @D14CDFG 03950051
TCBCANAM DS    F             POINTER TO PHASE NAME             @D14CDFG 03960051
         DS    F             USED FOR MOVE MODE                @D14CDFG 03970051
TCBWLEN  EQU   *-TCBWAREA    TOTAL LENGTH OF TCB WORK AREA     @D36IDFG 03980051
*------- END OF TCB WORK AREA --------------------------------*         03990051
TCBABEX  DS    F             PTR AB/ESTAEX EXIT CNTRL BLOCKS   @D64ADOW 04000051
***      BIT 0 OF TCBABEX IS SET ON (EXITACT EQU X'80') WHENEVER A      04010051
***      ESTAEX-TYPE RECOVERY ROUTINE IS IN PROGRESS                    04020051
TCBRFLAG DS    X             FLAG BYTE                         @DY45849 04030051
TCBRCVAL EQU   X'80'         VALID REASON CODE SPECIFIED       @DY45849 04040051
***                          BIT 1 - 7 FREE FOR USE            @DY45849 04050051
TCBRCODE DS    XL3           REASON CODE                       @DY45849 04060051
TCBFREX  DS    F             PTR TO TASKS FRR STACK            @D64ADOW 04070051
TCBPCEX  DS    F             PTR TO ESPIE/PC CHAIN             @D64ADOW 04080051
TCBEXIFL DS    X             INTERFACE BYTE TERMINATOR/SGEXIT  @D64ADOW 04090051
TCBEXIAC EQU   X'80'         FINAL CANCEL REQ'D BECAUSE        @D64ADOW 04100051
***                          AB EXIT ALREADY ACTIVE                     04110051
TCBEXINI EQU   X'40'         ... AND NEW INTERFACE USED        @D64ADOW 04120051
TCBEXABO EQU   X'20'         SKIP ALL ESTAEX-TYPE EXITS BUT    @D64ADOW 04130051
***                          AB-TYPE EXIT                               04140051
TCBEXIEX EQU   X'10'         CURRENT EXIT IS ESTAEX-TYPE       @D64ADOW 04150051
TCBEXIEA EQU   X'08'         CURRENT EXIT IS AB OPTION=EARLY   @D64ADOW 04160051
TCBEXIND EQU   X'04'         CURRENT EXIT IS AB OPTION=NODUMP  @D64ADOW 04170051
TCBEXIMS EQU   X'02'         CURRENT EXIT IS AB OPTION=MSGONLY @D64ADOW 04180051
TCBEXIDU EQU   X'01'         CURRENT EXIT IS AB OPTION=DUMP    @D64ADOW 04190051
TCBSTXIT EQU   TCBEXIEA+TCBEXIND+TCBEXIMS+TCBEXIDU ANY STXIT-AB@D64ADOW 04200051
TCBEXITF DS    X             FLAG BYTE FOR EXIT PROCESSING     @D64ADOW 04210051
TCBABACT EQU   X'80'         AB EXIT ACTIVE                    @D64ADOW 04220051
TCBPCACT EQU   X'40'         PC EXIT ACTIVE                    @D64ADOW 04230051
TCBITACT EQU   X'20'         IT EXIT ACTIVE                    @D64ADOW 04240051
TCBOCACT EQU   X'08'         OC EXIT ACTIVE                    @D64ADOW 04250051
TCBPOACT EQU   X'02'         POST EXIT ACTIVE                  @D64ADOW 04260051
TCBEXACT EQU   X'01'         ETXR EXIT ACTIVE                  @D64ADOW 04270051
TCBEXITG DS    X             FLAG BYTE 2 FOR EXIT PROCESSING   @D64ADOW 04280051
TCBDTACH EQU   X'80'         ON IF DETACH BY OWNING TASK       @D64ADOW 04290051
TCBDSTAE EQU   X'40'         ON  : DETACH STAE=YES             @D64ADOW 04300051
***                          OFF : DETACH STAE=NO              @D64ADOW 04310051
TCBABDMP EQU   X'20'         DUMP SPECIFIED WITH ABEND MACRO   @D64ADOW 04320051
TCBSFORC EQU   X'04'         SYSTEM FORCED ABEND               @D64ADOW 04330051
TCBABSPC EQU   X'02'         AB-EXIT FOR ATTACH AVAILABLE      @D64ADOW 04340051
TCBABS31 EQU   X'01'         ... EXIT DEFINED WITH AMODE 31    @D64ADOW 04350051
TCBEXITH DS    X             FLAG BYTE                         @D65CDOW 04360051
TCBEUTIN EQU   X'80'         EUT INDICATOR                     @D64ADOW 04370051
TCBESTSV EQU   X'04'         ESTAE-ENVIRONMENT SUSPENDED FOR LE@D65CDOW 04380051
TCBSAVAB EQU   X'02'         SAVED AB-EXIT INFORMATION FOR     @D65CDOW 04390051
TCBSAV31 EQU   X'01'         ... ATTACH IF TCBESTSV ON         @D65CDOW 04400051
TCBSAVEX DS    F             SAVED TCBABEX IF TCBESTSV ON      @D65CDOW 04410051
         DS    F             RESERVED                          @D64ADOW 04420051
TCBEOTAD DS    F             EOT CONTINUATION ADDRESS          @D14BDFR 04430051
AOTADR   DS    0F            AOT LAY-OUT                  VTAM @D36IDFR 04440051
ARAOTADR EQU   AOTADR                                     VTAM @D36IDFG 04450051
VTAMBGIN DS    0F            AR: BEGIN ADDR.OF VTAM PART. VTAM @D36IDFG 04460051
APSFLAG  DS    X             FLAG BYTE                    VTAM @D35EDPS 04470051
*                             0-1 RESERVED                VTAM @D36IDFG 04480051
VTLTDLY  EQU   X'20'           2  USER EXIT DELAY FOR LTA VTAM @D36IDFR 04490051
*                             3-7 RESERVED                VTAM @D36IDFG 04500051
         DS    AL3           POINTER TO VTAM APT          VTAM @D35EDPS 04510051
VTAMEND  DS    0F            AR: END ADDR.OF VTAM PART.   VTAM @D36IDFG 04520051
APSCNT   DS    X             COUNT OF VTAM ACB'S OPEN     VTAM @D35EDPS 04530051
         DS    XL3           FREE FOR VTAM                VTAM @DA30518 04540051
VTPCINF  DS    XL4           PROGRAM CHECK INFORMATION    VTAM @DA30518 04550051
AOTMADEB DS    0F            POINTER TO MADEB CHAIN            @DA36477 04560051
VTAMFLG  DS    X             FLAG BYTE                    VTAM @D35EDPS 04570051
VTABEND  EQU   X'80'           0  VTAM PROCESS ABEND      VTAM @DA24952 04580051
VTSPSAV  EQU   X'40'           1  PSW + REGS IN SVPCSAVE  VTAM @DA30518 04590051
VTCDLY   EQU   X'20'           2  VTAM DELAYED CANCEL     VTAM @D35EDPS 04600051
VTAPDEL  EQU   X'10'           3  AP DELAYED FOR TERMINAT.VTAM @D35EDPS 04610051
VTURX    EQU   X'08'           4  VTAM USER EXIT IN CTL   VTAM @D35EDPS 04620051
VTSVC    EQU   X'04'           5  VTAM SVC ACTIVE         VTAM @D35EDPS 04630051
VTAPP    EQU   X'02'           6  VTAM APPENDAGE ACTIVE   VTAM @D35EDPS 04640051
VTAMK0   EQU   X'01'           7  KEY0/SUPSTATE REQUIRED  VTAM @D35EDPS 04650051
         DS    AL3           SIGNIFICANT PART OF PTR VALUEVTAM @DA36477 04660051
TCBECB   DS    F             ADDRESS OF ATTACH ECB             @D14BDFG 04670051
TCBSPOFF DS    H             NAME OF DEDICATED GETVIS SUBPOOL  @D14CDFR 04680051
         DS    H             RESERVED                          @D14BDFR 04690051
TCBIVMHK DS    X             IAF ENTERED BY SUPERVISOR HOOK    @D31ZDMZ 04700051
TCBHKPCK EQU   X'80'         ENTERED FROM SGPCK                @D31ZDMZ 04710051
TCBHKSVC EQU   X'40'         ENTERED FROM SGNUC                @D31ZDMZ 04720051
TCBHKCHK EQU   X'20'         ENTERED FROM CHKPT                @D31ZDMZ 04730051
TCBHKIOA EQU   X'10'         IMR FILE I/O ACITVE               @D31ZDMZ 04740051
TCBHKDCA EQU   X'08'         DATA COLLECTION ACTIVE            @D31ZDMZ 04750051
TCBDYNFL DS    X             DYNAMIC CLASS SERVICE FLAG        @D51IDMZ 04760051
TCBDACT  EQU   X'80'         DYNAMIC CLASS SERVICE ACTIVE      @D51IDMZ 04770051
TCBSPTFL DS    X             SERVICE PROCESSOR TASK FLAG       @D31EMMZ 04780051
TCBSPTCA EQU   X'80'         SPDT CONNECTION ACTIVE            @D31EMMZ 04790051
TCBSPTPO EQU   X'40'         SPDT POST INDICATOR               @D51IDMZ 04800051
TCBNOSAX DS    X             NO OF OSAX CARDS OWNED BY TASK    @D67BDMZ 04810051
TCBSSCB  DS    F             SAVED CURRENT SCB PTR             @D52VDMZ 04820051
         DS    F             RESERVED FOR FUTURE USE           @D51IDMZ 04830051
TCBSTADR DS    F             ADDR.OF SYST.TASK DEACTIV.ROUTINE @D14BDFG 04840051
TCBATCBE DS    F             ADDR.OF TCB EXTENSION             @D61NDMZ 04850051
TCBMVSIS DS    F             SVC INTERR.INFO FOR MVS SERVICES  @D61NDMZ 04860051
TCBMVSSA EQU   X'80'         MVS SVC ACTIVE                    @D61NDMZ 04870051
TCBMVSFM EQU   X'40'         EXEC..,MVS AND SVC 132 GIVEN      @D61NDMZ 04880051
TCBALLST DS    F             ADDR OF TCB LOAD LIST ELEMS       @D64ADVB 04890051
         DS    F             RESERVED FOR FUTURE USE           @D61NDMZ 04900051
TCBLECAV DS    F             LANG. ENV. CEL ANCHOR VECTOR      @D61NDMZ 04910051
         DS    X             RESERVED                          @D64ADOW 04920051
TCBFLAG6 DS    X             VENDOR EXIT FLAG BYTE             @D61NDMZ 04930051
TCBLTALE EQU   X'80'         LTA LEFT BY BAM PRODEXIT PROC.    @D61NDMZ 04940051
TCBPSTAC EQU   X'40'         PSTATE VENDOR EXIT ACTIVE         @D61NDMZ 04950051
TCBSST0A EQU   X'20'         SSTATE RID 0 VENDOR EXIT ACTIVE   @D61NDMZ 04960051
TCBSST4A EQU   X'10'         SSTATE RID 4 VENDOR EXIT ACTIVE   @D61NDMZ 04970051
TCBSST0F EQU   X'08'         SSTATE FAST SVC EXIT ACTIVE       @D61NDMZ 04980051
TCBSVCEX EQU   X'04'         SVC EXIT ACTIVE                   @D61NDMZ 04990051
TCBCRID  DS    H             RID WHEN ENTERING SSTATE PROCESS. @D61NDMZ 05000051
TCBSCRID DS    H             SAVED TCBCRID WHEN SSTATE PROCESS.@D61NDMZ 05010051
*                            ENTERED THE SECOND TIME           @D61NDMZ 05020051
TCBSCRI2 DS    H             SAVED TCBSCRID WHEN FAST SVC EXIT @D61NDMZ 05030051
TCBSPL   DS    A             ANCHOR FOR JOB OR TASK RELATED SUBPOOL    *05040051
                             LIST                              @D61NDMZ 05050051
TCBCSNAM DS    CL8           PHASENAME FOR DUMP                @DY45682 05060051
         DS    CL28          RESERVED FOR FUTURE USE           @DY45682 05070051
*------- END OF USER MAIN TASK/ SYSTEM TASK TCB --------------*         05080051
TCBLNG   EQU   *-&LABEL      LENGTH OF SYS. AND MAIN TASK TCBS @D61NDMZ 05090051
TCBSTSAA DS    F             SUBTASKS SAVE AREA ADDRESS        @D52VDMZ 05100051
STCBLNG  EQU   *-&LABEL      LENGTH OF SUBTASK TCB'S           @D14BDFR 05110051
*------- END OF SUBTASK  TCB'S -------------------------------*@D14BDFR 05120051
         SPACE 5                                                        05130051
         MAPTCBX DSECT=YES                                     @D61NDMZ 05140051
         MEXIT                                                          05150051
.INLINE  ANOP                                                  @D51IDMZ 05160051
DPTCB    DC    0D'0'              TASK CONTROL BLOCK           @D51IDMZ 05170051
         DC    AL2(DPTCBE-*)      LENGTH OF TCB                @D51IDMZ 05180051
         DC    X'00'              SUBSYSTEM FLAG               @D51IDMZ 05190051
         DC    X'00'              SERVICE ROUTINE IDENTIFIER   @D51IDMZ 05200051
         DC    H'0'               ID.OF ATTACHING TASK         @D51IDMZ 05210051
         DC    X'00'              TCBFLAGS                     @D51IDMZ 05220051
         DC    X'00'              TCBFLAG2                     @D51IDMZ 05230051
         DC    A(0)               TIB POINTER                  @D51IDMZ 05240051
         DC    F'0'               POINTER TO TASKS SAVEAREA    @D51IDMZ 05250051
         DC    F'0'               INTERRUPT INFORMATION        @D51IDMZ 05260051
         DC    2F'0'              NOT USED FOR USER TASKS      @D51IDMZ 05270051
         DC    A(DPSAV2)          ADDRESS OF SPECIAL SAVEAREA  @D51IDMZ 05280051
         DC    A(0)               ACCESS REGISTER SAVE AREA    @D51KDTP 05290051
         DC    A(0)               ADDR OF SECOND AR SAVE AREA  @D52VDMZ 05300051
         DC    F'0'               WORK AREA (USED BY GETVIS)   @D51IDMZ 05310051
         DC    X'00'              EXECUTION FLAG               @D52VDMZ 05320051
         DC    X'00'              INTERNAL EXECUTION FLAG      @D52VDMZ 05330051
         DC    X'00'              GETVIS REQUEST FLAG BYTE     @D52VDMZ 05340051
         DC    X'00'              FLAG BYTE 5                  @D52VDMZ 05350051
         DC    F'0'               USER CONTROL BLOCK           @D52VDMZ 05360051
         DC    A(0)               PTR TO TASK DS CNTL. BLOCK   @D52VDMZ 05370051
         DC    A(0)               ADDR OF PROGRAM CHECK TABLE  @D52VDMZ 05380051
         DC    A(0)               ADDR OF DUMP MSG INFORMATION @D52VDMZ 05390051
         DC    F'0'               RESERVED                     @D51IDMZ 05400051
         DC    F'0'               RESERVED                     @D52VDOW 05410051
         DC    0D'0'              DOUBLE WORD BOUNDARY         @D51IDMZ 05420051
DPSAV2   EQU   *-8                TASKS SPECIAL SAVE AREA      @D51IDMZ 05430051
         DC    2F'0'              SAVE AREA FOR PSW            @D51IDMZ 05440051
         DC    16F'0'             SAVE AREA FOR REGISTERS      @D51IDMZ 05450051
         DC    XL(TCBWLEN)'00'    TCB WORK AREA                @D51IDMZ 05460051
         DC    F'0'          PTR AB/ESTAEX/FESTAE/ATTACHX CHAIN@D64ADMZ 05470051
         DC    F'0'          FLAG-BYTE AND REASON CODE         @D64ADOW 05480051
         DC    F'0'          PTR TO FRR CHAIN                  @D64ADMZ 05490051
         DC    F'0'          PTR TO ESPIE/PC CHAIN             @D64ADMZ 05500051
         DC    X'00'         FLAG BYTE                         @D64ADOW 05510051
         DC    X'00'         FLAG BYTE                         @D64ADOW 05520051
         DC    X'00'         FLAG BYTE                         @D64ADOW 05530051
         DC    X'00'         SAVE AREA FOR PSAMFLGS            @D64ADOW 05540051
         DC    F'0'          RESERVED                          @D64ADOW 05550051
         DC    F'0'          RESERVED                          @D64ADOW 05560051
         DC    A(0)               EOT CONTINUATION ADDRESS     @D51IDMZ 05570051
         DC    4F'0'              VTAM CONTROL BLOCK           @D51IDMZ 05580051
         DC    F'0'               ADDRESS OF ATTACH ECB        @D51IDMZ 05590051
         DC    H'0'               DEDICATED GETVIS SUBPOOL     @D51IDMZ 05600051
         DC    H'0'               RESERVED                     @D51IDMZ 05610051
         DC    X'00'              IAF ENTERED BY SUPERV. HOOK  @D51IDMZ 05620051
         DC    X'00'              DYNAMIC CLASS SERVICE FLAG   @D51IDMZ 05630051
         DC    X'00'              SERVICE PROCESSOR TASK FLAG  @D31EMMZ 05640051
         DC    X'00'              NO OF OSAX CARDS OWN. BY TASK@D67FDMZ 05650051
         DC    F'0'               SAVED CURRENT SCB POINTER    @D52VDMZ 05660051
         DC    F'0'               RESERVED FOR FUTURE USE      @D51IDMZ 05670051
         DC    F'0'               DEACT. ROUTINE FOR SYST.TASK @D61NDMZ 05680051
         DC    A(DPTCBX)          ADDR OF TCB EXTENSION        @D61NDMZ 05690051
         DC    F'0'               SVC INTERR.INFO FOR MVS SERV.@D61NDMZ 05700051
         DC    F'0'               TCB LOAD LIST ELEMENTS       @D64ADVB 05710051
         DC    F'0'               LTA PRODEXIT AREA POINTER    @D61NDMZ 05720051
         DC    F'0'               LANG. ENV. CEL ANCHOR VECTOR @D61NDMZ 05730051
         DC    X'00'              RESERVED                     @D64ADOW 05740051
         DC    X'00'              VENDOR EXIT FLAG BYTE        @D61NDMZ 05750051
         DC    X'0000'       RID WHEN ENTERING SSTATE PROCESS. @D61NDMZ 05760051
         DC    X'0000'       SAVED TCBCRID                     @D61NDMZ 05770051
         DC    H'0'          SAVED TCBSCRID WHEN FAST PATH SVC @D61NDMZ 05780051
         DC    F'0'               ANCHOR FOR JOB OR TASK RELATED       *05790051
                                  SUBPOOL LIST                 @D61NDMZ 05800051
         DC    XL8'00'            PHASENAME FOR DUMP           @DY45682 05810051
         DC    XL28'00'           RESERVED FOR FUTURE USE      @DY45682 05820051
DPTCBE   EQU   *                  END OF CTL.BLOCK             @D51IDMZ 05830051
         MAPTCBX DSECT=NO,LG=DP                                @D61NDMZ 05840051
         MEND                                                  @D51IDMZ 05850051
* END OF PLS COMMENT */ %MMAPTCB : ;                                    05860051
* DECLARE                                                               05870051
*   TCBARSLN FIXED(15) CONSTANT(64);                                    05880051
* DECLARE                                                               05890051
* 1  TCBADR    BASED BDY(DWORD),/* LAYOUT OF TASK CONTROL BL.@D52VDMZ*/ 05900051
*  2 TCBLNGTH  FIXED(15), /* LENGTH OF TCB                   @D14NDFG*/ 05910051
*  2 TCBFLAG3  BIT(8),    /* FLAG BYTE                       @D14NDJB*/ 05920051
*   3 TCBVEND  BIT(1),    /* VENDOR PROGRAM ACTIVE           @D61NDMZ*/ 05930051
*   3 VSPT     BIT(1),    /* PERFORMANCE TOOL ACTIVE         @D51IDMZ*/ 05940051
*   3 *        BIT(6),    /* NOT USED IN PLS                 @D51IDMZ*/ 05950051
*  2 TCBRID    FIXED(8),  /* RID SAVED ON INTERR. IN SVC     @D14NDJB*/ 05960051
*  2 FATHERID  FIXED(16), /* TID OF ATTACHING TASK,0 IF NONE @D14NDFG*/ 05970051
*  2 TCBFLAGS  BIT(8),    /* FLAG BYTE                       @D14NDJB*/ 05980051
*  2 TCBFLAG2  BIT(8),    /* FLAG BYTE                       @D14NDJB*/ 05990051
*   3 *        BIT(7),    /* NOT USED IN PLS                 @D61NDMZ*/ 06000051
*   3 NOPAGING BIT(1),    /* NO PAGE FAULTS ALLOWED          @D61NDMZ*/ 06010051
*  2 TCBTIB    PTR(32),   /* TIB POINTER                     @D14NDFG*/ 06020051
*  2 TCBSAVE   PTR(32),   /* TASK SAVEAREA ADDRESS           @D14NDFG*/ 06030051
*  2 INTINFO   FIXED(32), /* INTERRUPT INFORMATION           @D14NDFG*/ 06040051
*   3 *        FIXED(24) BDY (WORD), /*                      @D14NDJB*/ 06050051
*   3 SVCIC    FIXED(8),  /* SVC-CODE                        @D14NDJB*/ 06060051
*  2 AERREXIT  PTR(32),   /* ADDR. OF SYST.TASK CANCEL EXIT  @D14NDFG*/ 06070051
*  2 TCBERBLK  PTR(32),   /* ADDR. OF SYST.TASK ERROR BLOCK  @D14NDFG*/ 06080051
*  2 TCBSAV2   PTR(32),   /* ADDRESS OF SECOND SAVE AREA     @D14NDFG*/ 06090051
*  2 TCBARSAV  PTR(32),   /* ACCESS REG SAVE AREA            @D51KDTP*/ 06100051
*  2 TCBAR2SV  PTR(32),   /* ADDR OF SECOND AR SAVE AREA     @D52VDMZ*/ 06110051
*  2 TCBGVR12  PTR(32),   /* WORK AREA (USED BY GETVIS)      @D51IDMZ*/ 06120051
*  2 TCBEXFLG  BIT(8),    /* EXECUTION FLAG                  @D52VDMZ*/ 06130051
*   3 TCBEXAM  BIT(1),    /* ON:AMODE 31, OFF: AMODE=24      @D52VDMZ*/ 06140051
*   3 TCBEXARM BIT(1),    /* ON: AR MODE ALLOW.,OFF: NOT ALL.@D52VDMZ*/ 06150051
*   3 TCBEXRM  BIT(1),    /* ON: RMODE(LOC)=31, OFF: RMODE=24@D52VDMZ*/ 06160051
*   3 TCBEXHPS BIT(1),    /* ON: HASN=PASN=SASN              @D61ADMZ*/ 06170051
*   3 TCBEXXMD BIT(1),    /* ON: SVC ALLOWED IN X-MODE       @D64ADMZ*/ 06180051
*   3 TCBEXNAT BIT(1),    /* ON: MVS SVC ALLOWED IN NAT. ENV.@D64ADMZ*/ 06190051
*   3 *        BIT(2),    /* RESERVED                        @D52VDMZ*/ 06200051
*  2 TCBIEXFL  BIT(8),    /* INTERNAL EXECUTION FLAG         @D52VDMZ*/ 06210051
*   3 *        BIT(8),    /* INT. MODES, DEF. AS IN TCBEXFLG @D52VDMZ*/ 06220051
*  2 TCBGRFLG  BIT(8),    /* GETVIS REQUEST FLAG BYTE        @D52VDMZ*/ 06230051
*  2 TCBFLAG5  BIT(8),    /* MORE FLAGS                      @D52VDMZ*/ 06240051
*   3 TCBQDSP  BIT(1),    /* SYS.GETV.SP. ALLOC.BY SYSDEF SVC@D52VDMZ*/ 06250051
*   3 *        BIT(3),    /* USED FOR LINK STACK PROCESSING  @D61PDOW*/ 06260051
*   3 *        BIT(3),    /* RESERVED FOR FUTURE USE         @D64XDOW*/ 06270051
*   3 *        BIT(1),    /* TCBLSPEC FREE FOR REUSE         @D67CDOW*/ 06271052
*  2 TCBUCNTL  PTR(32),   /* USER CONTROL BLOCK              @D52VDMZ*/ 06272051
*  2 TCBTDSE   PTR(32),   /* PTR TO TASK DATA SPACE CNTL.BLOC@D52VDMZ*/ 06273051
*  2 *         PTR(32),   /* NOT USED                        @D61PDOW*/ 06274051
*  2 TCBDMPIP  PTR(32),   /* ADDR OF DUMP MSG INFOMRATION    @D52VDMZ*/ 06275051
*  2 *         CHAR(4),   /* RESERVED FOR FUTURE USE         @D52VDMZ*/ 06276051
*  2 *         CHAR(4),   /* RESERVED FOR FUTURE USE         @D52VDOW*/ 06277051
*  2 TCBSSAV   CHAR(72) BDY(DWORD),  /* SECOND SAVE AREA     @D14NDFG*/ 06278051
*  2 TCBWAREA  CHAR(216), /* TCB WORK AREA                   @D64ADVB*/ 06279051
*   3 SVCSV3   CHAR(64),  /* SAVE AREA FOR REGS 9-8          @D14NDFG*/ 06280051
*   3 SVCWORK  CHAR(64),  /* SVC WORK AREA                   @D61PDOW*/ 06290051
*   3 SVCWORKA CHAR(64),  /* WORK AREA                       @D64ADOW*/ 06300051
*   3 SVCWORKB CHAR(24),  /*                                 @D64ADOW*/ 06310051
*  2 TCBCINF,             /* FETCH CANCEL INFORMATION        @D14NDFG*/ 06320051
*   3 TCBCALIB PTR(32),   /* POINTER TO LIBRARY NAME         @D14NDFG*/ 06330051
*   3 TCBCASLB PTR(32),   /* POINTER TO SUBLIBRARY NAME      @D14NDFG*/ 06340051
*   3 TCBCANAM PTR(32),   /* POINTER TO PHASE NAME           @D14NDFG*/ 06350051
*   3 *        PTR(32),   /* USED FOR MOVE MODE              @D14NDFG*/ 06360051
*  2 TCBABEX  PTR(31),    /* PTR TO AB/ESTAEX/FESTAE CHAIN   @D64ADOW*/ 06370051
*  2 TCBRFLAG BIT(8),     /* FLAG BYTE                       @DY45849*/ 06380051
*   3 TCBRCVAL BIT(1),    /* INDICATES VALID REASON CODE     @DY45849*/ 06380151
*   3 *        BIT(7),    /* FREE FOR USE                    @DY45849*/ 06380251
*  2 TCBRCODE BIT(24),    /* REASON CODE                     @DY45849*/ 06380351
*  2 TCBFREX  PTR(31),    /* PTR TO FRR CHAIN                @D64ADMZ*/ 06380451
*  2 TCBPCEX  PTR(31),    /* PTR TO ESPIE/PC CAHIN           @D64ADMZ*/ 06380551
*  2 TCBEXIFL BIT(8),     /* INTERFACE BYTE TERMINATOR/RTM   @D64ADOW*/ 06380651
*  2 TCBEXITF BIT(8),     /* FLAG BYTE FOR EXIT PROCESSING   @D64ADOW*/ 06380751
*   3 TCBABACT  BIT(1),   /* AB EXIT ACTIVE                  @D61NDMZ*/ 06380851
*   3 TCBPCACT  BIT(1),   /* PC EXIT ACTIVE                  @D61NDMZ*/ 06380951
*   3 TCBITACT  BIT(1),   /* IT EXIT ACTIVE                  @D61NDMZ*/ 06381051
*   3 *         BIT(1),   /* RESERVED                        @D64ADOW*/ 06382051
*   3 TCBOCACT  BIT(1),   /* OC EXIT ACTIVE                  @D61NDMZ*/ 06383051
*   3 *         BIT(1),   /* RESERVED FOR EXIT PROCESSING    @D61NDMZ*/ 06384051
*   3 TCBPOACT  BIT(1),   /* POST EXIT ACTIVE                @D64ADMZ*/ 06385051
*   3 TCBEXACT  BIT(1),   /* ETXR EXIT ACTIVE                @D64ADMZ*/ 06386051
*  2 TCBEXITG BIT(8),     /* FLAG BYTE 2 FOR EXIT PROCESSING @D64ADOW*/ 06387051
*  2 TCBEXITH BIT(8),     /* FLAG BYTE                       @D65CDOW*/ 06388051
*  2 TCBSAVEX PTR(31),    /* TCBABEX SAVE AREA               @D65CDOW*/ 06389051
*  2 *        PTR(31),    /* RESERVED                        @D64ADOW*/ 06390051
*  2 TCBEOTAD  PTR(32),   /* EOT CONTINUATION ADDRESS        @D14NDFG*/ 06400051
*  2 AOTADR    CHAR(16),  /* AOT FOR VTAM                    @D14NDFG*/ 06410051
*  2 TCBECB    PTR(32),   /* ADDRESS OF ATTACH ECB           @D14NDFG*/ 06420051
*  2 TCBSPOFF  PTR(16),   /* OFFS OF DEDICATED GTVS SUBPOOL  @D14NDJB*/ 06430051
*  2 *         PTR(16),   /* RESERVED                        @D14NDJB*/ 06440051
*  2 TCBIVMHK  BIT(8),    /* IAF ENTERED BY SUPERVISOR HOOK  @D31ZDMZ*/ 06450051
*   3 TCBHKPCK  BIT(1),   /* ENTERED FROM SGPCK              @D31ZDMZ*/ 06460051
*   3 TCBHKSVC  BIT(1),   /* ENTERED FROM SGNUC              @D31ZDMZ*/ 06470051
*   3 TCBHKCHK  BIT(1),   /* ENTERED FROM CHKPT              @D31ZDMZ*/ 06480051
*   3 TCBHKIOA  BIT(1),   /* IMR FILE I/O ACTIVE             @D31ZDMZ*/ 06490051
*   3 TCBHKDCA  BIT(1),   /* DATA COLLECTION ACTIVE          @D31ZDMZ*/ 06500051
*   3 *         BIT(3),   /* UNUSED                          @D31ZDMZ*/ 06510051
*  2 TCBDYNFL  BIT(8),    /* DYNAMIC CLASS SERVICE FLAG      @D51IDMZ*/ 06520051
*   3 TCBDACT   BIT(1),   /* DYNAMIC CLASS SERVICE ACTIVE    @D51IDMZ*/ 06530051
*   3 *         BIT(7),   /* UNUSED                          @D51IDMZ*/ 06540051
*  2 TCBSPTFL  BIT(8),    /* SERVICE PROCESSOR TASK FLAG BYTE@D31EMMZ*/ 06550051
*   3 TCBSPTCA  BIT(1),   /* SPDT CONNECTION ACTIVE          @D31EMMZ*/ 06560051
*   3 TCBSPTPO  BIT(1),   /* SPDT POST INDICATOR             @D51IDMZ*/ 06570051
*   3 *         BIT(6),   /* UNUSED                          @D51EMMZ*/ 06580051
*  2 TCBNOSAX  FIXED(8),  /* NO OF OSAX CARDS OWNED BY TASK  @D67BDMZ*/ 06590051
*  2 TCBSSCB   PTR(31),   /* SAVED CURRENT SCB POINTER       @D52VDMZ*/ 06600051
*  2 *         FIXED(31), /* RESERVED FOR FUTURE USE         @D51IDMZ*/ 06610051
*  2 TCBSTADR  PTR(32),   /* ADDR.OF SYST.TASK DEACTIV.ROUT. @D14NDFG*/ 06620051
*  2 TCBATCBE  PTR(31),   /* ADDR.OF TCB EXTENSION           @D61NDMZ*/ 06630051
*  2 TCBMVSIS  BIT(32),   /* SVC INTERR.INFO FOR MVS SERVICES@D61NDMZ*/ 06640051
*   3 TCBMVSSA BIT(1),    /* MVS SVC ACTIVE                  @D61NDMZ*/ 06650051
*   3 TCBMVSFM BIT(1),    /* EXEC ..MVS AND SVC 132 GIVEN    @D61NDMZ*/ 06660051
*   3 *        BIT(30),   /* EXEC ..MVS AND SVC 132 GIVEN    @D61NDMZ*/ 06670051
*  2 TCBALLST  PTR(31),   /* ADDT OF TCN LOAD LIST ELEMS     @D64ADVB*/ 06680051
*  2 *         PTR(31),   /* RESERVED FOR FUTURE USE         @D61NDMZ*/ 06690051
*  2 TCBLECAV  PTR(31),   /* LANG. ENV. CEL ANCHOR VECTOR    @D61NDMZ*/ 06700051
*  2 *         BIT(8),    /* RESERVED                        @D64ADOW*/ 06710051
*  2 TCBFLAG6  BIT(8),    /* VENDOR EXIT FLAG BYTE           @D61NDMZ*/ 06720051
*   3 TCBLTALE BIT(1),    /* LTA LEFT BY BAM PRODEXIT PROC.  @D61NDMZ*/ 06730051
*   3 TCBPSTAC BIT(1),    /* PSTATE VENDOR EXIT ACTIVE       @D61NDMZ*/ 06740051
*   3 TCBSST0A BIT(1),    /* SSTATE RID 0 VENDOR EXIT ACTIVE @D61NDMZ*/ 06750051
*   3 TCBSST4A BIT(1),    /* SSTATE RID 4 VENDOR EXIT ACTIVE @D61NDMZ*/ 06760051
*   3 TCBSST0F BIT(1),    /* SSTATE FAST SVC EXIT ACTIVE     @D61NDMZ*/ 06770051
*   3 TCBSVCEX BIT(1),    /* SVC EXIT ACTIVE                 @D61NDMZ*/ 06780051
*   3 *        BIT(2),    /* RESERVED FOR FUTURE USE         @D61NDMZ*/ 06790051
*  2 TCBCRID   CHAR(2),   /* RID WHEN ENTERING SSTATE PROC.  @D61NDMZ*/ 06800051
*  2 TCBSCRID  CHAR(2),   /* SAVE TCBCRID                    @D61NDMZ*/ 06810051
*  2 TCBSCRI2  CHAR(2),   /* SAVE TCBSCRID                   @D61NDMZ*/ 06820051
*  2 TCBSPL    PTR(31),   /* ANCHOR FOR JOB/TASK REL.SUB.LST @D61NDMZ*/ 06830051
*  2 TCBCSNAM  CHAR(8),   /* PHASENAME FOR DUMP              @DY45682*/ 06840051
*  2 *         CHAR(28),  /* RESERVED FOR FUTURE USE         @DY45682*/ 06850051
*/*----- END OF USER MAIN TASK/SYSTEM TASK TCB    -----------@D61NDMZ*/ 06860051
*  2 TCBSTSAA  PTR(31);   /* SUBTASKS SAVE AREA ADDRESS      @D52VDMZ*/ 06870051
*/*----- END OF USER SUBTASK TCB'S --------------------------@D14NDFG*/ 06880051
*%INCLUDE SYSLIB(MAPTCBX);                                 /*@D61NDMZ*/ 06890051
