*        %GOTO SOCKPRO  ;         /* Bilingual header                   00010000
         MACRO                                                          00020000
         BPXYSOCK  &DSECT=YES,&LIST=YES                                 00030000
         GBLB  &SOCK411                                                 00040000
         AIF   (&SOCK411 EQ 1).E411                                     00050000
&SOCK411 SETB  1                                                        00060000
         AIF   ('&LIST' EQ 'YES').A411                                  00070000
         PUSH  PRINT  BPXYSOCK: OpenMVS Socket Address Structure        00080000
         PRINT OFF                                                      00090000
         AGO   .A411                                                    00100000
*                                  */                                   00110000
*%SOCKPRO : ;                                                           00120000
*/****START OF SPECIFICATIONS****************************************** 00130000
*                                                                       00140000
*    $MAC (BPXYSOCK) COMP(SCPX1) PROD(BPX):                             00150000
*                                                                       00160000
*01* MACRO NAME: BPXYSOCK                                               00170000
*                                                                       00180000
*01* DSECT NAME: N/A                                                    00190000
*                                                                       00200000
*01* DESCRIPTIVE NAME: OpenMVS Socket Address structure control block   00210000
*                                                                       00220000
*02*   ACRONYM: SOCK                                                    00230000
**/                                                                     00240000
*/*01* PROPRIETARY STATEMENT=                                        */ 00250000
*/***PROPRIETARY_STATEMENT********************************************/ 00260000
*/*                                                                  */ 00270000
*/*                                                                  */ 00280000
*/* LICENSED MATERIALS - PROPERTY OF IBM                             */ 00290000
*/* THIS MACRO IS "RESTRICTED MATERIALS OF IBM"                      */ 00300000
*/* 5647-A01 (C) COPYRIGHT IBM CORP. 1993,1999                       */ 00310000
*/*                                                                  */ 00320000
*/* STATUS= HBB6608                                                  */ 00330000
*/*                                                                  */ 00340000
*/***END_OF_PROPRIETARY_STATEMENT*************************************/ 00350000
*/*                                                                     00360000
*01* EXTERNAL CLASSIFICATION:  GUPI                                     00370000
*01* END OF EXTERNAL CLASSIFICATION:                                    00380000
*                                                                       00390000
*01* FUNCTION:                                                          00400000
*                                                                       00410000
*    This file contains the definitions of the socket address           00420000
*    structure control block for the supported address families.        00430000
*                                                                       00440000
*01* METHOD OF ACCESS:                                                  00450000
*                                                                       00460000
*02*   PL/X:                                                            00470000
*                                                                       00480000
*        %INCLUDE SYSLIB(BPXYSOCK)                                      00490000
*        By default, the SOCK is based on SOCKPTR. If                   00500000
*        other basing is desired, use %SOCKBASE='BASED(XXXXXX)'.        00510000
*        If %SOCKBASE='BASED(SOCKPTR)' is coded, a Declare for          00520000
*        SOCKPTR is also generated.                                     00530000
*                                                                       00540000
*        The Sockaddr PL/X data type is defined by this macro.     @P3A 00550000
*        To have only the type defined, and not the instance       @P3A 00560000
*        named "SockAddr", use %SOCKBASE = 'TYPEONLY'.             @P3A 00570000
*                                                                       00580000
*        The socket address is a parameter on the following             00590000
*        syscalls: Accept                                               00600000
*                  Bind                                                 00610000
*                  Connect                                              00620000
*                  GetName                                              00630000
*                  SndtoRcvfrom                                         00640000
*                  SetPeer                                              00650000
*                                                                       00660000
*02*   ASM:                                                             00670000
*                                                                       00680000
*        None                                                           00690000
*                                                                       00700000
*01* SIZE: Release dependent.  Refer to the mapping.                    00710000
*                                                                       00720000
*01* POINTED TO BY: Input parameter                                     00730000
*                                                                       00740000
*01* CREATED BY:    caller                                              00750000
*                                                                       00760000
*01* DELETED BY:    caller                                              00770000
*                                                                       00780000
*01* STORAGE ATTRIBUTES:                                                00790000
*02*   SUBPOOL:                                                         00800000
*02*   KEY:                                                             00810000
*02*   RESIDENCY:                                                       00820000
*                                                                       00830000
*01* FREQUENCY:                                                         00840000
*                                                                       00850000
*01* SERIALIZATION: N/A                                                 00860000
*                                                                       00870000
*01* DEPENDENCIES: None                                                 00880000
*                                                                       00890000
*01* NOTES: None                                                        00900000
*                                                                       00910000
*01* COMPONENT: OpenMVS (SCPX1)                                         00920000
*                                                                       00930000
*01* DISTRIBUTION LIBRARY:  AMACLIB                                     00940000
*                                                                       00950000
*01* EYE-CATCHER: None - this is the interface block from the user.     00960000
*02*   OFFSET:  N/A                                                     00970000
*02*   LENGTH:  N/A                                                     00980000
*                                                                       00990000
*01* CHANGE-ACTIVITY:                                                   01000000
*                                                                       01010000
*  $D0=DOAA002  HOM1120 920316 PDCL: Dcr A002.02 Socket support         01020000
*  $D1=DOAA002  HOM1120 931005 PDJZ: Dcr A002.08 Unix domain sockets    01030000
*  $P0=POA0284  HOM1120 940126 PDXX: Adapt SOCKADDR to BSD 4.4 defines  01040000
*  $P0=PPF0001  HOM1130 940126 PDXX: Adapt SOCKADDR to BSD 4.4 defines  01050000
*  $P1=PPF0038  HOM1130 940531 PDJV: Add define for INADDR_ANY          01060000
*  $D2=DPFA053, HOM1130 940609 PDHR: Add support for converging         01070000
*                                    sockets changes                    01080000
*  $D3=DPFA053  HOM1130 950202 PDJV: DCR A053.09 - Local INET support   01090000
*  $P2=PPF0381  HOM1130 950418 PDJV: Add definitions for Protocol       01100000
*  $P3=PRG0095  HOM1140 951221 PDJV: Make sockaddr a type declare       01110000
*                                    Also correct ASM Sock_Sin_Addr     01120000
*  $D4=DSPA158  HOM1150 960312 PDJT: AF_ESCON                           01130000
*  $D5=DRGA146  HOM1150 960410 PDWE: A146.03 SetIBMSockOpt              01140000
*  $P4=PQC1723  HBB6603 960725 PDWE: Add Tcp_nodelay for TCP/IP 3.3     01150000
*  $P5=PQC2129  HBB6603 960815 PDJV: Add new SOCKBAS2 use               01160000
*  $P6=PQC2529  HBB6603 960925 PDJV: Make constants 4 bytes long        01170000
*  $P7=PUX0159  HBB6605 970509 PDJT: New setibmsockopt's for TCP/IP 3.4 01180000
*  $D6=DVTA265  HBB6606 971009 PDJT: SLA/Multicast setsockopt's         01190000
*  $D7=DWAA274  JBB6607 980309 PDSK: Fast CGI (A274.03)                 01200000
*  $P8=PVT0656  JBB6607 980323 PDJT: Sysplex TCP/IP and IPv6 additions  01210000
*  $P9=PWA0114  JBB6607 980430 PDJT: Change IP_TOS from 10 to 2 OW33172 01220000
*  $PA=PWA0227  JBB6607 980717 PDJV: Add SO_EioIfNewTP for setibmsockop 01230000
*                                                                       01240000
****END OF SPECIFICATIONS*********************************************/ 01250000
*        %GOTO SOCKPLX  ;         /* Bilingual header                   01260000
.A411    ANOP  ,                                                        01270000
*                                                                       01280000
*********************************************************************** 01290000
** BPXYSOCK: OpenMVS Socket Address Structure                         * 01300000
** Used By: Sockets PFS                                               * 01310000
*********************************************************************** 01320000
*                                                                       01330000
         AIF   ('&DSECT' EQ 'NO').B411                                  01340000
SOCKADDR             DSECT ,                                            01350000
         AGO   .C411                                                    01360000
.B411    ANOP  ,                                                        01370000
SOCKADDR             DS    0F                                           01380000
.C411    ANOP  ,                                                        01390000
SOCKBEGIN            DS    0F                                           01400000
*                                                                       01410000
SOCK_LEN             DS    X          Address Length        @P0A        01420000
SOCK_FAMILY          DS    X          Address Family        @P0C        01430000
SOCK_DATA            DS    0C         Protocol specific area            01440000
*                                                                       01450000
SOCK#LEN             EQU   *-SOCKADDR Constant - Fixed length of SOCK   01460000
*                                                                       01470000
*********************************************************************** 01480000
*                                                                     * 01490000
*   AF_Inet Socket Address Structure                                  * 01500000
*                                                                     * 01510000
*********************************************************************** 01520000
*                                                                       01530000
                     ORG  SOCK_DATA   Start of AF_Inet unique area      01540000
SOCK_SIN             DS   0C                                            01550000
SOCK_SIN_PORT        DS   H           Port number used by the appl      01560000
SOCK_SIN_ADDR        DS   CL4         INET address (netid)              01570000
                     DS   CL8         Reserved area not used            01580000
*                                                                       01590000
SOCK_SIN#LEN         EQU  *-SOCK_SIN  Constant - Fixed length of        01600000
*                                     AF_Inet unique area               01610000
*                                                                       01620000
*********************************************************************** 01630000
*                                                                     * 01640000
*   AF_Unix Socket Address Structure                                  * 01650000
*                                                                     * 01660000
*********************************************************************** 01670000
*                                                                       01680000
                     ORG  SOCK_DATA   Start of AF_Unix unique area      01690000
SOCK_SUN             DS   0C                                            01700000
SOCK_SUN_NAME        DS   CL108       Path name of the socket  @P0C     01710000
*                                     Length 108 matchs RS/6000@P0A     01720000
*                                                                       01730000
SOCK_SUN#LEN         EQU  *-SOCK_SUN  Constant - Fixed length of        01740000
*                                     AF_Unix unique area               01750000
*                                                                       01760000
*********************************************************************** 01770000
*                                                                     * 01780000
*   Equates for Address Families                                      * 01790000
*                                                                     * 01800000
*********************************************************************** 01810000
*                                                                       01820000
AF_UNSPEC            EQU  0           Unspecified                       01830000
AF_UNIX              EQU  1           Unix Domain                       01840000
AF_INET              EQU  2           Internetwork: UDP TCP             01850000
AF_IMPLINK           EQU  3           Arpanet imp addresses             01860000
AF_PUP               EQU  4           pup protocols: BSP                01870000
AF_CHAOS             EQU  5           mit CHAOS protocols               01880000
AF_NS                EQU  6           XEROX NS protocols                01890000
AF_NBS               EQU  7           nbs protocols                     01900000
AF_ECMA              EQU  8           European computer man.            01910000
AF_DATAKIT           EQU  9           datakit protocols                 01920000
AF_CCITT             EQU  10          CCITT protocols: X.25             01930000
AF_SNA               EQU  11          IBM SNA                           01940000
AF_DECNET            EQU  12          DECNet                            01950000
AF_DLI               EQU  13          Direct data link interface        01960000
AF_LAT               EQU  14          LAT                               01970000
AF_HYLINK            EQU  15          NSC hyperchannel                  01980000
AF_APPLETALK         EQU  16          Apple Talk                        01990000
AF_IUCV              EQU  17          IBM IUCV                          02000000
AF_ESCON             EQU  18          ESCON UDP                  @D4A   02010000
AF_INET6             EQU  19          IPv6                       @P8A   02020000
AF_ROUTE             EQU  20          Routing Sockets            @P8A   02030000
AF_MAX               EQU  21                                     @P8C   02040000
*                                                                       02050000
**********************************************************************/ 02060000
*   Equates for protocol                                         @P2A*/ 02070000
**********************************************************************/ 02080000
*                                                                       02090000
IPPROTO_IP           EQU   0          DEFAULT PROTOCOL                  02100000
IPPROTO_TCP          EQU   6          TCP                               02110000
IPPROTO_UDP          EQU  17          USER DATAGRAM                     02120000
*                                                                       02130000
*********************************************************************** 02140000
*                                                                     * 02150000
*   Equates for setpeer options                                       * 02160000
*                                                                     * 02170000
*********************************************************************** 02180000
*                                                                       02190000
SOCK#SO_SET          DC   X'00000200'                                   02200000
SOCK#SO_UNSET        DC   X'00000400'                                   02210000
*                                                                       02220000
*********************************************************************** 02230000
*                                                                     * 02240000
*   Equates for socket types                                          * 02250000
*                                                                     * 02260000
*********************************************************************** 02270000
*                                                                       02280000
SOCK#_STREAM         EQU  1                                             02290000
SOCK#_DGRAM          EQU  2                                             02300000
SOCK#_RAW            EQU  3                                             02310000
SOCK#_RDM            EQU  4                                             02320000
SOCK#_SEQPACKET      EQU  5                                             02330000
*                                                                       02340000
*********************************************************************** 02350000
*                                                                     * 02360000
*   Equates for Dimension   (socket/socketpair syscall)               * 02370000
*                                                                     * 02380000
*********************************************************************** 02390000
*                                                                       02400000
SOCK#DIM_SOCKET      EQU  1                                             02410000
SOCK#DIM_SOCKETPAIR  EQU  2                                             02420000
*                                                                       02430000
*********************************************************************** 02440000
*                                                                     * 02450000
*   Equates for getname option                                        * 02460000
*                                                                     * 02470000
*********************************************************************** 02480000
*                                                                       02490000
SOCK#GNMOPTGETPEERNAME EQU  1                                           02500000
SOCK#GNMOPTGETSOCKNAME EQU  2                                           02510000
*                                                                       02520000
*********************************************************************** 02530000
*                                                                     * 02540000
*   Equates for sockopt                                               * 02550000
*                                                                     * 02560000
*********************************************************************** 02570000
*                                                                       02580000
SOCK#OPTOPTGETSOCKOPT    EQU  1                                         02590000
SOCK#OPTOPTSETSOCKOPT    EQU  2                                         02600000
SOCK#OPTOPTSETIBMSOCKOPT EQU  3                                   @D5A  02610000
*                                                                       02620000
*********************************************************************** 02630000
*                                                                     * 02640000
*   Equates for Shutdown options                                      * 02650000
*                                                                     * 02660000
*********************************************************************** 02670000
*                                                                       02680000
SOCK#SHUTDOWNREAD      EQU  0                                           02690000
SOCK#SHUTDOWNWRITE     EQU  1                                           02700000
SOCK#SHUTDOWNBOTH      EQU  2                                           02710000
*                                                                       02720000
*                                                                       02730000
*********************************************************************** 02740000
*                                                                     * 02750000
*   Equate for Level Number for socket options                        * 02760000
*                                                                     * 02770000
*********************************************************************** 02780000
*                                                                       02790000
SOCK#SOL_SOCKET      DC   X'0000FFFF'                                   02800000
*                                                                       02810000
*                                                                       02820000
*********************************************************************** 02830000
*                                                                     * 02840000
*   Equate for InAddrAny for bind requests                            * 02850000
*                                                                     * 02860000
*********************************************************************** 02870000
*                                                                       02880000
INADDR_ANY           DC   X'00000000'                                   02890000
*                                                                       02900000
*********************************************************************** 02910000
*                                                                     * 02920000
*   Equates for Socket options                                        * 02930000
*                                                                     * 02940000
*********************************************************************** 02950000
*                                                                       02960000
SOCK#SO_DEBUG        DC   X'00000001'                                   02970000
SOCK#SO_ACCEPTCONN   DC   X'00000002'                                   02980000
SOCK#SO_REUSEADDR    DC   X'00000004'                                   02990000
SOCK#SO_KEEPALIVE    DC   X'00000008'                                   03000000
SOCK#SO_DONTROUTE    DC   X'00000010'                                   03010000
SOCK#SO_BROADCAST    DC   X'00000020'                                   03020000
SOCK#SO_USELOOPBACK  DC   X'00000040'                                   03030000
SOCK#SO_LINGER       DC   X'00000080'                                   03040000
SOCK#SO_OOBINLINE    DC   X'00000100'                                   03050000
*                                                                       03060000
SOCK#SO_SNDBUF       DC   X'00001001'                                   03070000
SOCK#SO_RCVBUF       DC   X'00001002'                                   03080000
SOCK#SO_SNDLOWAT     DC   X'00001003'                                   03090000
SOCK#SO_RCVLOWAT     DC   X'00001004'                                   03100000
SOCK#SO_SNDTIMEO     DC   X'00001005'                                   03110000
SOCK#SO_RCVTIMEO     DC   X'00001006'                                   03120000
SOCK#SO_ERROR        DC   X'00001007'                                   03130000
SOCK#SO_TYPE         DC   X'00001008'                                   03140000
*                                                                       03150000
* Non-standard sockopts                                                 03160000
*                                                                       03170000
SO_PROPAGATEID       DC   X'00004000'                         /*@D7A*/  03180000
SO_CLUSTERCONNTYPE   DC   X'00004001'                           @P8A    03190000
*                                                                       03200000
* SO_CLUSTERCONNTYPE Output Values                                      03210000
*                                                                       03220000
SO_CLUSTERCONNTYPE_NOCONN        EQU  0                         @P8A    03230000
SO_CLUSTERCONNTYPE_NONE          EQU  1                         @P8A    03240000
SO_CLUSTERCONNTYPE_SAME_CLUSTER  EQU  2                         @P8A    03250000
SO_CLUSTERCONNTYPE_SAME_IMAGE    EQU  4                         @P8A    03260000
SO_CLUSTERCONNTYPE_INTERNAL      EQU  8                         @P8A    03270000
*                                                                       03280000
*                                                                       03290000
* IPPROTO_IP Options                                                    03300000
*                                                                       03310000
IP_TOS                    EQU 2                           /*@P9C@D6A*/  03320000
IP_MULTICAST_TTL          EQU 3                               /*@D6A*/  03330000
IP_MULTICAST_LOOP         EQU 4                               /*@D6A*/  03340000
IP_ADD_MEMBERSHIP         EQU 5                               /*@D6A*/  03350000
IP_DROP_MEMBERSHIP        EQU 6                               /*@D6A*/  03360000
IP_MULTICAST_IF           EQU 7                           /*@P9C@D6A*/  03370000
IP_DEFAULT_MULTICAST_TTL  EQU 1                               /*@D6A*/  03380000
IP_DEFAULT_MULTICAST_LOOP EQU 1                               /*@D6A*/  03390000
IP_MAX_MEMBERSHIPS        EQU 20                              /*@D6A*/  03400000
*                                                                       03410000
* setibmsockopt options                                                 03420000
*                                                                       03430000
SOCK#SO_BULKMODE           DC X'00008000'                      @D5A     03440000
SOCK#SO_IGNOREINCOMINGPUSH DC X'00000001'                        @D5A   03450000
SOCK#SO_NONBLOCKLOCAL      DC X'00008001'                        @P7A   03460000
SOCK#SO_IGNORESOURCEVIPA   DC X'00000002'                        @P7A   03470000
*                       Toggles the use of non-VIPA addresses.  When    03480000
*                       enabled, non-VIPA addresses will be used for    03490000
*                       outbound IP packets.                            03500000
SOCK#SO_OPTMSS             DC X'00008003'                        @P7A   03510000
*                Toggles the use of optimal TCP segment size.           03520000
*                When enabled, the TCP segment size may be optimally    03530000
*                increased on outbound data transfers.  This may        03540000
*                reduce the amount of TCP outbound and inbound          03550000
*                acknowledgement packet processing; therefore,          03560000
*                minimizing CPU consumption.                     @P7A   03570000
SOCK#SO_OPTACK             DC X'00008004'   Optimize Acks        @P7A   03580000
SOCK#SO_EIOIFNEWTP         DC X'00000005'                        @PAA   03590000
*********************************************************************** 03600000
*                                                                     * 03610000
*   Equates for So_   option values                                   * 03620000
*                                                                     * 03630000
*********************************************************************** 03640000
SOCK#SO_SETOPTIONON   DC X'00000001'                             @PAA   03650000
SOCK#SO_SETOPTIONOFF  DC X'00000000'                             @PAA   03660000
*********************************************************************** 03670000
*                                                                     * 03680000
*   Equates for IPPROTO_TCP options                                   * 03690000
*                                                                     * 03700000
*********************************************************************** 03710000
SOCK#TCP_NODELAY      DC X'00000001'                             @P4A   03720000
SOCK#TCP_KEEPALIVE    DC X'00000008'                             @P9A   03730000
*                                                                       03740000
*********************************************************************** 03750000
*                                                                     * 03760000
*   Equates for Socket Port Constant                                  * 03770000
*                                                                     * 03780000
*********************************************************************** 03790000
*                                                                       03800000
SOCK#LASTRESERVEPORT   EQU  1023                                 @D2A   03810000
*                                                                       03820000
*                                                                       03830000
IP_MREQ         DSECT ,                                     @P9M@D6A    03840000
IMR_MULTIADDR    DS CL4            IP MULTICAST ADDR OF GROUP   @D6A    03850000
IMR_INTERFACE    DS CL4            LOCAL IP ADDR OF INTERFACE   @D6A    03860000
*                                                                       03870000
*********************************************************************** 03880000
*                                                                     * 03890000
*   Structure for So_Linger                                           * 03900000
*                                                                 @D3A* 03910000
*********************************************************************** 03920000
*                                                                       03930000
SOCK_LINGER_STRUCT DSECT ,                                         @P9A 03940000
SOCK_L_ONOFF         DS    F          On/Off indicator         @P9M@D3A 03950000
SOCK_L_LINGER        DS    F          Length of time to linger @P9M@D3C 03960000
*                                                                       03970000
** BPXYSOCK End                                                         03980000
         SPACE 3                                                        03990000
         AIF   ('&LIST' EQ 'YES').E411                                  04000000
         POP   PRINT                                                    04010000
.E411    ANOP  ,                                                        04020000
         MEND                                                           04030000
  Terminating PL/X comment                                          */  04040000
*                                                                       04050000
 %SOCKPLX : ;                                                           04060000
  %DCL SOCKBAS2 CHAR EXT;                                     /* @P5A*/ 04070000
  %IF SOCKBAS2 ¬='' & SOCKBASE = '' %THEN                     /* @P5A*/ 04080000
    %SOCKBASE = SOCKBAS2;                                     /* @P5A*/ 04090000
  %IF Translate(SOCKBASE) ¬= 'TYPEONLY' %THEN                 /* @P3A*/ 04100000
   %DO;                                                       /* @P3A*/ 04110000
    %IF SOCKBASE='' %THEN                                               04120000
     %DO;                                                               04130000
      %SOCKBASE='Based(SockPtr)';                                       04140000
     %END;                                                              04150000
    %IF TRANSLATE(SOCKBASE)='BASED(SOCKPTR)'  %THEN                     04160000
     %DO;                                                               04170000
       DCL SockPtr Ptr(31);          /* Pointer to the SOCK          */ 04180000
     %END;                                                              04190000
    %IF SOCKVBSE='' %THEN                                     /* @P3M*/ 04200000
     %DO;                                                     /* @P3M*/ 04210000
      %SOCKVBSE='Based(ADDR(Sock_data)) Via(Alet(Sock_data))';/* @P3M*/ 04220000
     %END;                                                    /* @P3M*/ 04230000
                                                                        04240000
    /*****************************************************************/ 04250000
    /*                                                               */ 04260000
    /* Declare an instance of a SockAddr Header                  @P3A*/ 04270000
    /*                                                               */ 04280000
    /*****************************************************************/ 04290000
    Dcl SockAddr IsA(Sock_Header) SOCKBASE BDY(WORD);         /* @P3A*/ 04300000
                                                                        04310000
    /*****************************************************************/ 04320000
    /*                                                               */ 04330000
    /* Declare an instance of the Inet Part of the rest of the       */ 04340000
    /* SockAddr.                                                     */ 04350000
    /*                                                           @P3A*/ 04360000
    /*****************************************************************/ 04370000
    DCL Sock_sin IsA(Sock_Inet_Part)  SOCKVBSE;               /* @P3M*/ 04380000
                                                                        04390000
    /*****************************************************************/ 04400000
    /*                                                               */ 04410000
    /* Declare an instance of the Unix Part of the rest of the       */ 04420000
    /* SockAddr.                                                     */ 04430000
    /*                                                           @P3A*/ 04440000
    /*****************************************************************/ 04450000
    Dcl Sock_sun IsA(Sock_Unix_Part) SOCKVBSE;                /* @P3M*/ 04460000
                                                                        04470000
   %END;                                                      /* @P3A*/ 04480000
                                                                        04490000
 /********************************************************************/ 04500000
 /*                                                                  */ 04510000
 /* Declare the types for both the Inet and Unix SockAddr's.         */ 04520000
 /* In order to do this, also declare types for each of the          */ 04530000
 /* parts - the Common Header, the Inet specific part and the        */ 04540000
 /* Unix specific part.                                              */ 04550000
 /*                                                              @P3A*/ 04560000
 /********************************************************************/ 04570000
 DCL                                                                    04580000
  1    Sock_Inet_SockAddr   Type,                             /* @P3A*/ 04590000
   3   Sock_Inet_Hdr     IsA(Sock_Header),                    /* @P3A*/ 04600000
   3   Sock_Inet_Rest    IsA(Sock_Inet_Part);                 /* @P3A*/ 04610000
                                                                        04620000
 DCL                                                                    04630000
  1    Sock_Unix_SockAddr   Type,                             /* @P3A*/ 04640000
   3   Sock_Unix_Hdr     IsA(Sock_Header),                    /* @P3A*/ 04650000
   3   Sock_Unix_Rest    IsA(Sock_Unix_Part);                 /* @P3A*/ 04660000
                                                                        04670000
 DCL                                                                    04680000
  1    Sock_Header          Type,                             /* @P3C*/ 04690000
   3   Sock_len     Fixed(8),    /* Address length               @P0A*/ 04700000
   3   Sock_family  Fixed(8),    /* Address family               @P0C*/ 04710000
   3   Sock_data    Char(0);     /* Protocol specific area           */ 04720000
                                                                        04730000
 DCL                                                                    04740000
  SOCKADDR#Len Fixed(24) Constant(Length(Sock_Header));/* len of  @P3C  04750000
                                                       Sockaddr hdr  */ 04760000
 /********************************************************************/ 04770000
 /*                                                                  */ 04780000
 /* Af_Inet Socket Address Structure                                 */ 04790000
 /*                                                                  */ 04800000
 /********************************************************************/ 04810000
                                                                        04820000
 DCL 1 Sock_Inet_Part   Type,       /* Af_Inet specific address         04830000
                                       structure                     */ 04840000
       3 Sock_sin_Port  Fixed(16),  /* Port number used by the appl  */ 04850000
       3 Sock_sin_Addr  Char(4),    /* Inet addr (netid)             */ 04860000
       3 *              Char(8) ;   /* unused                        */ 04870000
                                                                        04880000
 DCL Sock_sin#Len   Fixed(24) Constant(LENGTH(Sock_Inet_Part));/*@P3C*/ 04890000
                                                                        04900000
 /********************************************************************/ 04910000
 /*                                                                  */ 04920000
 /* Af_Unix Socket Address Structure                                 */ 04930000
 /*                                                                  */ 04940000
 /********************************************************************/ 04950000
                                                                        04960000
 Dcl 1 Sock_Unix_Part      Type,     /* Af_Unix specific address        04970000
                                         structure                   */ 04980000
 /*  Deleted field use SOCK_LEN instead  Length of the path name1@P0D*/ 04990000
       3 Sock_sun_Name     Char(108); /* Path name of the socket @P0C*/ 05000000
 /*  Length of 108 matchs RS/6000 maximum selection              @P0A*/ 05010000
                                                                        05020000
 Dcl Sock_sun#Len   Fixed(24) Constant(LENGTH(Sock_Unix_Part));/*@P3C*/ 05030000
                                                                        05040000
 /********************************************************************/ 05050000
 /*                                                                  */ 05060000
 /* Structure for So_Linger                                          */ 05070000
 /*                                                              @D3A*/ 05080000
 /********************************************************************/ 05090000
                                                                        05100000
  Dcl 1 Sock_Linger_Struct Based,                                       05110000
        3 Sock_L_OnOff   Fixed(32),  /* On/Off indicator         @D3A*/ 05120000
        3 Sock_L_Linger  Fixed(32);  /* Length of time to linger @D3C*/ 05130000
                                                                        05140000
  /*******************************************************************/ 05150000
  /* Declares for address families                                   */ 05160000
  /*   Changed from Fixed(32) to Fixed(8) to match Sock_Family 19@P0C*/ 05170000
  /*   and back to Fixed(32) since constants will be truncated 20@P6C*/ 05180000
  /*******************************************************************/ 05190000
                                                                        05200000
  Dcl AF_Unspec     Fixed(32) Constant(0),  /* Unspecified           */ 05210000
      AF_Unix       Fixed(32) Constant(1),  /* Local to host - pipes */ 05220000
      AF_Inet       Fixed(32) Constant(2),  /* Internetwork: UDP, TCP*/ 05230000
      AF_ImpLink    Fixed(32) Constant(3),  /* Arpanet imp addresses */ 05240000
      AF_Pup        Fixed(32) Constant(4),  /* pup protocols: BSP    */ 05250000
      AF_Chaos      Fixed(32) Constant(5),  /* mit CHAOS protocols   */ 05260000
      AF_NS         Fixed(32) Constant(6),  /* Xerox NS protocols    */ 05270000
      AF_NBS        Fixed(32) Constant(7),  /* nbs protocols         */ 05280000
      AF_Ecma       Fixed(32) Constant(8),  /* European computer man.*/ 05290000
      AF_DataKit    Fixed(32) Constant(9),  /* datakit protocols     */ 05300000
      AF_CCITT      Fixed(32) Constant(10), /* CCITT protocols: X.25 */ 05310000
      AF_SNA        Fixed(32) Constant(11), /* IBM SNA               */ 05320000
      AF_DECnet     Fixed(32) Constant(12), /* DECNet                */ 05330000
      AF_DLI        Fixed(32) Constant(13), /* Direct data link int  */ 05340000
      AF_LAT        Fixed(32) Constant(14), /* LAT                   */ 05350000
      AF_Hylink     Fixed(32) Constant(15), /* NSC Hyperchannel      */ 05360000
      AF_AppleTalk  Fixed(32) Constant(16), /* Apple Talk            */ 05370000
      AF_Iucv       Fixed(32) Constant(17), /* IBM IUCV              */ 05380000
      AF_ESCON      Fixed(32) Constant(18), /* ESCON UDP         @D4A*/ 05390000
      AF_Inet6      Fixed(32) Constant(19), /* IPv6              @P8A*/ 05400000
      AF_Route      Fixed(32) Constant(20), /* Routing Sockets   @P8A*/ 05410000
                                                                        05420000
      AF_Max        Fixed(32) Constant(21); /*                   @P8C*/ 05430000
                                                                        05440000
  /*******************************************************************/ 05450000
  /* Declares for protocol                                       @P2A*/ 05460000
  /*******************************************************************/ 05470000
                                                                        05480000
  Dcl IPPROTO_IP     Fixed(32) Constant(0),  /* default protocol @P2A*/ 05490000
      IPPROTO_TCP    Fixed(32) Constant(6),  /* tcp              @P2A*/ 05500000
      IPPROTO_UDP    Fixed(32) Constant(17); /* user datagram    @P2A*/ 05510000
                                                                        05520000
  /*******************************************************************/ 05530000
  /* Declares for setpeer options                                    */ 05540000
  /*******************************************************************/ 05550000
                                                                        05560000
  Dcl Sock#SO_SET        Fixed(32) Constant(200x);                      05570000
  Dcl Sock#SO_UNSET      Fixed(32) Constant(400x);                      05580000
                                                                        05590000
  /*******************************************************************/ 05600000
  /* Declares for socket types                                       */ 05610000
  /*******************************************************************/ 05620000
  Dcl Sock#_Stream    Fixed(32) Constant(1);                            05630000
  Dcl Sock#_Dgram     Fixed(32) Constant(2);                            05640000
  Dcl Sock#_Raw       Fixed(32) Constant(3);                            05650000
  Dcl Sock#_Rdm       Fixed(32) Constant(4);                            05660000
  Dcl Sock#_SeqPacket Fixed(32) Constant(5);                            05670000
                                                                        05680000
  /*******************************************************************/ 05690000
  /* Declares for Dimension   (socket/socketpair syscall)            */ 05700000
  /*******************************************************************/ 05710000
  Dcl Sock#Dim_Socket     Fixed(31) Constant(1);                        05720000
  Dcl Sock#Dim_Socketpair Fixed(31) Constant(2);                        05730000
                                                                        05740000
  /*******************************************************************/ 05750000
  /* Declares for getname option                                     */ 05760000
  /*******************************************************************/ 05770000
  Dcl Sock#GnmOptGetPeerName  Fixed(32) Constant(1);                    05780000
  Dcl Sock#GnmOptGetSockName  Fixed(32) Constant(2);                    05790000
                                                                        05800000
  /*******************************************************************/ 05810000
  /* Declares for Sockopt                                            */ 05820000
  /*******************************************************************/ 05830000
  Dcl Sock#OptOptGetSockOpt    Fixed(32) Constant(1);                   05840000
  Dcl Sock#OptOptSetSockOpt    Fixed(32) Constant(2);                   05850000
  Dcl Sock#OptOptSetIBMSockOpt Fixed(32) Constant(3);        /* @D5A */ 05860000
                                                                        05870000
  /*******************************************************************/ 05880000
  /* Declares for Shutdown options                                   */ 05890000
  /*******************************************************************/ 05900000
  Dcl Sock#ShutdownRead       Fixed(32) Constant(0);                    05910000
  Dcl Sock#ShutdownWrite      Fixed(32) Constant(1);                    05920000
  Dcl Sock#ShutdownBoth       Fixed(32) Constant(2);                    05930000
                                                                        05940000
  /*******************************************************************/ 05950000
  /* Declare for Level Number for Socket Options                     */ 05960000
  /*******************************************************************/ 05970000
  Dcl Sock#Sol_Socket         Fixed(32) Constant('0000FFFF'x);/* @P6C*/ 05980000
                                                                        05990000
  /*******************************************************************/ 06000000
  /* Declare for InAddr_Any for Bind requests                    @P1A*/ 06010000
  /*******************************************************************/ 06020000
  Dcl InAddr_Any              Bit(32) Constant('00000000'x);  /* @P1A*/ 06030000
                                                                        06040000
  /*******************************************************************/ 06050000
  /* Declare Socket options - for setsockopt() and getsockopt()      */ 06060000
  /*******************************************************************/ 06070000
  Dcl Sock#So_Debug           Fixed(32) Constant(1);                    06080000
  Dcl Sock#So_AcceptConn      Fixed(32) Constant(2);                    06090000
  Dcl Sock#So_ReuseAddr       Fixed(32) Constant(4);                    06100000
  Dcl Sock#So_KeepAlive       Fixed(32) Constant(8);                    06110000
  Dcl Sock#So_DontRoute       Fixed(32) Constant(10x);                  06120000
  Dcl Sock#So_Broadcast       Fixed(32) Constant(20x);                  06130000
  Dcl Sock#So_UseLoopBack     Fixed(32) Constant(40x);                  06140000
  Dcl Sock#So_Linger          Fixed(32) Constant(80x);                  06150000
  Dcl Sock#So_OOBInline       Fixed(32) Constant(100x);                 06160000
                                                                        06170000
  Dcl Sock#So_SndBuf          Fixed(32) Constant(1001x);                06180000
  Dcl Sock#So_RcvBuf          Fixed(32) Constant(1002x);                06190000
  Dcl Sock#So_SndLoWat        Fixed(32) Constant(1003x);                06200000
  Dcl Sock#So_RcvLoWat        Fixed(32) Constant(1004x);                06210000
  Dcl Sock#So_SndTimeO        Fixed(32) Constant(1005x);                06220000
  Dcl Sock#So_RcvTimeO        Fixed(32) Constant(1006x);                06230000
  Dcl Sock#So_Error           Fixed(32) Constant(1007x);                06240000
  Dcl Sock#So_Type            Fixed(32) Constant(1008x);                06250000
                                                                        06260000
  /*-----------------------------------------------------------------*/ 06270000
  /* Non-standard sockopts                                           */ 06280000
  /*-----------------------------------------------------------------*/ 06290000
  Dcl SO_PropagateId          Fixed(32) Constant(4000x);      /* @D7A*/ 06300000
  Dcl SO_ClusterConnType      Fixed(32) Constant(4001x);      /* @P8A*/ 06310000
                                                                        06320000
  /*-----------------------------------------------------------------*/ 06330000
  /* getsockopt(SO_ClusterConnType) Output values                    */ 06340000
  /*-----------------------------------------------------------------*/ 06350000
  Dcl SO_CLUSTERCONNTYPE_NOCONN        Fixed(32) Constant(0), /* @P8A*/ 06360000
      SO_CLUSTERCONNTYPE_NONE          Fixed(32) Constant(1), /* @P8A*/ 06370000
      SO_CLUSTERCONNTYPE_SAME_CLUSTER  Fixed(32) Constant(2), /* @P8A*/ 06380000
      SO_CLUSTERCONNTYPE_SAME_IMAGE    Fixed(32) Constant(4), /* @P8A*/ 06390000
      SO_CLUSTERCONNTYPE_INTERNAL      Fixed(32) Constant(8); /* @P8A*/ 06400000
                                                                        06410000
  /*-----------------------------------------------------------------*/ 06420000
  /* IPPROTO_IP Options                                              */ 06430000
  /*-----------------------------------------------------------------*/ 06440000
  Declare (                                                             06450000
           IP_MULTICAST_TTL    Constant(3),                    /*@D6A*/ 06460000
           IP_MULTICAST_LOOP   Constant(4),                    /*@D6A*/ 06470000
           IP_ADD_MEMBERSHIP   Constant(5),                    /*@D6A*/ 06480000
           IP_DROP_MEMBERSHIP  Constant(6),                    /*@D6A*/ 06490000
           IP_MULTICAST_IF     Constant(7),                /*@P9C@D6A*/ 06500000
                                                                        06510000
           IP_DEFAULT_MULTICAST_TTL  Constant(1),              /*@D6A*/ 06520000
           IP_DEFAULT_MULTICAST_LOOP Constant(1),              /*@D6A*/ 06530000
           IP_MAX_MEMBERSHIPS  Constant(20),                   /*@D6A*/ 06540000
                                                                        06550000
           IP_TOS              Constant(2) ) Fixed(31);    /*@P9C@D6A*/ 06560000
                                                                        06570000
  Dcl 1 ip_mreq Bdy(Word) Based,                              /*3@D6A*/ 06580000
        2 imr_multiaddr Fixed(32),     /* IP multicast addr of group */ 06590000
        2 imr_interface Fixed(32);     /* local IP addr of interface */ 06600000
                                                                        06610000
  /*******************************************************************/ 06620000
  /* Declare IPPROTO_TCP options                                     */ 06630000
  /*******************************************************************/ 06640000
  Dcl Sock#TCP_Nodelay        Fixed(32) Constant(1),      /*    @P4A */ 06650000
      Sock#TCP_KeepAlive      Fixed(32) Constant(8);           /*@P9A*/ 06660000
                                                                        06670000
  /*-----------------------------------------------------------------*/ 06680000
  /* SetIbmSockOpt options                                           */ 06690000
  /*-----------------------------------------------------------------*/ 06700000
  Dcl Sock#So_Bulkmode        Fixed(32) Constant(8000x);  /*    @D5A */ 06710000
  Dcl Sock#So_IgnoreIncomingPush Fixed(32) Constant(1);   /*    @D5A */ 06720000
  Dcl Sock#So_NonBlockLocal    Fixed(32) Constant(8001x), /* RTL @P7A*/ 06730000
      Sock#So_IgnoreSourceVIPA Fixed(32) Constant(2),          /*@P7A   06740000
                        Toggles the use of non-VIPA addresses.  When    06750000
                        enabled, non-VIPA addresses will be used for    06760000
                        outbound IP packets.                     @P7A*/ 06770000
      Sock#So_OptMSS           Fixed(32) Constant(8003x),      /*@P7A   06780000
                   Toggles the use of optimal TCP segment size.         06790000
                   When enabled, the TCP segment size may be optimally  06800000
                   increased on outbound data transfers.  This may      06810000
                   reduce the amount of TCP outbound and inbound        06820000
                   acknowledgement packet processing, therefore,        06830000
                   minimizing CPU consumption.                   @P7A*/ 06840000
      Sock#So_OptAck           Fixed(32) Constant(8004x),      /*@P7A   06850000
                        Optimize Acknowledgments                 @P7A*/ 06860000
      Sock#So_EioIfNewTP       Fixed(32) Constant(0005x);      /*@PAA*/ 06870000
                                                                        06880000
  /*******************************************************************/ 06890000
  /* Declare Constants for on and off when setting options       @PAA*/ 06900000
  /*******************************************************************/ 06910000
  Dcl Sock#So_SetOptionOn     Fixed(32) Constant(1),      /*     @PAA*/ 06920000
      Sock#So_SetOptionOff    Fixed(32) Constant(0);      /*     @PAA*/ 06930000
                                                                        06940000
  /*******************************************************************/ 06950000
  /* Declare Socket Port constant                                    */ 06960000
  /*******************************************************************/ 06970000
  Dcl Sock#LastReservePort    Fixed(16) Constant(1023); /*       @D2A*/ 06980000
                                                                        06990000
