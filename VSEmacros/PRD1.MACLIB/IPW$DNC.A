*%GOTO PLSNCB;                                                          00001490
*/*                                                                     00002000
         MACRO                                                          00003000
&NAME    IPW$DNC &TCP=,&PREFIX=,&DUMMY=DUMMY                   @D65CDHS 00004000
.*                                                                      00005000
.* IBM DISK OPERATING SYSTEM                                            00006000
.* VSE/POWER - 5686-CF7-03                                              00007000
.*                                                                      00008000
.*                                                                      00009000
.*                                                                      00010000
.* IPW$DNC MACRO INSTRUCTION - DEFINE NODE CONTROL BLOCK                00011000
.*                                                                      00012000
         LCLC   &P             DEFINE PREFIX VARIABLE    FIX   @D65CDHS 00013000
         AGO   .ZZZ                                                     00014000
*        LICENSED MATERIALS - PROPERTY OF IBM                           00015000
*        THIS MACRO IS "RESTRICTED MATERIALS OF IBM"                    00016000
*        5686-CF7 (C) COPYRIGHT IBM CORP. 1982, 2000                    00017000
*        SEE COPYRIGHT INSTRUCTIONS                                     00018000
.ZZZ     ANOP                                                           00019000
.* A000000-999999                                              @D03PIPT 00020000
.* INTRODUCTION OF PRIORITY TO-BE-SENT QUEUE                   @D22PIPV 00021000
.* MISCELLANEOUS IMPROVEMENTS                                  @D22DDHS 00022000
.* YEAR 2000 SUPPORT                                           @D61ZDAT 00023000
.* PNET TO PNET CONNECTION FAILS TO SIGNON                     @DA38386 00024000
.* INVALID PNET RESPONSE AFTER CONTENTION                      @DA39795 00025000
.* SETUP TIMER VARIABLE                                        @DA39816 00026000
.* MSG1RD8I ACF/VTAM RESETSR FAILED RC/FDB2=14,13 HANG         @DA41532 00027000
.* KEEP TRYING AFTER OPNDST FAILURE WITH RC/FD=10/02           @DY43611 00028000
.* MSG1Q2CI CC=20 NO PHASE NAME AFTER PSTART PNET              @DY44223 00029000
.* SUPPORT TCP/IP NODE                                         @D65CDHS 00030000
.* YEAR 2000 & LABELLED TAPE SUPPORT FOR VSE/POWER 6.1.2       @DY44177 00031000
.* UNABLE TO PSTOP PNET BSC NODE UNCONDITIONALLY               @DY44846 00032000
.* NEW TERMINATION CODE NCBTTCC FOR CTCA COLISION DETECTED     @DY45240 00033000
.* TCP/IP SEND DEADLOCK:  START RECEIVE BEFORE WAITING TILL    @DPTMH02 00034000
.*  SEND COMPLETE                                              @DPTMH02 00035000
.* RESTART TCP/IP CONNECTION WITH NEW CTC I/O                  PV010222 00036000
.* TCP/IP REISSUE CONNECT AFTER TIMER-INTERVAL                 @DPTMH11 00037000
.* IMPROVE TCP/IP SUPPORT                                      @DPTMH31 00038000
.* CLOSE CONNECTION, IF DATA-LENGTH OF POSTED RECV = 0         @DPTMH17 00039000
.* COLLECTED CHANGES FOR PNET TCP PTF                          @DY45514 00040000
.* IMPROVE RESTART CONNECTION IN CASE OF TCP/IP ERRORS         @DPTMH37 00041000
.* AVOID LOOP IF CANCEL/CLOSE FAILS                            @DPTMH38 00042000
.* AVOID LOOP IF ACTIVE AND PASSIVE CONNECTION FAILS           @DPTMH41 00043000
.* COLLECTED CHANGES FOR PNET TCP PTF                          @DY45584 00044000
.* SUPPORT TCP/IP NODE USING SSL FEATURE                       @D66CDHS 00045000
.* IDENTIFY CLIENT AND SERVER (PV030178)                       @DY45750 00046000
.* PNET SSL - SUPPORT ENCRYPT=NORMAL                           @DY45806 00047000
.* SEND EMPTY BUFFERS TO AVOID TIME-OUTS OF TCP/IP NODES       @DY46067 00048000
.* STOP TCP/IP CONNECTION WHEN CTC ERROR INDICATED (1RC1I)     @DY46322 00049490
.* PSTART PNET WITH 'BTRNC=NO' OPTION PER STARTED NODE         @DY46390 00049690
.*                                                                      00050000
.* *******************************************************************  00051000
.*                                                                   *  00052000
.*  NOTE: TO MAKE PLS MACRO EXPANSION SUCCESSFUL FOLLOW THE          *  00053000
.*        LISTED RULES IN THE ASSEMBLER PART OF THE MACRO:           *  00054000
.*        1- AVOID UNMATCHED APOSTROPHES!                            *  00055000
.*        2- AVOID UNMATCHED PLS COMMENT DELIMETERS!                 *  00056000
.*        3- AVOID USE OF 'PERCENT' AND 'QUESTION MARK'                 00057000
.*                                                                   *  00058000
.* *******************************************************************  00059000
.*                                                                   *  00060000
&P       SETC  'NCB'                    SETUP DEFAULT PREFIX   @D65CDHS 00061000
         AIF   ('&PREFIX' EQ '').NOPRF  PREFIX SPECIFIED?      @D65CDHS 00062000
&P       SETC  '&PREFIX'                USE SPECIFIED PREFIX   @D65CDHS 00063000
.NOPRF   ANOP                                                  @D65CDHS 00064000
         AIF   ('&TCP' EQ 'ONLY').TCP                          @D65CDHS 00065000
         AIF   ('&TCP' EQ 'DSECT').TCP                         @D65CDHS 00066000
         TITLE 'VSE/POWER PNET  -  NODE CONTROL BLOCK'                  00067000
         SPACE 1                                                        00068000
*********************************************************************** 00069000
* * *                                                             * * * 00070000
* * *          NODE CONTROL BLOCK                                 * * * 00071000
* * *                                                             * * * 00072000
*********************************************************************** 00073000
         SPACE 1                                                        00074000
*      A NODE CONTROL BLOCK (NCB) IS CREATED FOR EACH NODE TO           00075000
*      BE STARTED. ALL NCB ARE CHAINED TOGETHER.                        00076000
*      THE POINTER TO THE FIRST NCB IS CONTAINED IN THE PNCB            00077000
         SPACE 1                                                        00078000
NCBDS    DSECT ,                   DEFINE DUMMY SECTION                 00079000
NCBSD    IPW$DSD SECT=NCB,REL=PNET STORAGE DESCRIPTOR                   00080000
NCBNAME  DC    CL8' '              NODE NAME                            00081000
NCBNEXT  DC    A(0)                ADDRESS OF NEXT NCB IN CHAIN         00082000
         DC    A(0)                RESERVED FOR LOCKWORD                00083000
         SPACE 1                                                        00084000
NCBTYP   DS    X'00'               NODE TYPE                            00085000
NCBSNA   EQU   X'80'               .. SNA NODE, IF OFF = BSC NODE       00086000
NCBCTCA  EQU   X'40'               .. CTC ADAPTER              @D23XDAW 00087000
NCBTCP   EQU   X'20'               .. TCP/IP NODE - FOR THIS ..@D65CDHS 00088000
*                                    TYPE 'NCBCTCA' IS SET TOO @D65CDAT 00089000
NCBSSL   EQU   X'10'               .. TCP/IP NODE WITH SSL     @D66CDHS 00090000
*                                    TYPE 'NCBCTCA' IS SET TOO @D66CDHS 00091000
*                                    TYPE 'NCBTCP ' IS NOT SET @D66CDHS 00092000
NCBRSTR  EQU   X'08'               .. ON IF NO RESTART AFTER TIME-OUTS  00093000
NCBACTB  DS    0XL2                ACTION BYTES                         00094000
NCBACT1  DC    X'00'               ACTION BYTE 1                        00095000
NCBDTCH  EQU   X'80'               .. TASK DETACH REQUESTED             00096000
NCBTCRQ  EQU   X'40'               .. TASK CREATION REQUESTED           00097000
NCBLNSR  EQU   X'20'               .. LINE STOP REQUESTED               00098000
NCBFREE  EQU   X'10'               .. NCB FREE REQUESTED (SNA)          00099000
NCBINIT  EQU   X'08'               .. LINE START REQUESTED              00100000
NCBIPEND EQU   X'04'               .. INIT PENDING CTCA ONLY   @D23XDAW 00101000
NCBREACT EQU   X'02'               .. RESTART ACTIVITY         @DY44223 00102000
NCBTPEND EQU   X'01'               .. INIT PENDING TCP/IP ONLY @DPTMH31 00103000
NCBACT2  DC    X'00'               ACTION BYTE 2                        00104000
NCBSGNR  EQU   X'80'               .. SIGNON PROCEDURE REQUESTED        00105000
NCBSOFR  EQU   X'40'               .. SIGNOFF PROCESSING RQSTD          00106000
NCBLCLS  EQU   X'20'               .. LINE CLOSE PROCESSING REQUEST.    00107000
*              X'10'               .. NOT USED                          00108000
NCBSEND  EQU   X'08'               .. BUFFER READY TO SEND              00109000
*              X'04'               .. NOT USED                          00110000
NCBRCVR  EQU   X'02'               .. RECEIVE REQUESTED (SNA)           00111000
*              X'01'               .. RESERVED                          00112000
NCBPROC  DC    X'00'               PROCESS BYTE                         00113000
NCBPSGN  EQU   X'80'               .. SIGNON IN PROCESS                 00114000
NCBPRST  EQU   X'40'               .. AUTOMATIC RESTART IN PROCESS      00115000
*              X'20'               .. NOT USED                          00116000
NCBTRCE  EQU   X'10'               .. LINE TRACE MODE                   00117000
*              X'08'               .. NOT USED                          00118490
NCBDLAY  EQU   X'04'               .. DELAYED RESPONSE IN PROCESS       00119000
NCBFLG1  DC    X'00'               STATUS BYTE 1 (NODE)                 00120000
NCBSGNOC EQU   X'80'               .. SIGNON COMPLETED                  00121000
NCBSGOP1 EQU   X'40'               .. PART1 OF SIGN-ON PROCESS FINISHED 00122000
NCBSGNOS EQU   X'20'               .. SIGNON RECORD OUT OF SEQUENCE     00123000
NCBSGNR1 EQU   X'08'               .. SIGNON PROCEDURE 1                00124000
NCBSGNR2 EQU   X'04'               .. SIGNON PROCEDURE 2                00125000
NCBSGOP2 EQU   X'02'               .. PART2 OF SIGN-ON FINISHD @D65CDHS 00126000
NCBFLG2  DC    X'00'               STATUS BYTE 2                        00127000
NCBNSCLN EQU   X'08'               .. NSEXIT DRIVEN (CLEANUP)  @DA41532 00128000
NCBCTCR  EQU   X'04'               CTC RESTART FLAG            @D23XDAW 00129000
NCBWRDI  EQU   X'02'               RESTART BECAUSE WRONG MEMBER DIALED  00130000
NCBWACT  EQU   X'01'               WRITE STATISTIC AND ACCOUNT RECORD   00131000
NCBFLG3  DC    X'00'               FLAG BYTE 3                 @DY46390 00132590
NCBF3NBT EQU   X'80'               .. NO PNET BLANK TRUNCATION @DY46390 00133180
NCBTTC   DC    X'00'               TERMINATION CODE                     00134000
NCBTTCV  EQU   X'80'               .. STOP DUE TO VTAM ABEND (SNA)      00135000
NCBTTCL  EQU   X'40'               .. STOP DUE TO LINE/SESSION ERROR    00136000
NCBTTCO  EQU   X'20'               .. STOP DUE TO SIGNOFF RCVD (BSC)    00137000
NCBTTCS  EQU   X'10'               .. STOP IMMEDIATE                    00138000
NCBTTCE  EQU   X'08'               .. STOP AT EOJ                       00139000
NCBTTCF  EQU   X'04'               .. STOP IMMEDIATE,FORCE     @DY44846 00140000
NCBTTCC  EQU   X'02'               .. STOP DUE CTCA COLISION   @DY45240 00141000
NCBTTCDE DC    X'00'               ERROR SUB-CODE                       00142000
NCBTTSTQ DC    X'00'               STOP QUALIFIER FOR NCBTTCS/NCBTTCE   00143000
NCBPHALT EQU   X'80'               .. PNET HALTS NODE DUE TO ERROR      00144000
NCBVHALT EQU   X'40'               .. VTAM REQUESTED NODE STOP AT EOJ   00145000
NCBRHALT EQU   X'20'               .. REMOTE VTAM NODE REQUESTED EOJ    00146000
NCBOHALT EQU   X'10'               .. OPERATOR STOP PSTOP/PEND @DA41532 00147000
NCBSHALT EQU   X'08'               .. HALT - SEVERE LOGIC ERROR@DY44223 00148000
         SPACE 1                                                        00149000
NCBCNRV  DC    AL2(0)              CURR. NUMBER OF RECEIVERS ACTIVE     00150000
NCBCNTR  DC    AL2(0)              CURR. NUMBER OF TRANSMITTERS ACTIVE  00151000
NCBMNRV  EQU   7                   .. MAX NUMBER OF RECEIVERS           00152000
NCBMNTR  EQU   7                   .. MAX NUMBER OF TRANSMITTERS        00153000
         DC    AL2(0)              PADDING BYTES                        00154000
         SPACE 2                                                        00155000
*     THE FOLLOWING TABLE DEFINES THE TASK ENTRIES FOR THE              00156000
*     COMMAND / MESSAGE     TRANSMITTER RECEIVER (CONSOLE TR/RV)        00157000
*     ALL TABLES MUST BE ADJACENT .                                     00158000
         SPACE 1                                                        00159000
NCBCONST DC    XL8'00'             CONSOLE TRANSMITTER TASK             00160000
NCBCONSR DC    XL8'00'             CONSOLE RECEIVER TASK                00161000
         SPACE 2                                                        00162000
*        THE FOLLOWING TABLES DEFINE THE TASK ENTRIES FOR THE           00163000
*        TRANSMITTERS.                                                  00164000
         SPACE 1                                                        00165000
NCBJTTB  DC    XL(NCBMNTR*8)'00'   JOB TRANSMITTER TABLE                00166000
NCBOTTB  DC    XL(NCBMNTR*8)'00'   OUTPUT TRANSMITTER TABLE             00167000
         SPACE 1                                                        00168000
*        THE FOLLOWING TWO TABLES DEFINE THE VARIOUS TASK ENTRIES       00169000
*        FOR THE RECEIVERS.                                             00170000
         SPACE 1                                                        00171000
NCBJRTB  DC    XL(NCBMNRV*8)'00'   JOB RECEIVER TABLE                   00172000
NCBORTB  DC    XL(NCBMNRV*8)'00'   OUTPUT RECEIVER TABLE                00173000
         SPACE 1                                                        00174000
NCBMSGA  DC    A(0)                POINTER TO FIRST MSG/CMND IN QUEUE   00175000
NCBMSGT  DC    A(0)                MSG/CMND QUEUE TAIL POINTER          00176000
         SPACE 1                                                        00177000
NCBNBFRQ DC    A(0)                PTR TO SIGNON RECORD RECEIVED        00178000
         SPACE 2                                                        00179000
*              BUFFER CONTROL FIELDS                                    00180000
         SPACE 1                                                        00181000
NCBIFRE  DC    A(0)                ADDR OF FREE INPUT BUFFER QUEUE      00182000
NCBOTBS  DC    A(0)                ADDR TO-BE-SENT QUEUE (NO PRIORITY)  00183000
NCBOBTL  DC    A(0)                TAIL PTR TO-BE-SENT QUEUE (NO PRI.)  00184000
NCBOTBP  DC    A(0)                HEAD PTR PRIORITY BUFFER Q  @D22PIPV 00185000
NCBOBTP  DC    A(0)                TAIL PTR PRIORITY OUTPUT Q  @D22PIPV 00186000
NCBLBFI  DC    A(0)                LINE DRIVER BUFFER (BSC/CTC)         00187000
NCBLBFO  DC    A(0)                LINE DRIVER BUFFER (BSC/CTC)         00188000
         SPACE 1                                                        00189000
NCBBFSZ  DC    AL2(400)            PNET BUFFER SIZE                     00190000
NCBMNIB  DC    AL1(0)              MAX. NO OF INPUT BUFFERS             00191000
NCBMNJB  DC    AL1(0)              MAX. NO OF JOB/OUT XMIT BUFFERS      00192000
NCBNIBU  DC    AL2(0)              NUMBER OF ACQUIRED INPUT BUFFERS     00193000
         DC    AL2(0)              PADDING BYTES                        00194000
         SPACE 2                                                        00195000
*        I/O AND SEND/RECEIVE MANAGER FIELDS                            00196000
         SPACE 1                                                        00197000
NCBIBUF  DC    A(0)                ADDR OF NON-LINE I-BFR (BSC/CTC)     00198000
NCBOBUF  DC    A(0)                ADDR OF NON-LINE O-BFR (BSC/CTC)     00199000
NCBCBFI  DC    A(0)                ADDR OF BUFFER FOR ACTUAL RECEIVE    00200000
NCBCBFO  DC    A(0)                ADDR OF BUFFER FOR ACTUAL SEND       00201000
*                                                                       00202000
NCBRFCS  DC    XL2'00'             REMOTE HELD/RELEASED STREAM STATUS   00203000
NCBTFCS  DC    XL2'00'             NEW HELD/RELEASED STREAM STATUS      00204000
NCBFCSWB EQU   X'40'               WAIT-A-BIT                  @D65CDHS 00205000
*                                  .. (SUSPENDED ALL STREAMS)  @D65CDHS 00206000
*                                                                       00207000
*        QUEUE HEADER FOR 'PARKED' BUFFERS                              00208000
*                                                                       00209000
NCBPBFRQ DC    A(0)                HEADER OF SUSPENDED BUFFERS          00210000
         SPACE 1                                               @D65CDHS 00211000
NCBNDTEN DC    A(0)                ADDR OF NDT ENTRY           @D65CDHS 00212000
         SPACE 1                                               @D65CDHS 00213000
         DC    A(0)                RESERVED                    @D65CDHS 00214000
         DC    A(0)                RESERVED                    @D65CDHS 00215000
         DC    A(0)                RESERVED                    @D65CDHS 00216000
         EJECT 1                                               @D65CDHS 00217000
*                                                                     * 00218000
*        START OF BSC/CTC SECTION                                     * 00219000
*                                                                     * 00220000
*        LINE AND SESSION RELATED FIELDS                              * 00221000
         SPACE 1                                                        00222000
* THE FIELDS CONTAIN THE INFORMATION ON THE STATUS OF THE LINK          00223000
* BEING USED FOR SEND/RECEIVE, I.E. THE SNA SESSION RESPECTIVELY        00224000
* THE BSC LINE. AS A NODE CAN BE ONE OR THE OTHER THIS FIELD IS         00225000
* AN OVERLAY.                                                           00226000
         SPACE 2                                                        00227000
NCBLCB   DS    0D                  START OF CONTROL BLOCK OVERLAY       00228000
         SPACE 1                                                        00229000
*********************************************************************** 00230000
*        BSC CTC LINE CONTROL INFORMATION                             * 00231000
*********************************************************************** 00232000
         SPACE 1                                                        00233000
NCBPUBA  DC    A(0)                ADDR OF RELATED PUB ENTRY FOR CUU    00234000
NCBEBCB  DC    X'00'               EXPECTED BCB (BSC)                   00235000
NCBTBCB  DC    X'00'               TRANSMITTED BCB (BSC)                00236000
NCBREQF  DC    X'00'               REQUEST FIELD FOR I/O MANAGER        00237000
NCBLREQ  DC    X'00'               LAST SENT REQUEST                    00238000
NCBNNAK  DC    X'00'               LAST SENT NON NAK REQUEST            00239000
NCBLDRQ  DC    X'00'               LAST REQUEST BY LINE-DRIVER          00240000
NCBIOF1  DC    X'00'               FLAG BYTE FOR I/O MGR/LDR COMMUN.    00241000
NCBIOBF  EQU   X'80'               .. BUFFER TO ACKNOWLEDGE             00242000
NCBTERM  EQU   X'40'               .. STOP I/O FOR LINE                 00243000
NCBBCBL  EQU   X'20'               .. BCB NOT TO BE UPDATED             00244000
*                                                                       00245000
NCBTOCT  DC    X'00'               TIMEOUT COUNT FOR SWITCHED LINES     00246000
*                                  (PRE-SIGNON)                         00247000
NCBRTRY  DC    X'00'               RETRY COUNT FOR UNIT CHECK (MAX 30)  00248000
NCBRCNT  DC    X'00'               RETRY COUNT                          00249000
NCBTIMC  DC    X'00'               TIME OUT COUNT                       00250000
NCBLFB1  DC    X'00'               FLAG BYTE 1                          00251000
NCBF1BY  EQU   X'80'               .. LINE BUSY                         00252000
NCBF1SEC EQU   X'40'               .. REMOTE NODE IS SECONDARY @DA38386 00253000
NCBF1CON EQU   X'20'               .. CONTENTION DETECTED      @DA39795 00254000
NCBF1CUE EQU   X'10'               .. CONTENTION DETECTED BY   @DA39795 00255000
*                                  UNIT EXCEPTION HANDLER.     @DA39795 00256000
NCBF1FPR EQU   X'08'               .. FORCE PRIMARY            @DA39795 00257000
NCBLFB2  DC    X'00'               FLAG BYTE 2                          00258000
NCBF2IN  EQU   X'80'               .. LINE INITIALIZED                  00259000
         DS    0XL2                ALIGN                       @D23XDAW 00260000
         DC    X'00'               UNUSED                      @D23XDAW 00261000
NCBINTC  DC    X'00'               CTCT INIT NO OF 1.5 MIN TIME         00262000
*                                  .. OUTS                     @D23XDAW 00263000
NCBCTCCB DC    X'00'               CTC COMMAND BYTE            @D23XDAW 00264000
         SPACE 2                                                        00265000
*        THE FOLLOWING FIELDS REPRESENT THE LINE BLOCK ENTRY            00266000
*        AS SPECIFIED IN THE PLINE MACRO FOR THE ASSOCIATED CUU.        00267000
         SPACE 1                                                        00268000
NCBPLINE DS    0F                                                       00269000
         PLINE ADDR=NCB            DEFINE LINE BLOCK                    00270000
         SPACE 3                                                        00271000
*---------------------------------------------------------------------- 00272000
*              CCB AND CCW'S AND TEMPORARY WORKAREA                   * 00273000
*---------------------------------------------------------------------- 00274000
         SPACE 1                                                        00275000
         DS    XL4                 ALIGN                                00276000
NCBCCB   DC    XL24'00'            NJE CCB                              00277000
         SPACE 1                                                        00278000
NCBCCW   DC    5D'0'               CHANNEL PROGRAM                      00279000
NCBLCCW  DC    F'0'                ADDRESS OF LAST EXECUTED CCW         00280000
         SPACE 1                                                        00281000
NCBDISP  DC    F'0'                DISPL BETWEEN REAL - VIRTUAL OF NCB  00282000
         SPACE 1                                                        00283000
NCBSENS  DS    0XL2                SENSE BYTES                          00284000
NCBSNS1  DC    X'00'               FIRST SENSE BYTE                     00285000
NCBSNS2  DC    X'00'               SECOND SENSE BYTE                    00286000
NCBSNSLA DC    XL2'00'             SENSE BYTES OF LAST I/O              00287000
         SPACE 1                                                        00288000
NCBBSCE  EQU   *                   END OF BSC PART                      00289000
         SPACE 3                                                        00290000
*********************************************************************** 00291000
*        SNA SESSION CONTROL INFORMATION                              * 00292000
*********************************************************************** 00293000
         SPACE 1                                                        00294000
         ORG   NCBLCB              OVERLAY BSC PART                     00295000
NCBAPLID DC    CL8' '              APPL-ID OF REMOTE NODE               00296000
NCBSSCB  DC    A(0)                ADDRESS OF SSCB                      00297000
NCBSRQE  DC    A(0)                ADDRESS OF SRQE                      00298000
NCBCTCB1 DC    A(0)                ADDR. CONNECT SESSION TCB LOCAL      00299000
NCBCTCB2 DC    A(0)                ADDR. CONNECT SESSION TCB REMOTE     00300000
NCBDTCB  DC    A(0)                ADDRESS OF DISCONNECT SESSION TCB    00301000
NCBDECB  DC    A(0)                ECB OF DISCONNECT TASK               00302000
NCBIFREX DC    A(0)                ADDR 'RECEIVE-AHEAD' IPT BFR QUEUE   00303000
NCBOTBSX DC    A(0)                ADDR 'SEND-AHEAD' OUTPUR BFR QUEUE   00304000
NCBOBTLX DC    A(0)                TAIL PTR 'SEND-AHEAD' OUTPUT BFR Q   00305000
NCBWRKA  DC    A(0)                ADDR WORK AREA FOR DE-COM/COMPRESS   00306000
         SPACE 1                                                        00307000
NCBSGTE  DC    AL1(0)              GATE FOR SEND PER NODE               00308000
NCBRGTE  DC    AL1(0)              GATE FOR RECEIVE PER NODE            00309000
         SPACE 1                                                        00310000
NCBGTIPR EQU   255                 GATE IN PROGRESS (RETURN-CODE)       00311000
*---------------------------------------------------------------------- 00312000
*         SESSION STATUS                                                00313000
*---------------------------------------------------------------------- 00314000
         SPACE 1                                                        00315000
NCBSFL1  DC    X'00'               PRIMARY AP                           00316000
NCBF11   EQU   X'80'               .. PRIMARY IN PROGRESS               00317000
NCBF12   EQU   X'40'               .. PRIMARY PERMIT GIVEN              00318000
NCBF13   EQU   X'20'               .. OPNDST IN PROGRESS                00319000
NCBF14   EQU   X'10'               .. OPNDST COMPLETE                   00320000
NCBF15   EQU   X'08'               .. PRIMARY COMPLETE                  00321000
NCBF18   EQU   X'01'               .. PRIMARY AP ERROR                  00322000
         SPACE 1                                                        00323000
NCBSFL2  DC    X'00'               SECONDARY AP                         00324000
NCBF21   EQU   X'80'               .. SECONDARY IN PROGRESS             00325000
NCBF22   EQU   X'40'               .. SECONDARY PERMIT GIVEN            00326000
NCBF23   EQU   X'20'               .. OPNSEC IN PROGRESS                00327000
NCBF24   EQU   X'10'               .. OPNSEC COMPLETE                   00328000
NCBF25   EQU   X'08'               .. SECONDARY COMPLETE                00329000
NCBF26   EQU   X'04'               .. SESSION IN PROGRESS               00330000
NCBSEOK  EQU   X'02'               .. DISCONNECT REQUIRED               00331000
NCBF28   EQU   X'01'               .. SECONDARY AP ERROR                00332000
         SPACE 1                                                        00333000
NCBSFL3  DC    X'00'               TYPE OF SESSION                      00334000
*        EQU   X'FF'               .. SECONDARY HALF SESSION            00335000
*        EQU   X'00'               .. PRIMARY HALF SESSION              00336000
         SPACE 1                                                        00337000
NCBSFL4  DC    X'00'               FLAG BYTE 4 :                        00338000
NCBRSHTS EQU   X'80'               .. RSHUTD SENT                       00339000
NCBRSHTR EQU   X'40'               .. RSHUTD RECEIVED                   00340000
         SPACE 1                                                        00341000
NCBSEST  DC    X'00'               SESSION STATUS BYTE :                00342000
NCBSSUB  EQU   X'80'               .. UNBIND RECEIVED                   00343000
NCBSSTS  EQU   X'40'               .. TERMSESS IS WAITING               00344000
NCBWSDT  EQU   X'20'               .. WAIT FOR SDT                      00345000
NCBSSSD  EQU   X'10'               .. SDT RECEIVED                      00346000
NCBSSCL  EQU   X'08'               .. CLEAR RECEIVED                    00347000
NCBSHTC  EQU   X'04'               .. WAIT FOR SHUTC           @D22DDHS 00348000
         SPACE 1                                                        00349000
NCBSSCT  DC    X'00'               SESSION RETRY COUNTER       @D22DDHS 00350000
NCBSSCTL EQU   X'02'               20 MINUTES LIMIT COUNT      @DA33555 00351000
         SPACE 1                                                        00352000
NCBSSF1  DC    X'00'               SESSION FLAG BYTE           @D22DDHS 00353000
NCBSSF1W EQU   X'80'               .. ISSUE WAIT               @D22DDHS 00354000
NCBSSF1R EQU   X'40'               .. USE RC/FD FOR MSG        @DY43611 00355000
         SPACE 1                                                        00356000
         DC    XL3'00'             NOT USED                    @DA33141 00357000
NCBCMPT  DC    A(0)                COMPACTION TABLE BLOCK ADDR.@DA33141 00358000
         SPACE 1                                                        00359000
*        END SNA OVERLAY                                                00360000
         SPACE 1                                                        00361000
         ORG   NCBBSCE             FOLLOWING IS COMMON AGAIN            00362000
NCBCPWD  DC    CL8' '              PASSWORD FOR LOCAL NODE (OUTGOING)   00363000
NCBCLPW  DC    CL8' '              PASSWORD FOR LINE (OUTGOING)         00364000
NCBLCTL  EQU   64                  LENGTH OF LINE/CTL BUFFERS           00365000
         SPACE 3                                                        00366000
*********************************************************************** 00367000
*        ACCOUNT RECORD                                               * 00368000
*********************************************************************** 00369000
         SPACE 1                                                        00370000
NCBACCT  DS    0F                  PNET ACCOUNT RECORD                  00371000
NCBDATE  DC    CL8'MM/DD/YY'       SYSTEM DATE                          00372000
NCBSION  DC    CL4' '              SIGNON TIME  (0HHMMSSF) PACKED       00373000
NCBSIOF  DC    CL4' '              SIGNOFF TIME  (0HHMMSSF) PACKED      00374000
NCBUSER  DS    0CL24               USER INFORMATION                     00375000
NCBANME  DC    CL8' '              NODE NAME FOR ACCOUNT RECORD         00376000
NCBPWRD  DC    CL8' '              NODE PASSWORD                        00377000
NCBPSWD  DC    CL8' '              LINE PASSWORD                        00378000
NCBICNT  DC    H'0'                INVALID RESPONSES PER SESSION        00379000
NCBRCID  DC    C'N'                PNET ACCOUNT RECORD IDENTIFIER       00380000
NCBSCOD  DC    X'00'               SIGNOFF CODE                         00381000
*        EQU   X'80'               .. SIGNOFF BY OPERATOR               00382000
*        EQU   X'40'               .. SIGNOFF BY REMOTE NODE            00383000
*        EQU   X'20'               .. SIGNOFF DUE TO TIMEOUT            00384000
*        EQU   X'10'               .. SIGNOFF DUE TO LINK ERROR/SESSION 00385000
*        EQU   X'08'               .. SIGNOFF DUE TO INTERNAL ERROR     00386000
*        EQU   X'04'               .. SIGNOFF DUE VTAM TERMINATION      00387000
*        EQU   X'02'               .. SIGNOFF DUE VTAM HALTED BY OPER.  00388000
*        EQU   X'01'               .. YEAR NCBSFDT IS 20YY     @D61ZDAT 00389000
         SPACE 1                                                        00390000
NCBTERR  DC    X'00'               ERROR COUNT                          00391000
NCBDVAD  DC    CL3'CUU'            DEV ADDR/'SNA'/'TCP'/'SSL'  @D6SCDHS 00392000
         SPACE 1                                                        00393000
NCBXCNT  DC    AL4(0)              TRANSMISSION COUNT                   00394000
NCBTCNT  DC    H'0'                TIMEOUT COUNT                        00395000
NCBECNT  DC    H'0'                ERROR COUNT                          00396000
         ORG   NCBTCNT                                                  00397000
NCBYCNT  DC    AL4(0)              RECEIVE COUNT                        00398000
NCBSFDT  DC    CL8'MM/DD/YY'       SIGNOFF DATE                         00399000
         SPACE 1                                                        00400000
NCBACLN  EQU   *-NCBACCT           LENGTH OF ACCOUNT RECORD             00401000
         EJECT                                                          00402000
         SPACE 1                                                        00403000
*********************************************************************** 00404000
*              TIMER QUEUE ELEMENT                                    * 00405000
*********************************************************************** 00406000
         SPACE 1                                                        00407000
NCBTQE   DS    0XL24               TIMER QUEUE ELEMENT                  00408000
         DC    XL12'00'            NOT REFERENCED                       00409000
NCBEB    DC    XL4'00'             POST BYTES                           00410000
         DC    XL8'00'             NOT REFERENCED                       00411000
         SPACE 3                                                        00412000
*********************************************************************** 00413000
*              EBCDIC / USASCII CODE TABLE                            * 00414000
*********************************************************************** 00415000
         SPACE 1                                                        00416000
NCBSOHS  DS    XL2                 SOH ENQ SEQUENCE                     00417000
NCBSOTS  DS    XL2                 START OF TEXT SEQUENCE               00418000
NCBACKS  DS    XL2                 POSITIVE ACKNOWLEDGEMENT SEQUENCE    00419000
NCBETBS  DS    0XL2                DLE ETB SEQUENCE                     00420000
NCBEDLE  DS    XL1                 DLE                                  00421000
NCBEETB  DS    XL1                 ETB                                  00422000
NCBNAKS  DS    X                   NEGATIVE ACKNOWLEDGEMENT SEQUENCE    00423000
         DC    XL3'0'              NOT USED                    @D22DDHS 00424000
         SPACE 3                                                        00425000
*********************************************************************** 00426000
*              FEATURE FLAGS USED FOR SIGNON CONCURRENCE              * 00427000
*********************************************************************** 00428000
         SPACE 1                                                        00429000
NCBIFEAT DS    0XL4                NEW FEATURE FLAGS           @D22DDHS 00430000
NCBIFE1  DC    X'0'                NEW FEATURE FLAG 1          @D22DDHS 00431000
NCBIPREP EQU   X'80'               .. PREPARE MODE             @D22DDHS 00432000
NCBITRM  EQU   X'40'               .. SNA TERMINATION EXTENS.  @D22DDHS 00433000
NCBIFE2  DC    X'0'                NEW FEATURE FLAG 2          @D22DDHS 00434000
NCBIFE3  DC    X'0'                NEW FEATURE FLAG 3          @D22DDHS 00435000
NCBIFE4  DC    X'0'                NEW FEATURE FLAG 4          @D22DDHS 00436000
NCBPFEAT DC    XL4'0'              WORKING  FEATURE FLAGS      @D22DDHS 00437000
NCBRFEAT DC    XL4'0'              RECEIVED FEATURE FLAGS      @D22DDHS 00438000
NCBSFEAT DC    XL4'0'              SENT     FEATURE FLAGS      @D22DDHS 00439000
NCBIOT   DS    D                   CTC/BSC TIME OF LAST I/O    @D23XDAW 00440000
*********************************************************************** 00441000
         EJECT 1                                               @D65CDHS 00442000
*********************************************************************** 00443000
*                                                                     * 00444000
*              TCP/IP WORKAREA ONLY USED WITHIN NCB            @D65CDHS 00445000
*                                                                     * 00446000
*********************************************************************** 00447000
         SPACE 1                                               @D65CDHS 00448000
&P.TCPDS DS    0H                  AREAS USED FOR TCP/IP       @D65CDHS 00449000
&P.TPBF1 DC    A(0)                ADDR OF RECV BUFFER 1       @D65CDHS 00450000
&P.TPBL1 DC    F'0'                LENGTH OF BUFFER 1          @D65CDHS 00451000
&P.TPTIS DC    F'0'                TIMESTAMP TCP/IP PENDING    @DPTMH31 00452000
&P.TPTER DC    F'0'                TIMESTAMP OF LAST ERROR     @DPTMH37 00453000
&P.TPTSC DC    F'0'                TIMESTAMP FOR START CONTACT @DPTMH41 00454000
         SPACE 1                                               @D65CDHS 00455000
         DC    F'0'                RESERVED                    @D65CDHS 00456000
         EJECT 1                                               @D65CDHS 00457000
.TCP     ANOP                                                  @D65CDHS 00458000
         AIF   ('&TCP' NE 'DSECT').TCPTI1                      @D65CDHS 00459000
         TITLE 'VSE/POWER (PNET)  -  TCP/IP WORKAREA'          @D65CDHS 00460000
         AGO   .TCPTIT                                         @D65CDHS 00461000
.TCPTI1  ANOP                                                  @D65CDHS 00462000
         AIF   ('&PREFIX' NE 'TDN').TCPTI2                     @D65CDHS 00463000
         TITLE 'VSE/POWER (PNET)  -  TDCB: TCP/IP WORKAREA'    @D65CDHS 00464000
         AGO   .TCPTIT                                         @D65CDHS 00465000
.TCPTI2  ANOP                                                  @D65CDHS 00466000
         TITLE 'VSE/POWER (PNET)  -  NCB: TCP/IP WORKAREA'     @D65CDHS 00467000
.TCPTIT  ANOP                                                  @D65CDHS 00468000
*********************************************************************** 00469000
*                                                                     * 00470000
*              TCP/IP WORKAREA USED WITHIN NCB AND TDCB        @D65CDHS 00471000
*                                                                     * 00472000
*********************************************************************** 00473000
         SPACE 1                                               @D65CDHS 00474000
         AIF   ('&TCP' EQ 'DSECT').TCPDS                       @D65CDHS 00475000
&P.TPDS  DS    0H                                              @D65CDHS 00476000
         AGO   .TCPDS1                                         @D65CDHS 00477000
.TCPDS   ANOP                                                  @D65CDHS 00478000
&P.TPDS  DSECT ,                   DUMMY SECTION DEFINITION    @D65CDHS 00479000
.TCPDS1  ANOP                                                  @D65CDHS 00480000
&P.TPIPC DC    CL15' '             IP-ADDR IN READABLE FORMAT  @D65CDHS 00481000
         SPACE 1                                               @D65CDHS 00482000
&P.TPTYP DC    CL1' '              TYPE OF ITP WORKAREA        @D65CDHS 00483000
&P.TPTYA EQU   C'A'                .. A = ACTIVE  = NCB        @D65CDHS 00484000
&P.TPTYT EQU   C'P'                .. P = PASSIVE = TDCB       @D65CDHS 00485000
&P.TPTYC EQU   C'C'                .. C = CLIENT, WA IN NCB    PV030178 00486000
&P.TPTYS EQU   C'S'                .. S = SERVER, WA IN NCB    PV030178 00487000
         SPACE 1                                               @D65CDHS 00488000
*********************************************************************** 00489000
*        START OF AREA-1 TO BE TRACED                                 * 00490000
*********************************************************************** 00491000
         SPACE 1                                               @D65CDHS 00492000
&P.TPTC1 DS    0XL36               START OF TRACED INFO 1      @D65CDHS 00493000
         SPACE 1                                               @D65CDHS 00494000
&P.TPST1  DC    XL1'00'            TCP/IP STATUS BYTE 1:       @D65CDHS 00495000
*        GENERAL TCP/IP STATUS, SOCKETCALL STATUS              @D65CDHS 00496000
&P.TPS1T EQU   X'80'               .. TCP/IP INIT CONTACT COMPL@D65CDHS 00497000
&P.TPS1F EQU   X'40'               .. TCP/IP CONN. CLOSED      @D65CDHS 00498000
&P.TPS1R EQU   X'20'               .. TCP/IP RESTART: NAK-3    @D65CDHS 00499000
&P.TPS1E EQU   X'10'               .. TCP/IP LINE ERROR        @D65CDHS 00500000
&P.TPS1A EQU   X'08'               .. PROCESSING ACTIVE MODE   @D65CDHS 00501000
&P.TPS1I EQU   X'04'               .. 1.SOCKETCALL ISSUED      @D65CDHS 00502000
&P.TPS1L EQU   X'02'               .. SSL FEATURE INITIATED    @D65CDHS 00503000
&P.TPS1S EQU   X'01'               .. STOP CONNECTION          @D65CDHS 00504000
         SPACE 1                                               @D65CDHS 00505000
&P.TPST2 DC    XL1'00'             TCP/IP STATUS BYTE 2        @D65CDHS 00506000
*        GENERAL NODE STATUS                                   @D65CDHS 00507000
&P.TPS2I EQU   X'80'               .. CTC I/O ONCE PROCESSED   @DPTMH02 00508000
&P.TPS2R EQU   X'40'               .. RESTART TCP/IP           PV010222 00509000
&P.TPS2B EQU   X'20'               .. FIRST COMES TTB          @D65CDHS 00510000
&P.TPS2C EQU   X'10'               .. CLOSE CONNECTION         @D65CDHS 00511000
&P.TPS2O EQU   X'08'               .. OPEN-CTRL-REC. RECEIVED  @D65CDHS 00512000
&P.TPS2A EQU   X'04'               .. ACK-CTRL-REC. SENT       @D65CDHS 00513000
&P.TPS22 EQU   X'02'               .. NAK WITH RC=2 SENT       @D65CDHS 00514000
&P.TPS2W EQU   X'01'               .. WAIT THAT REMOTE ISSUES  @D65CDHS 00515000
*                                  .. .. CONNECT               @D65CDHS 00516000
         SPACE 1                                               @D65CDHS 00517000
&P.TPST3 DC    XL1'00'             TCP/IP STATUS BYTE 3        @D65CDHS 00518000
*              STATUS: CTC I/O                                 @D65CDHS 00519000
&P.TPS3S EQU   X'80'               .. CTC I/O STARTED          @D65CDHS 00520000
&P.TPS3C EQU   X'40'               .. CTC I/O TO BE COMPLETED  @D65CDHS 00521000
&P.TPS3Z EQU   X'20'               .. CCW-WRITE DATA SENT      @D65CDHS 00522000
&P.TPS3Y EQU   X'10'               .. CCW-READ  DATA RECVED    @D65CDHS 00523000
&P.TPS3B EQU   X'08'               .. CTC I/O WITHOUT BUFFER   @D65CDHS 00524000
&P.TPS3N EQU   X'04'               .. TCP BLOCK PARTLY RCVED   @D65CDHS 00525000
&P.TPS3L EQU   X'02'               .. LEAVE IDLING STATE       @D65CDHS 00526000
&P.TPS3I EQU   X'01'               .. IDLING(NOTHING SENT/RCV) @D65CDHS 00527000
         SPACE 1                                               @D65CDHS 00528000
&P.TPST4 DC    XL1'00'             TCP/IP STATUS BYTE 4        @D65CDHS 00529000
*              STATUS: MISCELLANEOUS                           @D65CDHS 00530000
&P.TPS4P EQU   X'80'               .. WAIT FOR POSTED ECB      @D65CDHS 00531000
&P.TPS4C EQU   X'40'               .. CONNECTION CLOSED        @D65CDHS 00532000
&P.TPS4T EQU   X'20'               .. TERMINATE LINE           @D65CDHS 00533000
&P.TPS4W EQU   X'10'               .. WAIT TILL TIME EXPIRED   @D65CDHS 00534000
&P.TPS4A EQU   X'08'               .. CANCEL ISSUED            @D65CDHS 00535000
&P.TPS4L EQU   X'04'               .. CLOSE ISSUED             @D65CDHS 00536000
&P.TPS4N EQU   X'02'               .. SOK NUMBER TOO HIGH (SSL)@D66CDHS 00537000
&P.TPS4E EQU   X'01'               .. SEND EMPTY BUFFER        @DY46067 00538000
         SPACE 1                                               @D65CDHS 00539000
&P.TPST5 DC    XL1'00'             TCP/IP STATUS BYTE 5:       @D65CDHS 00540000
*        CLOSING CODES, CLOSED DUE TO:                         @D65CDHS 00541000
&P.TPS5U EQU   X'80'               .. SIGNOFF REC. SEND        @D65CDHS 00542000
&P.TPS5R EQU   X'40'               .. SIGNOFF REC. RECEIVED    @D65CDHS 00543000
&P.TPS5A EQU   X'20'               .. INVALID DEFINITION       @D65CDHS 00544000
&P.TPS5N EQU   X'10'               .. TCP NJE NAK RECEIVED     @D65CDHS 00545000
&P.TPS58 EQU   X'08'               .. CAUSED BY TCP/IP RC=8    @D65CDHS 00546000
&P.TPS5C EQU   X'04'               .. CAUSED BY TCP/IP RC=12   @D65CDHS 00547000
&P.TPS5I EQU   X'02'               .. POWER INTERNAL ERROR     @D65CDHS 00548000
&P.TPS5S EQU   X'01'               .. CAUSED BY REMOTE CLOSED  @DPTMH17 00549000
         SPACE 1                                               @D65CDHS 00550000
&P.TPST6 DC    XL1'00'             TCP/IP STATUS BYTE 6:       @D65CDHS 00551000
&P.TPS6T EQU   X'80'               .. TRACE SOCKETCALL         @D65CDHS 00552000
&P.TPS6I EQU   X'40'               .. INIT TIME INTERVAL       @DPTMH11 00553000
&P.TPS6C EQU   X'20'               .. SSL-SOK-INIT: CIPH WRONG @DY45806 00554000
         SPACE 1                                               @D65CDHS 00555000
&P.TPRV1 DC    XL1'00'             RESERVED                    @D65CDHS 00556000
&P.TPRV2 DC    XL1'00'             RESERVED                    @D65CDHS 00557000
         SPACE 1                                               @D65CDHS 00558000
*********************************************************************** 00559000
*        RETURN ADDRESSES FOR SOCKETCALL ROUTINE                      * 00560000
*********************************************************************** 00561000
         SPACE 1                                               @D65CDHS 00562000
&P.TPSO0 DC    A(0)                SOCKETCALL SUCCESSFUL       @D65CDHS 00563000
&P.TPSO4 DC    A(0)                SOCKETCALL SHOULD BE RETRIED@D65CDHS 00564000
&P.TPSO8 DC    A(0)                CONNECTION TO BE STOPPED    @D65CDHS 00565000
&P.TPSOC DC    A(0)                INTERFACE TO BE TERMINATED  @D65CDHS 00566000
         SPACE 1                                               @D65CDHS 00567000
*********************************************************************** 00568000
*        INTERFACE AREA BETWEEN IPW$$TD AND IPW$$TS                   * 00569000
*          RESPECTIVELY BETWEEN IPW$$SD AND IPW$$SS            @D66CDHS 00570000
*********************************************************************** 00571000
         SPACE 1                                               @D65CDHS 00572000
&P.TPR1  DC    F'0'                RETURN CODE FROM $TS        @D65CDHS 00573000
&P.TPR10 EQU   0                   .. OK                       @D65CDHS 00574000
&P.TPR14 EQU   4                   .. RETRY NECESSARY/POSSIBLE @D65CDHS 00575000
&P.TPR18 EQU   8                   .. TERMINATE CONNECTION     @D65CDHS 00576000
&P.TPR1C EQU   12                  .. TERMINATE INTERFACE      @D65CDHS 00577000
&P.TPR1R EQU   2                   .. RETRY DUE TO IPW$$SD     @D65CDHS 00578000
         SPACE 1                                               @D65CDHS 00579000
&P.TPSC  DC    XL1'00'             SOCKETCALL REQUESTED        @D65CDHS 00580000
&P.TPIA  EQU   1                   .. INITAPI                  @D65CDHS 00581000
&P.TPTA  EQU   2                   .. TERMAPI                  @D65CDHS 00582000
&P.TPGL  EQU   3                   .. GETHOSTID                @D65CDHS 00583000
&P.TPLI  EQU   4                   .. LISTEN                   @D65CDHS 00584000
&P.TPAC  EQU   5                   .. ACCEPT                   @D65CDHS 00585000
&P.TPSD  EQU   6                   .. SEND                     @D65CDHS 00586000
&P.TPRV  EQU   7                   .. RECEIVE                  @D65CDHS 00587000
&P.TPCL  EQU   8                   .. CLOSE                    @D65CDHS 00588000
&P.TPCN  EQU   9                   .. CANCEL                   @D65CDHS 00589000
&P.TPGA  EQU   10                  .. GETHOSTBYADDR            @D65CDHS 00590000
&P.TPGN  EQU   11                  .. GETHOSTBYNAME            @D65CDHS 00591000
&P.TPGS  EQU   12                  .. GET SOCKET               @D65CDHS 00592000
&P.TPBI  EQU   13                  .. BIND                     @D65CDHS 00593000
&P.TPCO  EQU   14                  .. CONNECT                  @D65CDHS 00594000
*                                                              @D66CDHS 00595000
&P.TPSR  EQU   15                  .. SELECT USING READ-ARRAY  @D66CDHS 00596000
&P.TPSW  EQU   16                  .. SELECT USING WRITE-ARRAY @D66CDHS 00597000
*              SOME SSL SOCKET CALLS:                          @D66CDHS 00598000
&P.SSLIN EQU   17                  .. SSL INITIALIZE           @D66CDHS 00599000
&P.SSLUN EQU   18                  .. SSL UNINITIALIZE         @D66CDHS 00600000
&P.SSLGN EQU   19                  .. SSL GET DNAME IN DB      @D66CDWW 00601000
&P.SSLFM EQU   20                  .. SSL FREE MEMORY          @D66CDHS 00602000
&P.SSLSI EQU   21                  .. SSL SOCKET INITIALIZE    @D66CDHS 00603000
&P.SSLSR EQU   22                  .. SSL SOCKET READ          @D66CDHS 00604000
&P.SSLSW EQU   23                  .. SSL SOCKET WRITE         @D66CDHS 00605000
&P.SSLSC EQU   24                  .. SSL SOCKET CLOSE         @D66CDHS 00606000
&P.SSLRS EQU   25                  .. SSL SOCKET RESET         @D66CDHS 00607000
&P.SSLGC EQU   26                  .. SSL GET CIPHER INFO      @D66CDHS 00608000
&P.TPIOC EQU   27                  .. IOCTL=SET NONBLOCKING    @D66CDHS 00609000
         SPACE 1                                               @D65CDHS 00610000
         DC    XL1'00'             UNUSED                      @D65CDHS 00611000
         SPACE 1                                               @D65CDHS 00612000
&P.TPRYC DC    XL2'00'             RETRY COUNTER               @D65CDHS 00613000
         SPACE 1                                               @D65CDHS 00614000
&P.TPTIV DC    F'0'                TIMER INTERVAL TO BE SET    @D65CDHS 00615000
         SPACE 1                                               @D65CDHS 00616000
&P.TPTE1 EQU   *-&P.TPTC1          LENGTH OF TRACED INFO 1     @D65CDHS 00617000
&P.TPTQE DS    0XL24               TIMER QUEUE ELEMENT         @D65CDHS 00618000
         DC    XL12'00'            NOT REFERENCED              @D65CDHS 00619000
&P.TPTEB DC    XL4'00'             POST BYTES                  @D65CDHS 00620000
         DC    XL5'00'             NOT REFERENCED              @D65CDHS 00621000
&P.TPTQY DC    CL3' '              EYECATCHER                  @D65CDHS 00622000
         SPACE 1                                               @D65CDHS 00623000
*********************************************************************** 00624000
*                                                                     * 00625000
*        AREAS USED FOR SOCKET CALLS                                  * 00626000
*                                                                     * 00627000
*********************************************************************** 00628000
         SPACE 1                                               @D65CDHS 00629000
*********************************************************************** 00630000
*        AREAS USED FOR SEVERAL SOCKET CALLS                          * 00631000
*********************************************************************** 00632000
         SPACE 1                                               @D65CDHS 00633000
*********************************************************************** 00634000
*        START OF AREA-2 TO BE TRACED                                 * 00635000
*********************************************************************** 00636000
         SPACE 1                                               @D65CDHS 00637000
         DS    0A(0)               ALIGN                       @D65CDHS 00638000
&P.TPTC2 DS    0XL20               START OF TRACED INFO 2      @D65CDHS 00639000
         SPACE 1                                               @D65CDHS 00640000
&P.SCSOD DC    H'0'                SOCKET DESCRIPTOR           @D65CDHS 00641000
         DC    H'0'                RESERVED                    @D65CDHS 00642000
         SPACE 1                                               @D65CDHS 00643000
*********************************************************************** 00644000
*        AREAS USED FOR SOCKET CALLS: BIND, ACCEPT, CONNECT           * 00645000
*********************************************************************** 00646000
         SPACE 1                                               @D65CDHS 00647000
&P.SCDNM DC    0XL16                                           @D65CDHS 00648000
&P.SCBFM DC    H'0'                ADDRESSING FAMILY           @D65CDHS 00649000
&P.SCBPT DC    H'0'                PORT NUMBER                 @D65CDHS 00650000
&P.SCDIP DC    F'0'                IP-ADDRESS                  @D65CDHS 00651000
         DC    XL4'00'             RESERVED FOR SOCKETCALL     @D65CDHS 00652000
         DC    XL4'00'             RESERVED FOR SOCKETCALL     @D65CDHS 00653000
&P.TPTE2 EQU   *-&P.TPTC2          LENGTH OF TRACED INFO 2     @D65CDHS 00654000
         SPACE 1                                               @D65CDHS 00655000
*********************************************************************** 00656000
*        AREAS USED FOR SEVERAL SOCKET CALLS                          * 00657000
*              EXCEPT SEND AND CANCEL                                 * 00658000
*********************************************************************** 00659000
         SPACE 1                                               @D65CDHS 00660000
         DS    0A(0)               ALIGN                       @D65CDHS 00661000
&P.SCST1 DC    X'00'               STATUS OF SOCKETCALL        @D65CDHS 00662000
&P.SCS1S EQU   X'80'               .. SOCKETCALL STARTED       @D65CDHS 00663000
&P.SCS1B EQU   X'40'               .. NO BUFFER AVAILABLE      @D66CDHS 00664000
         DC    X'00'               RESERVED                    @D65CDHS 00665000
&P.SCCNT DC    H'0'                RETRY COUNTER               @D65CDHS 00666000
&P.SCBUF DC    A(0)                BUFFER FOR RECV             @D65CDHS 00667000
&P.SCNBY DC    A(0)                NO OF BYTES FOR RECV        @D65CDHS 00668000
         SPACE 1                                               @D65CDHS 00669000
&P.SCRC  DC    F'0'                RETURN CODE FROM SOCKETCALL @D65CDHS 00670000
&P.SCERN DC    F'0'                ERROR NUMBER                @D65CDHS 00671000
         SPACE 1                                               @D65CDHS 00672000
&P.SCDCB DS    0XL164                                          @D65CDHS 00673000
&P.SCECB DS    0A(0)               ECB                         @D65CDHS 00674000
         DC    XL2'00'             .. UNREFERENCED             @D65CDHS 00675000
&P.SCECP DC    XL1'00'             .. POSTED BYTE              @D65CDHS 00676000
&P.SCECI EQU   X'80'               .. POST BIT                 @D65CDHS 00677000
         DC    XL1'00'             .. UNREFERENCED             @D65CDHS 00678000
&P.SCRQ  DC    XL160'00'           WORKAREA FOR EZASMI         @D65CDHS 00679000
         SPACE 1                                               @D65CDHS 00680000
*********************************************************************** 00681000
*        AREAS USED FOR SOCKET CALL : INITAPI, LISTEN                 * 00682000
*         SEE TDCB                                                    * 00683000
*********************************************************************** 00684000
         SPACE 1                                               @D65CDHS 00685000
*********************************************************************** 00686000
*        AREAS USED FOR SOCKET CALLS: GETHOSTBYADDR                   * 00687000
*********************************************************************** 00688000
         SPACE 1                                               @D65CDHS 00689000
&P.SCHST DC    A(0)                ADDR. OF HOSTNAME STRUCTURE @D65CDHS 00690000
         SPACE 1                                               @D65CDHS 00691000
*********************************************************************** 00692000
*        AREAS USED FOR SOCKET CALL : GETHOSTBYNAME                   * 00693000
*              AND AREA ..SCHST, SEE SOCKET CALL GETHOSTBYADDR        * 00694000
*********************************************************************** 00695000
         SPACE 1                                               @D65CDHS 00696000
&P.SCHNL DC    F'0'                LENGTH OF HOSTNAME          @D65CDHS 00697000
&P.SCHNM DC    A(0)                ADDRESS OF HOSTNAME         @D65CDHS 00698000
         SPACE 1                                               @D65CDHS 00699000
*********************************************************************** 00700000
*        AREAS USED FOR SOCKET CALL: SEND                             * 00701000
*********************************************************************** 00702000
         SPACE 1                                               @D65CDHS 00703000
         DS    0A(0)               ALIGN                       @D65CDHS 00704000
&P.TPTC3 DS    0XL8                START OF TRACED INFO 3      @D65CDHS 00705000
&P.SCSS1 DC    X'00'               STATUS OF SOCKETCALL        @D65CDHS 00706000
&P.SCD1S EQU   X'80'               .. SOCKETCALL STARTED       @D65CDHS 00707000
&P.SCD1B EQU   X'40'               .. NO BUFFER AVAILABLE      @D66CDHS 00708000
         DC    X'00'               RESERVED                    @D65CDHS 00709000
&P.SCSCT DC    H'0'                RETRY COUNTER               @D65CDHS 00710000
&P.SCBUS DC    A(0)                SOCKETCALL TO BE CANCELLED  @D65CDHS 00711000
&P.SCNBS DC    A(0)                UNREFERENCED                @D65CDHS 00712000
         SPACE 1                                               @D65CDHS 00713000
&P.SCSAC DC    F'0'                RETURN CODE                 @D65CDHS 00714000
&P.SCSAE DC    F'0'                ERROR NUMBER                @D65CDHS 00715000
&P.TPTE3 EQU   *-&P.TPTC3          LENGTH OF TRACED INFO 3     @D65CDHS 00716000
         SPACE 1                                               @D65CDHS 00717000
&P.SCSAL DS    0XL164                                          @D65CDHS 00718000
&P.SCSAB DS    0A(0)               ECB                         @D65CDHS 00719000
         DC    XL2'00'             .. UNREFERENCED             @D65CDHS 00720000
&P.SCSAP DC    XL1'00'             .. POSTED BYTE              @D65CDHS 00721000
         DC    XL1'00'             .. UNREFERENCED             @D65CDHS 00722000
&P.SCSAR DC    XL160'00'           WORKAREA FOR EZASMI         @D65CDHS 00723000
         SPACE 1                                               @D65CDHS 00724000
*********************************************************************** 00725000
*        AREAS USED FOR SOCKET CALL: CANCEL                           * 00726000
*              PARTLY RE-USED FOR SOCKET CALL: GET CIPHER INFO @D66CDHS 00727000
*********************************************************************** 00728000
         SPACE 1                                               @D65CDHS 00729000
         DS    0A(0)               ALIGN                       @D65CDHS 00730000
&P.SCCS1 DC    X'00'               STATUS OF SOCKETCALL        @D65CDHS 00731000
&P.SCC1S EQU   X'80'               .. SOK CALL STARTED, UNUSED @D65CDHS 00732000
&P.SCC1B EQU   X'40'               .. NO BFR AVAILABLE, UNUSED @D66CDHS 00733000
         DC    X'00'               RESERVED                    @D65CDHS 00734000
&P.SCCCT DC    H'0'                RETRY COUNTER               @D65CDHS 00735000
&P.SCBUC DC    A(0)                SOCKETCALL TO BE CANCELLED  @D65CDHS 00736000
&P.SCNBC DC    A(0)                UNREFERENCED                @D65CDHS 00737000
         SPACE 1                                               @D65CDHS 00738000
&P.SCCAC DC    F'0'                RETURN CODE                 @D65CDHS 00739000
&P.SCCAE DC    F'0'                ERROR NUMBER                @D65CDHS 00740000
         SPACE 1                                               @D65CDHS 00741000
&P.SCCAL DS    0XL164                                          @D65CDHS 00742000
&P.SCCAB DS    0A(0)               ECB                         @D65CDHS 00743000
         DC    XL2'00'             .. UNREFERENCED             @D65CDHS 00744000
&P.SCCAP DC    XL1'00'             .. POSTED BYTE              @D65CDHS 00745000
         DC    XL1'00'             .. UNREFERENCED             @D65CDHS 00746000
&P.SCCAR DC    XL160'00'           WORKAREA FOR EZASMI         @D65CDHS 00747000
         SPACE 1                                               @D65CDHS 00748000
*              PARTLY RE-USED FOR SOCKET CALL: GET-CIPHER-INFO @D66CDHS 00749000
         SPACE 1                                               @D66CDHS 00750000
         ORG   &P.SCCAL            OVERLAY GET-CIPHER-INFO     @D66CDHS 00751000
&P.SSLCO DS    0XL104              OUTPUT OF GET-CIPHER-INFO   @D66CDHS 00752000
         DC    F'0'                SYSTEM SSL VERSION          @D66CDHS 00753000
&P.SSLCC DC    XL64'00'            INPUT  FOR SSL-SOK-INIT     @DY45806 00754000
*              NO LONGER:          OUTPUT FOR GET-CIPHER-INFO  @DY45806 00755000
         DC    XL30'00'            INPUT  FOR SSL-SOK-INIT     @DY45806 00756000
&P.SSLEV DC    XL06'00'            ENCRYPTION IN CHARACTERS    @DY45806 00757000
         ORG   ,                   RESTART AT CURRENT LOCATION @D66CDHS 00758000
         SPACE 1                                               @D66CDHS 00759000
         DC    F'0'                RESERVED                    @D65CDHS 00760000
         SPACE 1                                               @D65CDHS 00761000
*********************************************************************** 00762000
*        NO SPECIAL AREAS FOR SOCKET CALLS: CLOSE, SOCKET,            * 00763000
*                                           GETHOSTID, TERMAPI        * 00764000
*        SEE AREAS USED FOR SEVERAL SOCKET CALLS                      * 00765000
*********************************************************************** 00766000
         EJECT 1                                               @D66CDHS 00767000
*********************************************************************** 00768000
*        AREAS USED FOR SSL SOCKET CALLS                       @D66CDHS 00769000
*********************************************************************** 00770000
         SPACE 1                                               @D66CDHS 00771000
&P.SSLCB DC    A(0)                ADDR OF SSL CONTROL BLOCK   @D66CDHS 00772000
*                                  RETURNED BY SSL-SOCK-INIT   @D66CDHS 00773000
&P.SSLRC DC    F'0'                REASON-CODE OF SOCK-INIT    @D66CDHS 00774000
&P.SSLDN DC    A(0)                ADDR OF DISTINGUISHED NAME  @D66CDHS 00775000
*                                  RETURNED BY SSL-GETDNBYLAB  @D66CDHS 00776000
*                                  INPUT FOR   SSL-FREEMEM     @D66CDHS 00777000
&P.SSLCF DC    A(0)                ADDR OF CLIENT-CERTIFICATE  @D66CDHS 00778000
*                                  UPDATED BY SSL-SOCK-INIT    @D66CDHS 00779000
&P.SSLST DC    A(0)                ADDR OF CLIENT-CERTIFICATE  @D66CDHS 00780000
*                                  UPDATED BY SSL-SOCK-INIT    @D66CDHS 00781000
&P.SSLCS DC    H'0'                2 BYTES OF SELECTED CIPHERS @D66CDHS 00782000
*                                  IS PART WITHIN ---SLCPO     @D66CDHS 00783000
         DC    H'0'                RESERVED                    @D66CDHS 00784000
         SPACE 1                                               @D66CDHS 00785000
&P.IOCMD DC    F'0'                MODE FOR IOCTL              @D66CDHS 00786000
&P.IOCBL EQU   0                   .. BLOCKING MODE            @D66CDHS 00787000
&P.IOCNB EQU   1                   .. NONBLOCKING MODE         @D66CDHS 00788000
         DC    F'0'                RESERVED                    @D66CDHS 00789000
         DC    F'0'                RESERVED                    @D66CDHS 00790000
         DC    F'0'                RESERVED                    @D66CDHS 00791000
         SPACE 1                                               @D66CDHS 00792000
         DC    F'0'                RESERVED                    @D66CDHS 00793000
         DC    F'0'                RESERVED                    @D66CDHS 00794000
         DC    F'0'                RESERVED                    @D66CDHS 00795000
         DC    F'0'                RESERVED                    @D66CDHS 00796000
         SPACE 1                                               @D66CDHS 00797000
         DC    F'0'                RESERVED                    @D66CDHS 00798000
         DC    F'0'                RESERVED                    @D66CDHS 00799000
         DC    F'0'                RESERVED                    @D66CDHS 00800000
         DC    F'0'                RESERVED                    @D66CDHS 00801000
         SPACE 1                                               @D66CDHS 00802000
*********************************************************************** 00803000
*        WORKAREA FOR IPW$$TD, RESPECTIVELY IPW$$SD            @D66CDHS 00804000
*********************************************************************** 00805000
         SPACE 1                                               @D65CDHS 00806000
&P.TPNOB DC    F'0'                NO OF BYTES SEND/RCVED      @D65CDHS 00807000
         SPACE 1                                               @D65CDHS 00808000
&P.TPCTB DC    XL33'00'            BUFFER FOR CTRL-RECORD      @D65CDHS 00809000
         SPACE 1                                               @D65CDHS 00810000
&P.TPCR1 DC    XL03'00'            RESERVED                    @D65CDHS 00811000
         SPACE 1                                               @D65CDHS 00812000
&P.TPBR1 DC    F'0'                BYTES RCVED VIA SOCKETCALL  @D65CDHS 00813000
&P.TPBP1 DC    F'0'                BYTES PROCESSED BY ..       @D65CDHS 00814000
*                                  .. IPW$$TD, RESP. IPW$$SD   @D66CDHS 00815000
         SPACE 1                                               @D65CDHS 00816000
&P.TPWPO DC    A(0)                ADDRESS: WAIT FOR POST ECB  @D65CDHS 00817000
         SPACE 1                                               @D65CDHS 00818000
&P.TPNCB DC    A(0)                ADDRESS OF NCB              @D65CDHS 00819000
         SPACE 1                                               @D65CDHS 00820000
         DC    XL2'00'             RESERVED                    @D65CDHS 00821000
&P.TPFCS DC    XL2'00'             FCS SAVED FROM CTC I/O      @D65CDHS 00822000
         SPACE 1                                               @D65CDHS 00823000
         DC    XL1'00'             RESERVED                    @D65CDHS 00824000
&P.TPBCS DC    XL1'00'             BCB SAVED FROM CTC I/O      @D65CDHS 00825000
&P.TPBCI DC    XL1'00'             BCB FOR INCOMING BUFFER     @D65CDHS 00826000
&P.TPBCO DC    XL1'00'             BCB FOR OUTGOING BUFFER     @D65CDHS 00827000
         SPACE 1                                               @D65CDHS 00828000
&P.TPSKC DC    F'0'                COMPLETION TIME OF SOCK CALL@DY46067 00829000
         DC    F'0'                RESERVED                    @D66CDHS 00830000
         DC    F'0'                RESERVED                    @D66CDHS 00831000
         DC    F'0'                RESERVED                    @D66CDHS 00832000
         SPACE 1                                               @D65CDHS 00833000
         DC    F'0'                RESERVED                    @D66CDHS 00834000
         DC    F'0'                RESERVED                    @D66CDHS 00835000
         DC    F'0'                RESERVED                    @D66CDHS 00836000
         DC    F'0'                RESERVED                    @D66CDHS 00837000
         EJECT 1                                               @D65CDHS 00838000
&P.TPLST EQU   *                   END    OF WORKAREA          @DPTMH31 00839000
&P.TPLN  EQU   *-&P.TPDS           LENGTH OF WORKAREA          @D65CDHS 00840000
         SPACE 1                                               @D65CDHS 00841000
*********************************************************************** 00842000
*                                                                     * 00843000
*        AREA NOT TO BE CLEARED AFTER SOCKET CALL CLOSE               * 00844000
*                                                              @D66CDHS 00845000
*********************************************************************** 00846000
         SPACE 1                                               @D66CDHS 00847000
&P.SSLDS DS    0F   '              START OF SSL WORKAREA       @D66CDHS 00848000
&P.SSLKY DC    CL8' '              MEMBER IN SUBLIB            @D66CDHS 00849000
         DC    X'00'               END DELIMITER FOR DNAME     @D66CDHS 00850000
         DC    X'00'               RESERVED FOR FUTURE USE     @D66CDHS 00851000
         DC    H'0'                RESERVED FOR FUTURE USE     @D66CDHS 00852000
         SPACE 1                                               @D66CDHS 00853000
&P.SSLHK DC    F'0'                HANDSHAKE TYPE              @D66CDHS 00854000
&P.SSLHC EQU   0                   HANDSHAKE TYPE: CLIENT      @D66CDHS 00855000
&P.SSLHS EQU   1                   HANDSHAKE TYPE: SERVER      @D66CDHS 00856000
&P.SSLHA EQU   2                   HANDSHAKE TYPE: CLIENT AUTH @D66CDHS 00857000
&P.SSLHN EQU   3                   HANDSHAKE TYPE: NO CLI AUTH @D66CDHS 00858000
         SPACE 1                                               @D66CDHS 00859000
&P.SSLCP DC    F'0'                CIPHER LEVEL                @D66CDHS 00860000
&P.SSLCL EQU   1                   CIPHER LEVEL: WEAK          @D66CDHS 00861000
&P.SSLCH EQU   2                   CIPHER LEVEL: STRONG        @D66CDHS 00862000
&P.SSLCN EQU   3                   CIPHER LEVEL: NORMAL        @DY45806 00863000
         SPACE 1                                               @D66CDHS 00864000
         DC    A(0)                RESERVED FOR FUTURE USE     @D66CDHS 00865000
         DC    A(0)                RESERVED FOR FUTURE USE     @D66CDHS 00866000
         DC    A(0)                RESERVED FOR FUTURE USE     @D66CDHS 00867000
         SPACE 1                                               @D66CDHS 00868000
         DC    A(0)                RESERVED FOR FUTURE USE     @D66CDHS 00869000
         DC    A(0)                RESERVED FOR FUTURE USE     @D66CDHS 00870000
         DC    A(0)                RESERVED FOR FUTURE USE     @D66CDHS 00871000
         DC    A(0)                RESERVED FOR FUTURE USE     @D66CDHS 00872000
         SPACE 1                                               @D66CDHS 00873000
&P.SSLDL EQU   *-&P.SSLDS          LENGTH OF WORKAREA          @D66CDHS 00874000
         SPACE 1                                               @D66CDHS 00875000
         AIF   ('&TCP' EQ 'ONLY').TCP1N                        @D65CDHS 00876000
         AIF   ('&TCP' EQ 'DSECT').TCP1                        @D65CDHS 00877000
         SPACE 1                                                        00878000
NCBLN    EQU   *-NCBDS             LENGTH OF CONTROL BLOCK              00879000
         TITLE 'VSE/POWER (PNET)  -  NODE CONTROL BLOCK TASK ENTRY'     00880000
         SPACE 2                                                        00881000
*********************************************************************** 00882000
*              NODE CONTROL BLOCK TASK ENTRY                          * 00883000
*********************************************************************** 00884000
         SPACE 1                                                        00885000
NCBEDS   DSECT ,                   DUMMY SECTION DEFINITION             00886000
NCBERCB  DC    X'00'               RCB OF TASK CONCERNED                00887000
NCBEST1  DC    X'00'               STATUS/ACTION BYTE                   00888000
NCBTDRN  EQU   X'80'               .. TASK DRAINED                      00889000
NCBTLVE  EQU   X'40'               .. TASK LIVE                         00890000
NCBDETE  EQU   X'20'               .. DEQUEUE & DELETE NCB TASK ENTRY   00891000
NCBTCRE  EQU   X'10'               .. TASK CREATION REQUESTED           00892000
NCBESTS  DC    X'00'               TASK STOP STATE (DUPLICATE TO TCB)   00893000
NCBETYP  DC    X'00'               TASK TYPE                            00894000
NCBETYPT EQU   X'80'               .. TRANSMITTER TASK                  00895000
NCBETYPR EQU   X'40'               .. RECEIVER TASK                     00896000
NCBETYPC EQU   X'20'               .. CONSOLE TASK                      00897000
NCBETYPJ EQU   X'08'               .. JOB PROCESSING                    00898000
NCBETYPO EQU   X'04'               .. OUTPUT (LST,PUN) PROCESSING       00899000
         SPACE 1                                                        00900000
NCBETCB  DC    A(0)                TCB ADDRESS OF TASK                  00901000
NCBELN   EQU   *-NCBEDS            LENGTH OF ONE ENTRY                  00902000
         SPACE 3                                                        00903000
*********************************************************************** 00904000
*   PASSED PARAMETERS TO IPW$$LD5 DUE TO RESTRUCTERING OF PHASES      * 00905000
*********************************************************************** 00906000
         SPACE 1                                                        00907000
PASPARD  DSECT ,                   DUMMY SECTION DEFINITION    @D22DDHS 00908000
PASPAR5  DC    XL12'00'            PARAMETERS FOR IPW$$LD5     @D22DDHS 00909000
PASTIME  DC    X'00'               TIME PARAMETER              @DA39816 00910000
         DC    XL2'00'             NOT USED                    @DA39816 00911000
PASFCT5  DC    X'00'               FUNCTION FOR IPW$$LD5       @D22DDHS 00912000
*        EQU   X'01'               TEST RCB OF RIF             @D22DDHS 00913000
*        EQU   X'02'               TEST RCB FOR TRANSMITTER    @D22DDHS 00914000
*        EQU   X'03'               TEST RCB FOR RECEIVER       @D22DDHS 00915000
*        EQU   X'04'               TEST LOG ERROR ON SYSREC    @D22DDHS 00916000
*        EQU   X'05'               TEST CANCEL TASKS           @D22DDHS 00917000
*        EQU   X'06'               TEST CREATE TASK            @D22DDHS 00918000
*        EQU   X'07'               TEST UPDATE NAT             @D22DDHS 00919000
*        EQU   X'08'               TEST SET TIMER-INTERVAL     @D22DDHS 00920000
PASPLN   EQU   *-PASPARD           LENGTH OF ONE ENTRY         @D22DDHS 00921000
         AGO   .TCP1N                                          @D65CDHS 00922000
.TCP1    ANOP                                                  @D65CDHS 00923000
         TITLE 'VSE/POWER - TCP/IP   LAYOUT FOR COMMON SOCKETCALL AREA' 00924000
*********************************************************************** 00925000
*        LAYOUT OF DIFFERENT AREAS COMMON TO ALL SOCKETCALLS          * 00926000
*********************************************************************** 00927000
         SPACE 1                                               @D65CDHS 00928000
SOCSCCOM DSECT ,                   DUMMY SECTION DEFINITION    @D22DDHS 00929000
SOCSCTC3 DS    0XL20               START OF TRACED INFO 3      @D65CDHS 00930000
SOCSCST1 DC    X'00'               STATUS OF SOCKETCALL        @D65CDHS 00931000
SOCSCS1S EQU   X'80'               .. SOCKETCALL STARTED       @D65CDHS 00932000
SOCSCS1B EQU   X'40'               .. NO BUFFER AVAILABLE      @D66CDHS 00933000
SOCSCECT DC    XL1'00'             ERROR COUNT                 @DPTMH38 00934000
SOCSCCNT DC    H'0'                RETRY COUNTER               @D65CDHS 00935000
SOCSCBUF DC    A(0)                VARIOUS MEANINGS            @D65CDHS 00936000
SOCSCNBY DC    A(0)                VARIOUS MEANINGS            @D65CDHS 00937000
         SPACE 1                                               @D65CDHS 00938000
SOCSCRC  DC    F'0'                RETURN CODE                 @D65CDHS 00939000
SOCSCERN DC    F'0'                ERROR NUMBER                @D65CDHS 00940000
         SPACE 1                                               @D65CDHS 00941000
SOCSCSAL DS    0XL164                                          @D65CDHS 00942000
SOCSCSAB DS    0A(0)               ECB                         @D65CDHS 00943000
         DC    XL2'00'             .. UNREFERENCED             @D65CDHS 00944000
SOCSCSAP DC    XL1'00'             .. POSTED BYTE              @D65CDHS 00945000
         DC    XL1'00'             .. UNREFERENCED             @D65CDHS 00946000
SOCSCTE3 EQU   *-SOCSCTC3          LENGTH OF TRACED INFO 3     @D65CDHS 00947000
SOCSCSAR DC    XL160'00'           WORKAREA FOR EZASMI         @D65CDHS 00948000
.*                                                                      00949000
.TCP1N   ANOP                                                  @D65CDHS 00950000
         MEND                                                       */  00951000
*%PLSNCB:;                   /* NODE CONTROL BLOCK                  */  00952000
*/*******************************************************************/  00953000
*/*                                                                 */  00954000
*/* IBM DISK OPERATING SYSTEM                                       */  00955000
*/* VSE/POWER - 5686-CF7-03                                         */  00956000
*/* IPW$DNC MACRO INSTRUCTION                                       */  00957000
*/*                                                                 */  00958000
*/* DEFINE NODE CONTROL BLOCK (NCB)                                 */  00959000
*/*                                                                 */  00960000
*/*******************************************************************/  00961000
*/****************************************************/                 00962000
*/*                                                  */                 00963000
*/*   LICENSED MATERIALS - PROPERTY OF IBM           */                 00964000
*/*   THIS MACRO IS "RESTRICTED MATERIALS OF IBM"    */                 00965000
*/*   5686-CF7 (C) COPYRIGHT IBM CORP. 1982, 2004    */                 00966000
*/*   SEE COPYRIGHT INSTRUCTIONS                     */                 00967000
*/*                                                  */                 00968000
*/****************************************************/                 00969000
*DCL                                                                    00970000
*1 NCB BASED(*) BDY(DWORD),  /* STRUCTURE DECLARATION               */  00971000
* 2 NCBDS,                   /* DSECT NAME FOR ASSEMBLER            */  00972000
*  3 NCBSD CHAR(16),         /* STORAGE DESCRIPTOR FOR NCB          */  00973000
*  3 NCBNAME CHAR(8),        /* NODE NAME                           */  00974000
*  3 NCBNEXT PTR(31),        /* ADDRESS OF NEXT NCB IN CHAIN        */  00975000
*  3 * PTR(31),              /* RESERVED FOR LOCKWORD               */  00976000
*/*                                                                 */  00977000
*  3 NCBTYP BIT(8),          /* RESERVED FOR LOCKWORD               */  00978000
*    5 NCBSNA BIT(1),        /* SNA NODE, IF OFF = BSC NODE         */  00979000
*    5 NCBCTCA BIT(1),       /* CTCA FLAG BYTE              @D23XDAW*/  00980000
*    5 NCBTCP  BIT(1),       /* TCP NODE                    @D65CDHS*/  00981000
*    5 NCBSSL  BIT(1),       /* TCP NODE WITH SSL           @D66CDHS*/  00982000
*    5 NCBRSTR BIT(1),       /* ON IF NO RESTART AFTER TIME-OUTS    */  00983000
*    5 * BIT(3),             /* RESERVED                            */  00984000
*  3 NCBTR1 ,                /* TRACE ENTRY PART 1 (GROUPED TO MOVE)*/  00985000
*    5 NCBACTB BIT(16),      /* ACTION CONTROL BYTES                */  00986000
*      7 NCBACT1 BIT(8),     /* ACTION BYTE 1                       */  00987000
*        9 NCBDTCH BIT(1),   /* TASK DETACH REQUESTED               */  00988000
*        9 NCBTCRQ BIT(1),   /* TASK CREATION REQUESTED             */  00989000
*        9 NCBLNSR BIT(1),   /* LINE STOP REQUEST                   */  00990000
*        9 NCBFREE BIT(1),   /* NCB RELEASE RQUESTED (SNA)          */  00991000
*        9 NCBINIT BIT(1),   /* LINE INITIALIZATION REQUEST         */  00992000
*        9 NCBIPEND BIT(1),  /* INIT PENDING FOR PNET CTCA  @D23XDAW*/  00993000
*        9 NCBREACT BIT(1),  /* RESTART ACTIVITY            @DY44223*/  00994000
*        9 NCBTPEND BIT(1),  /* INIT PENDING FOR TCP/IP     @DPTMH31*/  00995000
*      7 NCBACT2 BIT(8),     /* ACTION BYTE 2                       */  00996000
*        9 NCBSGNR  BIT(1),  /* SIGNON PROCESS REQUEST              */  00997000
*        9 NCBSOFR BIT(1),   /* SIGNOFF REQUESTED                   */  00998000
*        9 NCBLCLS BIT(1),   /* LINE/SESSION CLOSE REQUEST          */  00999000
*        9 * BIT(1),         /* RESERVED                            */  01000000
*        9 NCBSEND BIT(1),   /* BUFFER SEND REQUEST                 */  01001000
*        9 * BIT(1),         /* NOT USED                            */  01002000
*        9 NCBRCVR BIT(1),   /* RECEIVE REQUEST (SNA)               */  01003000
*        9 * BIT(1),         /* RESERVED                            */  01004000
*    5 NCBPROC BIT(8),       /* PROCESSING STATUS BYTE              */  01005000
*      7 NCBPSGN BIT(1),     /* SIGNON IN PROCESS                   */  01006000
*      7 NCBPRST BIT(1),     /* AUTOMATIC RESTART IN PROCESS        */  01007000
*      7 * BIT(1),           /* NOT USED                            */  01008000
*      7 NCBTRCE BIT(1),     /* LINE TRACING MODE PROCESSING        */  01009000
*      7 * BIT(1),           /* NOT USED                            */  01010490
*      7 NCBDLAY BIT(1),     /* DELAYED I/O IN PROCESS (BSC)        */  01011000
*      7 * BIT(2),           /* RESERVED                            */  01012000
*    5 NCBFLG1 BIT(8),       /* STATUS BYTE 1 (NODE)                */  01013000
*      7 NCBSGNOC BIT(1),    /* SIGNON COMPLETED                    */  01014000
*      7 NCBSGOP1 BIT(1),    /* INITIAL SIGNON EXPECTED             */  01015000
*      7 NCBSGNOS BIT(1),    /* SIGNON RECORD OUT OF SEQUENCE       */  01016000
*      7 * BIT(1),           /* NOT USED                            */  01017000
*      7 NCBSGNR1 BIT(1),    /* SIGNON PROCEDURE 1                  */  01018000
*      7 NCBSGNR2 BIT(1),    /* SIGNON PROCEDURE 2                  */  01019000
*      7 NCBSGOP2 BIT(1),    /* SIGNON PROC 2 COMPLETED     @D65CDHS*/  01020000
*      7 * BIT(1),           /* NOT USED                            */  01021000
*    5 NCBFLG2 BIT(8),       /* STATUS BYTE 2                       */  01022000
*      7 *       BIT(4),     /* NOT USED                    @DA41532*/  01023000
*      7 NCBNSCLN BIT(1),    /* NSEXIT DRIVEN (CLEANUP)     @DA41532*/  01024000
*      7 NCBCTCR BIT(1),     /* CTC RESTART FLAG            @D23XDAW*/  01025000
*      7 NCBWRDI BIT(1),     /* RESTART BECAUSE WRONG NUMBER DIALED */  01026000
*      7 NCBWACT BIT(1),     /* WRITE STATISTIC AND ACCOUNT RECORD  */  01027000
*    5 NCBFLG3 BIT(8),       /* FLAG BYTE 3                 @DY46390*/  01028190
*      7 NCBF3NBT BIT(1),    /* NO PNET BLANK TRUNCATION    @DY46390*/  01028380
*      7 * BIT(7),           /* RESERVED                            */  01028570
*    5 NCBTTC BIT(8),        /* NODE TERMINATION CODE               */  01029000
*      7 NCBTTCV BIT(1),     /* STOP DUE TO VTAM ABEND              */  01030000
*      7 NCBTTCL BIT(1),     /* STOP DUE TO LINE/SESSION ERROR      */  01031000
*      7 NCBTTCO BIT(1),     /* STOP DUE TO SIGNOFF RECEIVED (BSC)  */  01032000
*      7 NCBTTCS BIT(1),     /* STOP IMMEDIATE BY OPERATOR/SELF     */  01033000
*      7 NCBTTCE BIT(1),     /* STOP AT EOJ BY OPERATOR/VTAM        */  01034000
*      7 NCBTTCF BIT(1),     /* STOP IMMEDIATE,FORCE        @DY44846*/  01035000
*      7 NCBTTCC BIT(1),     /* STOP DUE CTCA COLISION      @DY45240*/  01036000
*      7 * BIT(1),           /* NOT USED                    @DY45240*/  01037000
*    5 NCBTTCDE CHAR(1),     /* TERMINATION TYPE SUBCODE            */  01038000
*    5 NCBTTSTQ CHAR(1),     /* STOP CODE QUALIFIER NCBTTCS/NCBTTCE */  01039000
*      7 NCBPHALT BIT(1),    /* PNET STOPS NODE AS INTERNAL ERROR   */  01040000
*      7 NCBVHALT BIT(1),    /* VTAM REQUEST NODE TO STOP AT EOJ    */  01041000
*      7 NCBRHALT BIT(1),    /* REMOTE SNA NODE REQUESTED EOJ STOP  */  01042000
*      7 NCBOHALT BIT(1),    /* OPERATOR STOP PSTOP/PEND    @DA41532*/  01043000
*      7 NCBSHALT BIT(1),    /* HALT - SEVERE LOGIC ERROR   @DY44223*/  01044000
*      7 * BIT(3),           /* NOT USED                    @DY44223*/  01045000
*/*                                                                 */  01046000
*  3 NCBCNRV FIXED(15),      /* CURR. NUMBER OF RECEIVERS ACTIVE    */  01047000
*  3 NCBCNTR FIXED(15),      /* CURR. NUMBER OF TRANSMITTERS ACTIVE */  01048000
*  3 * CHAR(2),              /* PADDING BYTES                       */  01049000
*/*                                                                 */  01050000
*/* THE FOLLOWING TABLE DEFINES THE TRANSMITTER / RECEIVER FOR      */  01051000
*/* MESSAGES / COMMANDS (CONSOLE RV / TR).  ALL TR / RV TABLES      */  01052000
*/* MUST BE ADJACENT.                                               */  01053000
*/*                                                                 */  01054000
*  3 NCBTASKS ,                 /* NCB TASK ENTRY LIST              */  01055000
*/*                                                                 */  01056000
*    5 NCBCONST CHAR(8),        /* CONSOLE TRANSMITTER TASK         */  01057000
*    5 NCBCONSR CHAR(8),        /* CONSOLE RECEIVER TASK            */  01058000
*/*                                                                 */  01059000
*/* THE FOLLOWING TABLES DEFINE THE TASK ENTRIES FOR TRANSMITTERS   */  01060000
*/*                                                                 */  01061000
*    5 NCBJTTB(7) CHAR(8),      /* JOB TRANSMITTER TABLE            */  01062000
*    5 NCBOTTB(7) CHAR(8),      /* OUTPUT TRANSMITTER TABLE         */  01063000
*/*                                                                 */  01064000
*/* THE FOLLOWING TABLES DEFINE THE TASK ENTRIES FOR RECEIVERS      */  01065000
*/*                                                                 */  01066000
*    5 NCBJRTB(7) CHAR(8),   /*   JOB RECEIVER TABLE                */  01067000
*    5 NCBORTB(7) CHAR(8),   /* OUTPUT RECEIVER TABLE               */  01068000
*/*                                                                 */  01069000
*  3 NCBMSGA PTR(31),        /* POINTER TO FIRST MSG/CMND IN QUEUE  */  01070000
*  3 NCBMSGT PTR(31),        /* MSG/CMND QUEUE TAIL POINTER         */  01071000
*/*                                                                 */  01072000
*  3 NCBNBFRQ PTR(31),       /* PTR TO BUFFER QUEUE SIGNON EVENT    */  01073000
*/*                                                                 */  01074000
*/*             BUFFER CONTROL WORDS                                */  01075000
*/*                                                                 */  01076000
*  3 NCBBFRC,                /* BUFFER CONTROL WORDS TABLE          */  01077000
*    5 NCBIFRE PTR(31),      /* ADDR OF FREE INPUT BUFFER QUEUE     */  01078000
*    5 NCBOTBS PTR(31),      /* ADDR TO-BE-SENT QUEUE (NO PRIORITY) */  01079000
*    5 NCBOBTL PTR(31),      /* TAIL TO-BE-SENT QUEUE (NO-PRIORITY) */  01080000
*    5 NCBOTBP PTR(31),      /* ADDR HEAD PRIORITY OUTPUT Q @D22PIPV*/  01081000
*    5 NCBOBTP PTR(31),      /* TAIL PTR PRIORITY OUTPUT Q  @D22PIPV*/  01082000
*    5 NCBLBFI PTR(31),      /* ADDR OF LINE INPUT BUFFER           */  01083000
*    5 NCBLBFO PTR(31) ,     /* ADDR OF LINE OUTPUT BUFFER          */  01084000
*    5 NCBBFSZ FIXED(16),    /* AL2(400) PNET BUFFER SIZE           */  01085000
*    5 NCBMNIB FIXED(8),     /* MAX. NO OF INPUT BUFFERS            */  01086000
*    5 NCBMNJB FIXED(8),     /* MAX. NO OF JOB/OUT XMIT BUFFERS     */  01087000
*    5 NCBNIBU FIXED(16),    /* NUMBER OF ACQUIRED INPUT BUFFERS    */  01088000
*    5 * CHAR(2),            /* PADDING BYTES                       */  01089000
*/*                                                                 */  01090000
*/*  BSC I/O AND SNA SEND/RECEIVE MANAGER FIELDS                    */  01091000
*/*                                                                 */  01092000
*  3 NCBIOMGR BDY(WORD),     /* I/O MANAGER CONTROL FIELD TABLE     */  01093000
*    5 NCBBFR,               /* STRUCTURE FOR TRACE                 */  01094000
*      7 NCBIBUF PTR(31),    /* ADDR OF INPUT BUFFER IN USE         */  01095000
*      7 NCBOBUF PTR(31),    /* ADDR OF OUTPUT BUFFER SENT          */  01096000
*      7 NCBCBFI PTR(31),    /* ADDR OF BSC INPUT BFR IN CURR.RECEIV*/  01097000
*      7 NCBCBFO PTR(31),    /* ADDR OF BSC OUTPUT BFR IN CURR.SEND */  01098000
*/*                                                                 */  01099000
*    5 NCBFCS CHAR(4),       /* STRUCTURE FOR TRACE                 */  01100000
*      7 NCBRFCS BIT(16),    /* RECEIVED FCS BYTES                  */  01101000
*      7 NCBTFCS BIT(16),    /* NEW STREAM STATUS/TRANSMITTED FCS   */  01102000
*@SPACE;                                                                01103000
*    5 NCBPBFRQ PTR(31),     /* QUEUE HEADER OF TEMP. SUSPENDED BFRS*/  01104000
*@SPACE;                                                                01105000
*    5 NCBNDTEN PTR(31),     /* ADDR OF NDT ENTRY           @D65CDHS*/  01106000
*@SPACE;                                                                01107000
*    5 *        PTR(31),     /* RESERVED                    @D65CDHS*/  01108000
*    5 *        PTR(31),     /* RESERVED                    @D65CDHS*/  01109000
*    5 *        PTR(31),     /* RESERVED                    @D65CDHS*/  01110000
*@SPACE;                                                                01111000
*  3 NCBLCB BDY(DWORD),      /* START OF CONTROL BLOCK OVERLAY      */  01112000
*/*                                                                 */  01113000
*/*      BSC LINE CONTROL INFORMATION                               */  01114000
*/*                                                                 */  01115000
*/* THE FIELDS CONTAIN THE INFORMATION RELATED TO THE LINE FOR      */  01116000
*/* THIS NODE.                                                      */  01117000
*/*                                                                 */  01118000
*    5 NCBLNIN,              /* LINE INFORMATION BLOCK              */  01119000
*      7 NCBPUBA PTR(31),    /* ADDR OF RELATED PUB ENTRY FOR LINE  */  01120000
*      6 NCBLNXX ,           /* STRUCTURE FOR AUTO-RESTART          */  01121000
*      7 NCBBCB CHAR(2),     /* STRUCTURE FOR TRACE                 */  01122000
*        9 NCBEBCB BIT(8),   /* EXPECTED BCB                        */  01123000
*        9 NCBTBCB BIT(8),   /* TRANSMITTED BCB                     */  01124000
*      7 NCBREQ CHAR(4),     /* STRUCTURE FOR TRACE                 */  01125000
*        9 NCBREQF CHAR(1),  /* REQUEST FIELD FOR I/O MANAGER       */  01126000
*        9 NCBLREQ CHAR(1),  /* LAST SENT REQUEST                   */  01127000
*        9 NCBNNAK CHAR(1),  /* LAST SENT NON NAK REQUEST           */  01128000
*        9 NCBLDRQ CHAR(1),  /* LAST REQUEST BY LINE-DRIVER         */  01129000
*      7 NCBIOF1 BIT(8),     /* I/O MGR / LDR INTERFACE FLAGS       */  01130000
*        9 NCBIOBF BIT(1),   /* BUFFER TO ACKNOWLEDGE               */  01131000
*        9 NCBTERM BIT(1),   /* STOP I/O FOR LINE                   */  01132000
*        9 NCBBCBL BIT(1),   /* BCB NOT TO BE UPDATED               */  01133000
*        9 * BIT(5),         /* NOT USED                            */  01134000
*      7 NCBTOCT FIXED(8),   /* TIMEOUT COUNT                       */  01135000
*      7 NCBRTRY FIXED(8),   /* RETRY COUNT FOR UNIT CHECK (MAX 30) */  01136000
*      7 NCBLCNT CHAR(2),    /* ERROR COUNTS                        */  01137000
*        9 NCBRCNT FIXED(8), /* RETRY COUNT                         */  01138000
*        9 NCBTIMC FIXED(8), /* TIME OUT COUNT                      */  01139000
*      7 NCBLFB1 BIT(8),     /* LINE FLAG BYTE 1                    */  01140000
*        9 NCBF1BY BIT(1),   /* LINE BUSY                           */  01141000
*        9 NCBF1SEC BIT(1),  /* REMOTE NODE IS SECONDARY    @DA38386*/  01142000
*        9 NCBF1CON BIT(1),  /* CONTENTION DETECTED         @DA39795*/  01143000
*        9 NCBF1CUE BIT(1),  /* CONTENTION DETECTED BY      @DA39795    01144000
*                               UNIT EXCEPTION HANDLER.     @DA39795*/  01145000
*        9 NCBF1FPR BIT(1),  /* LOCAL NODE FORCED PRIMARY   @DA39795*/  01146000
*        9 * BIT(3),         /* RESERVED                    @DA39795*/  01147000
*      7 NCBLFB2 BIT(8),     /* LINE FLAG BYTE 2                    */  01148000
*        9 NCBF2IN BIT(1),   /* LINE INITIALISED (PREPARE SEQ.)     */  01149000
*        9 * BIT(7),         /* RESERVED                            */  01150000
*      7 * CHAR(2),          /* ALIGNMENT                           */  01151000
*        9 * CHAR(1),        /* UNUSED                      @D23XDAW*/  01152000
*        9 NCBINTC BIT(8),   /* COUNTER FOR CTC INIT T.O.   @D23XDAW*/  01153000
*      7 NCBCTCCB BIT(8),    /* CTC COMMAND BYTE            @D23XDAW*/  01154000
*/*                                                                 */  01155000
*/*      THE FOLLOWING FIELDS REPRESENT THE LINE BLOCK ENTRY        */  01156000
*/*      AS SPECIFIED IN THE PLINE MACRO FOR THE ASSOCIATED CUU     */  01157000
*/*                                                                 */  01158000
*    5 NCBPLINE CHAR(16) BDY(WORD),   /* PLINE MACRO INCLUDED HERE  */  01159000
*      7 *       CHAR(2),             /* NOT REFERENCED             */  01160000
*      7 NCBTIML CHAR(2),             /* TIME-OUT LIMIT IN SECONDS  */  01161000
*      7 NCBLTYP CHAR(1),             /* LINE TYPE                  */  01162000
*       9 *      BIT(2),              /* NOT REFERENCED             */  01163000
*       9 NCBLSWT BIT(1),             /* SWITCHED LINE              */  01164000
*       9 *      BIT(5),              /* NOT REFERENCED             */  01165000
*      7 *       CHAR(11),            /* NOT REFERENCED             */  01166000
*/*                                                                 */  01167000
*/*      CCB , CCWS , TEMPORARY WORKAREA                            */  01168000
*/*                                                                 */  01169000
*    5 * CHAR(4),            /* ALIGNMENT                           */  01170000
*    5 NCBCCB CHAR(24),      /* NJE CCB                             */  01171000
*/*                                                                 */  01172000
*    5 NCBCCW CHAR(8) BDY(DWORD),   /* CCWS FOR CHANNEL PROGRAM     */  01173000
*    5 * CHAR(8) BDY(DWORD),                                            01174000
*    5 * CHAR(8) BDY(DWORD),                                            01175000
*    5 * CHAR(8) BDY(DWORD),                                            01176000
*    5 * CHAR(8) BDY(DWORD),                                            01177000
*/*                                                                 */  01178000
*    5 NCBLCCW PTR(31) BDY(WORD),   /* ADDR OF LAST EXECUTED CCW+8  */  01179000
*/*                                                                 */  01180000
*    5 NCBDISP FIXED(31),    /* DISPL. VIRTUAL-REAL OF NCB          */  01181000
*/*                                                                 */  01182000
*    5 NCBSENS CHAR(2),             /* SENSE BYTES                  */  01183000
*    5 NCBSNSLA CHAR(2),            /* SENSE BYTES OF LAST I/O      */  01184000
*@SPACE (2);                                                            01185000
*  3 NCBCPWD CHAR( 8),       /* PASSWORD OF LOCAL NODE (OUTGOING)   */  01186000
*  3 NCBCLPW CHAR( 8),       /* PASSWORD FOR LINE (OUTGOING)        */  01187000
*@SPACE;                                                                01188000
*/*                                                                 */  01189000
*/*           ACCOUNT RECORD                                        */  01190000
*/*                                                                 */  01191000
*  3 NCBACCT BDY(WORD),      /* PNET ACCOUNT RECORD                 */  01192000
*    5 NCBDATE CHAR(8),      /* SYTEM DATE 'MM/DD/YY'               */  01193000
*    5 NCBSION CHAR(4),      /* SIGNON TIME  (0HHMMSSF) PACKED      */  01194000
*    5 NCBSIOF CHAR(4),      /* SIGNOFF TIME  (0HHMMSSF) PACKED     */  01195000
*    5 NCBUSER CHAR(24),     /* USER INFORMATION                    */  01196000
*      7 NCBANME CHAR(8),    /* NODE PASSWORD FOR ACCOUNT RECORD    */  01197000
*      7 NCBPWRD CHAR(8),    /* NODE PASSWORD                       */  01198000
*      7 NCBPSWD CHAR(8),    /* LINE PASSWORD                       */  01199000
*    5 NCBICNT FIXED(16),    /* INVALID RESPONSES PER SESSION       */  01200000
*    5 NCBRCID CHAR(1),      /* PNET ACCOUNT RECORD IDENTIFIER      */  01201000
*    5 NCBSCOD BIT(8),       /* SIGNOFF REASON INDICATION           */  01202000
*      7 NCBSOP BIT(1),      /* .. BY OPERATOR                      */  01203000
*      7 NCBSCST BIT(1),     /* .. BY REMOTE NODE                   */  01204000
*      7 NCBSTO BIT(1),      /* .. DUE TO TIMEOUT (BSC LINE)        */  01205000
*      7 NCBLER BIT(1),      /* .. LINK ERROR OR SESSION TERMINATION*/  01206000
*      7 NCBPHLT BIT(1),     /* .. DUE TO INTERNAL ERROR            */  01207000
*      7 NCBVTM BIT(1),      /* .. VTAM TERMINATION OR CANCELLATION */  01208000
*      7 NCBVOP BIT(1),      /* .. VTAM NORMAL SHUTDOWN             */  01209000
*      7 NCBCE20 BIT(1),     /* .. NCBSFDT IS 20YY CENTURY  @D61ZDAT*/  01210000
*    5 NCBTERR FIXED(8),     /* ERROR COUNT                         */  01211000
*    5 NCBDVAD CHAR(3),      /* DEVICE ADDRESS CUU                  */  01212000
*    5 NCBTRCNT ,             /* SUMMARY NAME FOR COUNT FIELDS      */  01213000
*      7 NCBXCNT FIXED(32), /* TRANSMISSION COUNT                   */  01214000
*      7 NCBTCNT FIXED(16), /* TIMEOUT COUNT                        */  01215000
*      7 NCBECNT FIXED(16), /* ERROR COUNT                          */  01216000
*    5 NCBSFDT CHAR(8),      /* SIGNOFF DATE 'MM/DD/YY'             */  01217000
*@SPACE;                                                                01218000
*/*                                                                 */  01219000
*/*      TIMER QUEUE ELEMENT FOR NODE                               */  01220000
*/*                                                                 */  01221000
*  3 NCBTQE    CHAR(24),     /* TIMER QUEUE ELEMENT                 */  01222000
*   5 *        CHAR(12),     /* NOT REFERENCED                      */  01223000
*   5 NCBEB    CHAR(4),      /* POST FIELD FOR TIMER-SERVICE        */  01224000
*   5 *        CHAR(8),      /* NOT REFERENCED                      */  01225000
*/*                                                                 */  01226000
*/*      EBCDIC LINE CODE TABLE                                     */  01227000
*/*                                                                 */  01228000
*  3 NCBCODT CHAR(9),        /* START OF LINE CODE TABLE            */  01229000
*    5 NCBSOHS CHAR(2),      /* SOH ENQ SEQUENCE                    */  01230000
*    5 NCBSOTS CHAR(2),      /* START OF TEXT SEQUENCE              */  01231000
*    5 NCBACKS CHAR(2),      /* POSITIVE ACKNOWLEDGEMENT SEQUENCE   */  01232000
*    5 NCBETBS CHAR(2),      /* END OF TEXT SEQUENCE                */  01233000
*      7 NCBEDLE CHAR(1),    /* DLE                                 */  01234000
*      7 NCBEETB CHAR(1),    /* ETB                                 */  01235000
*    5 NCBNAKS CHAR(1),      /* NEGATIVE ACKNOWLEDGEMENT SEQUENCE   */  01236000
*  3 *         CHAR(3),      /* NOT USED                            */  01237000
*@SPACE (2);                                                        */  01238000
*/*                                                                 */  01239000
*/*           FEATURE FLAGS FOR SIGNON CONCURRENCE                  */  01240000
*/*                                                                 */  01241000
*  3 NCBIFEAT     BIT(32),       /* NEW FEATURE FLAGS       @D22DDHS*/  01242000
*   5 NCBIFE1     BIT(8),               /* NEW FEAT FLAG 1  @D22DDHS*/  01243000
*    7 NCBIPREP   BIT(1),               /* PREPARE MODE     @D22DDHS*/  01244000
*    7 NCBITRM    BIT(1),        /* SNA TERMINATION EXTENS. @D22DDHS*/  01245000
*    7 *          BIT(6),               /* RESERVED         @D22DDHS*/  01246000
*   5 NCBIFE2     BIT(8),               /* NEW FEAT FLAG 2  @D22DDHS*/  01247000
*   5 NCBIFE3     BIT(8),               /* NEW FEAT FLAG 3  @D22DDHS*/  01248000
*   5 NCBIFE4     BIT(8),               /* NEW FEAT FLAG 4  @D22DDHS*/  01249000
*  3 NCBPFEAT     BIT(32),       /* WORKING  FEATURE FLAGS  @D22DDHS*/  01250000
*  3 NCBRFEAT     BIT(32),       /* RECEIVED FEATURE FLAGS  @D22DDHS*/  01251000
*  3 NCBSFEAT     BIT(32),       /* SENT     FEATURE FLAGS  @D22DDHS*/  01252000
*  3 NCBIOT FIXED(32) BDY(DWORD), /* CTC/BSC TIME OF LAST   @D23XDAW*/  01253000
*  3 *      FIXED(32),            /* .. I/O                 @D23XDAW*/  01254000
*  3 NCBTCPDS ,                   /* TCP AREAS USED IN NCB   @D65CDHS*/ 01255000
*    5 NCBTPBF1 FIXED(32) BDY(WORD),/* ADDR OF BUFFER        @D65CDHS*/ 01256000
*    5 NCBTPBL1 FIXED(32),         /* LENGTH OF BUFFER       @D65CDHS*/ 01257000
*    5 NCBTPTIS FIXED(32),         /* TIMESTAMP TCP PENDING  @DPTMH31*/ 01258000
*    5 *        FIXED(32),         /* RESERVED               @D65CDHS*/ 01259000
*    5 *        FIXED(32),         /* RESERVED               @D65CDHS*/ 01260000
*    5 *        FIXED(32),         /* RESERVED               @D65CDHS*/ 01261000
*  3 NCBTPDS CHAR(832),           /* TCP AREAS IN NCB/TDCB   @D65CDHS*/ 01262000
*    5 NCBTPIPC CHAR(15),         /* READABLE IP-ADDRESS     @D65CDHS*/ 01263000
*    5 *        CHAR(01),         /* RESERVED                @D65CDHS*/ 01264000
*    5 NCBTPST1   BIT(8),         /* STATUS BYTE 1           @D65CDHS*/ 01265000
*      7 *        BIT(1),         /* .. UNREFERENCED         @D65CDHS*/ 01266000
*      7 NCBTPS1F BIT(1),         /* .. TCP IF CLOSED        @D65CDHS*/ 01267000
*      7 *        BIT(1),         /* .. UNREFERENCED         @D65CDHS*/ 01268000
*      7 NCBTPS1E BIT(1),         /* .. LINE ERROR           @D65CDHS*/ 01269000
*    5 NCBTPST2   BIT(8),         /* STATUS BYTE 2           @D65CDHS*/ 01270000
*      7 *        BIT(1),         /* .. UNREFERENCED         PV010222*/ 01271000
*      7 NCBTPS2R BIT(1),         /* .. RESTART TCP/IP       PV010222*/ 01272000
*      7 *        BIT(1),         /* .. UNREFERENCED         @DY46322*/ 01273690
*      7 NCBTPS2C BIT(1),         /* .. CLOSE CONNECTION     @DY46322*/ 01274380
*      7 *        BIT(2),         /* .. UNREFERENCED         @DY46322*/ 01275070
*      7 NCBTPS22 BIT(1),         /* .. NAK-2 SENT           @DPTMH31*/ 01276000
*      7 *        BIT(1),         /* .. UNREFERENCED         @DPTMH31*/ 01277000
*    5 NCBTPST3   BIT(8),         /* STATUS BYTE 3           @D65CDHS*/ 01278000
*    5 NCBTPST4   BIT(8),         /* STATUS BYTE 4           @D65CDHS*/ 01279000
*    5 NCBTPST5   BIT(8),         /* STATUS BYTE 5           @D65CDHS*/ 01280000
*      7 *        BIT(6),         /* .. UNREFERENCED         @DY46322*/ 01281690
*      7 NCBTPS5I BIT(1),         /* .. INTERNAL ERROR       @DY46322*/ 01282380
*      7 *        BIT(1),         /* .. UNREFERENCED         @DY46322*/ 01283070
*    5 NCBTPST6   BIT(8),         /* STATUS BYTE 6           @D65CDHS*/ 01284000
*      7 NCBTPS6T BIT(1),         /* .. TRACE SOCKETCALL     @D65CDHS*/ 01285000
*      7 *        BIT(7),         /* .. UNREFERENCED         @D65CDHS*/ 01286000
*  3 NCBSLDS CHAR(048);           /* AREAS FOR SSL           @D66CDHS*/ 01287000
*@SPACE (3);                                                        */  01288000
*/*                                                                 */  01289000
*/*   SNA SESSION CONTROL INFORMATION OVERLAY                       */  01290000
*/*                                                                 */  01291000
*DCL                                                                    01292000
*  1 NCBSNACB DEFINED(NCBLCB),  /* SNA SESSION CONTROL INFORMATION  */  01293000
*    3 NCBAPLID CHAR(8),     /* APPL-ID OF REMOTE NODE              */  01294000
*    3 NCBSSCB PTR(31),      /* ADDRESS OF SSCB                     */  01295000
*    3 NCBSRQE PTR(31),      /* ADDRESS OF SRQE                     */  01296000
*    3 NCBCTCB1 PTR(31),     /* ADDR OF CONNECT SESSION TCB LOCAL   */  01297000
*    3 NCBCTCB2 PTR(31),     /* ADDR OF CONNECT SESSION TCB REMOTE  */  01298000
*    3 NCBDTCB PTR(31),      /* ADDRESS OF DISCONNECT SESSION TCB   */  01299000
*    3 NCBDECB PTR(31),      /* ECB OF DISCONNECT TASK              */  01300000
*    3 NCBIFREX PTR(31),     /* ADDR 'RECEIVE-AHEAD' IPT BFR QUEUE  */  01301000
*    3 NCBOTBSX PTR(31),     /* ADDR 'SEND-AHEAD' OUTPUR BFR QUEUE  */  01302000
*    3 NCBOBTLX PTR(31),     /* TAIL PTR 'SEND-AHEAD' OUTPUT BFR Q  */  01303000
*    3 NCBWRKA PTR(31),      /* ADDR WORK AREA DE-COMP/COMPRESSION  */  01304000
*@SPACE;                                                                01305000
*    3 NCBSGTE BIT(8),       /* GATE FOR SEND PER NODE              */  01306000
*    3 NCBRGTE BIT(8),       /* GATE FOR RECEIVE PER NODE           */  01307000
*@SPACE;                                                                01308000
*/*  SESSION STATUS INFORMATION                                     */  01309000
*@SPACE;                                                                01310000
*    3 NCBSFL1 BIT(8),       /* PRIMARY AP                          */  01311000
*      5 NCBF11 BIT(1),      /* PRIMARY IN PROGRESS                 */  01312000
*      5 NCBF12 BIT(1),      /* PRIMARY PERMIT GIVEN                */  01313000
*      5 NCBF13 BIT(1),      /* OPNDST IN PROGRESS                  */  01314000
*      5 NCBF14 BIT(1),      /* OPNDST COMPLETE                     */  01315000
*      5 NCBF15 BIT(1),      /* PRIMARY COMPLETE                    */  01316000
*      5 NCBF16 BIT(1),      /* UNUSED                              */  01317000
*      5 NCBF17 BIT(1),      /* UNUSED                              */  01318000
*      5 NCBF18 BIT(1),      /* PRIMARY AP ERROR                    */  01319000
*@SPACE;                                                                01320000
*    3 NCBSFL2 BIT(8),       /* SECONDARY AP                        */  01321000
*      5 NCBF21 BIT(1),      /* SECONDARY IN PROGRESS               */  01322000
*      5 NCBF22 BIT(1),      /* SECONDARY PERMIT GIVEN              */  01323000
*      5 NCBF23 BIT(1),      /* OPNSEC IN PROGRESS                  */  01324000
*      5 NCBF24 BIT(1),      /* OPNSEC COMPLETE                     */  01325000
*      5 NCBF25 BIT(1),      /* SECONDARY COMPLETE                  */  01326000
*      5 NCBF26 BIT(1),      /* SESSION IN PROGRESS                 */  01327000
*      5 NCBSEOK BIT(1),     /* DISCONNECT REQUIRED                 */  01328000
*      5 NCBF28 BIT(1),      /* SECONDARY AP ERROR                  */  01329000
*@SPACE;                                                                01330000
*    3 NCBSFL3 BIT(8),       /* X'00' = PAP, X'FF' = SAP            */  01331000
*@SPACE;                                                                01332000
*    3 NCBSFL4 BIT(8),       /* FLAG BYTE 4                         */  01333000
*      5 NCBRSHTS BIT(1),    /* RSHUTD SENT                         */  01334000
*      5 NCBRSHTR BIT(1),    /* RSHUTD RECEIVED                     */  01335000
*@SPACE;                                                                01336000
*    3 NCBSEST BIT(8),       /* SESSION STATUS BYTE                 */  01337000
*      5 NCBSSUB BIT(1),     /* UNBIND RECEIVED                     */  01338000
*      5 NCBSSTS BIT(1),     /* TERMSESS IS WAITING                 */  01339000
*      5 NCBWSDT BIT(1),     /* WAIT FOR SDT                        */  01340000
*      5 NCBSSSD BIT(1),     /* SDT RECEIVED                        */  01341000
*      5 NCBSSCL BIT(1),     /* CLEAR RECEIVED                      */  01342000
*      5 NCBSHTC BIT(1),     /* WAIT FOR SHUTC                      */  01343000
*@SPACE;                                                                01344000
*    3 NCBSSCT BIN(8),       /* SESSION RETRY COUNTER       @D22DDHS*/  01345000
*@SPACE;                                                                01346000
*    3 NCBSSF1 BIT(8),       /* SESSION FLAG BYTE           @D22DDHS*/  01347000
*      5 NCBSSF1W BIT(1),    /* ISSUE WAIT                  @D22DDHS*/  01348000
*      5 NCBSSF1R BIT(1),    /* USE RC/FD FOR MSG           @DY43611*/  01349000
*      5 *        BIT(6),    /* UNUSED                      @DY43611*/  01350000
*@SPACE;                                                                01351000
*    3 *       BIT(24),      /* NOT USED                    @DA33141*/  01352000
*@SPACE;                                                                01353000
*    3 NCBCMPT PTR(31);      /* COMPACT. TABLE BLOCK ADDR.  @DA33141*/  01354000
*@EJECT;                                                                01355000
*/*                                                                 */  01356000
*/*           ACCOUNT RECORD SNA                                    */  01357000
*/*                                                                 */  01358000
*DCL                                                                    01359000
*  1 NCBSACCT DEFINED(NCBACCT),  /* SNA ACCOUNT RECORD              */  01360000
*    3 *       CHAR(8),      /* SYTEM DATE 'MM/DD/YY'               */  01361000
*    3 *       CHAR(4),      /* SIGNON TIME  (0HHMMSSF) PACKED      */  01362000
*    3 *       CHAR(4),      /* SIGNOFF TIME  (0HHMMSSF) PACKED     */  01363000
*    3 *       CHAR(24),     /* USER INFORMATION                    */  01364000
*      5 *     CHAR(8),      /* NODE NAME FOR ACCOUNT RECORD        */  01365000
*      5 *     CHAR(8),      /* NODE PASSWORD FOR ACCOUNT RECORD    */  01366000
*      5 *     CHAR(8),      /* LINE PASSWORD                       */  01367000
*    3 *       FIXED(16),    /* INVALID RESPONSES PER SESSION       */  01368000
*    3 *       CHAR(1),      /* PNET ACCOUNT RECORD IDENTIFIER      */  01369000
*    3 *       BIT(8),       /* SIGNOFF REASON INDICATION           */  01370000
*    3 *       FIXED(8),     /* ERROR COUNT                         */  01371000
*    3 *       CHAR(3),      /* DEVICE ADDRESS CUU                  */  01372000
*    3 *        ,            /* SUMMARY NAME FOR COUNT FIELDS       */  01373000
*      5 *       FIXED(32),  /* BUFFERS SENT COUNT                  */  01374000
*      5 NCBYCNT FIXED(32),  /* BUFFERS RECEIVED COUNT              */  01375000
*    3 *       CHAR(8);      /* SIGNOFF DATE 'MM/DD/YY'             */  01376000
*/*                                                                 */  01377000
*@SPACE;                                                                01378000
*/*                                                                 */  01379000
*/*   TRANSMITTER /RECEIVER TASK ENTRY IN NCB                       */  01380000
*/*                                                                 */  01381000
*DCL                                                                    01382000
*  1 NCBEDS BASED(*),        /* TASK ENTRY IN NCBXXTB ARRAY         */  01383000
*    3 NCBERCB CHAR(1),      /* RCB OF TASK CONCERNED               */  01384000
*    3 NCBEST1 BIT(8),       /* STATUS/ACTION BYTE                  */  01385000
*      5 NCBTDRN BIT(1),     /* TASK DRAINED                        */  01386000
*      5 NCBTLVE BIT(1),     /* TASK LIVE                           */  01387000
*      5 NCBDETE BIT(1),     /* TASK DETACHES                       */  01388000
*      5 NCBTCRE BIT(1),     /* TASK CREATION REQUEST               */  01389000
*      5 * BIT(4),           /* RESERVED                            */  01390000
*    3 NCBESTS CHAR(1),      /* TASK STOP STATUS (DUPLICATE TO TCB) */  01391000
*    3 NCBETYP BIT(8),       /* TASK TYPE                           */  01392000
*      5 NCBETYPT BIT(1),    /* TRANSMITTER TASK                    */  01393000
*      5 NCBETYPR BIT(1),    /* RECEIVER TASK                       */  01394000
*      5 NCBETYPC BIT(1),    /* CONSOLE  TASK                       */  01395000
*      5 * BIT(1),           /* UNUSED                              */  01396000
*      5 NCBETYPJ BIT(1),    /* JOB PROCESSING                      */  01397000
*      5 NCBETYPO  BIT(1),   /* OUTPUT (LST,PUN) PROCESS            */  01398000
*      5 * BIT(2),           /* UNUSED                              */  01399000
*    3 NCBETCB PTR(31);      /* TCB ADDRESS OF TASK                 */  01400000
*DCL                                                                    01401000
*  NCBLCTL FIXED(8) CONSTANT(32);   /* LENGTH OF LINE/CTL BUFFERS   */  01402000
*@EJECT;                                                            */  01403000
*/*                                                                 */  01404000
*/*   PASSED PARAMETERS TO IPW$$LD5 DUE TO RESTRUCTERING OF PHASES  */  01405000
*/*                                                                 */  01406000
*DCL                          /* PARAMETERS FOR IPW$$LD5    @D22DDHS*/  01407000
* 1 PASPARD CHAR(16) BASED(*) BDY(WORD), /*                 @D22DDHS*/  01408000
*  3  PASPAR5  CHAR(12),     /* PARAMETERS FOR IPW$$LD5     @D22DDHS*/  01409000
*  3  PASTIME  CHAR(1),      /* TIME PARAMETER              @DA39816*/  01410000
*  3  *        CHAR(2),      /* NOT USED                    @DA39816*/  01411000
*  3  PASFCT5   BIT(8);      /* FUNCTION FOR IPW$$LD5       @D22DDHS*/  01412000
*@SPACE;                                                                01413000
*/*                                                                 */  01414000
*/*           CONSTANTS FOR FUNCTIONS WITHIN IPW$$LD5               */  01415000
*/*                                                                 */  01416000
*DCL                                                                    01417000
* (PASF5RIF  CONSTANT('01'X),  /* TEST RCB OF RIF           @D22DDHS*/  01418000
*  PASF5TRN  CONSTANT('02'X),  /* TEST RCB FOR TRANSMITTER  @D22DDHS*/  01419000
*  PASF5RCV  CONSTANT('03'X),  /* TEST RCB FOR RECEIVER     @D22DDHS*/  01420000
*  PASF5LOG  CONSTANT('04'X),  /* TEST LOG ERROR ON SYSREC  @D22DDHS*/  01421000
*  PASF5CNL  CONSTANT('05'X),  /* TEST CANCEL TASKS         @D22DDHS*/  01422000
*  PASF5CRE  CONSTANT('06'X),  /* TEST CREATE TASK          @D22DDHS*/  01423000
*  PASF5UPD  CONSTANT('07'X),  /* TEST UPDATE NAT           @D22DDHS*/  01424000
*  PASF5SET  CONSTANT('08'X)   /* TEST SET TIMER-INTERVAL   @D22DDHS*/  01425000
*   ) BIT(8);                  /*                           @D22DDHS*/  01426000
*    %IF TCP99 ='YES' %THEN %GOTO PLSNTCP;    /*           @D65CDHS*/  01427000
*%PLSNTCP:;                                    /*           @D65CDHS*/  01428000
